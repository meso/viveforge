# Vibebase E2E Tests

ãƒãƒ¼ãƒ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ãŸVibebaseã®E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

## ğŸ“‹ æ¦‚è¦

ã“ã®E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã¯ã€Vibebaseã®å…¨æ©Ÿèƒ½ã‚’ç¶²ç¾…çš„ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®ãƒãƒ¼ãƒ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚·ãƒŠãƒªã‚ªã‚’ä½¿ç”¨ã—ã¦ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ï¼š

- **èªè¨¼**: ç®¡ç†è€…èªè¨¼ï¼ˆvibebase-authï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆå†…éƒ¨JWTï¼‰ã€APIã‚­ãƒ¼èªè¨¼
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ**: CRUDæ“ä½œã€ãƒãƒ«ã‚¯æ“ä½œã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€RBAC
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½**: Server-Sent Events (SSE)ã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›´é€šçŸ¥
- **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**: Web Push APIã€VAPIDã€ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€R2çµ±åˆ
- **ã‚«ã‚¹ã‚¿ãƒ SQL**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ä»˜ãã‚¯ã‚¨ãƒªã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½

## ğŸ—ï¸ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
```
users â† user_sessions
  â”œâ”€ teams â†’ members â†’ users
  â”‚    â†“
  â”‚  projects
  â”‚    â†“
  â”‚  tasks â† task_comments
  â”‚    â†“ 
  â”‚  task_attachments
  â”‚
  â”œâ”€ push_subscriptions
  â”œâ”€ push_notification_rules  
  â”œâ”€ push_notification_logs
  â”œâ”€ realtime_hooks
  â”œâ”€ realtime_events
  â””â”€ custom_queries
```

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
1. **Engineering Team**: 4äººã®ãƒ¡ãƒ³ãƒãƒ¼ã§APIé–‹ç™ºã¨ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™º
2. **Marketing Team**: 3äººã®ãƒ¡ãƒ³ãƒãƒ¼ã§ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç®¡ç†ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æˆ¦ç•¥
3. **Design Team**: 3äººã®ãƒ¡ãƒ³ãƒãƒ¼ã§ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

1. **Node.js v18ä»¥ä¸Š** ã¨ **pnpm** ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
2. **Cloudflare Wrangler** ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ï¼ˆ`npm install -g wrangler`ï¼‰
3. GitHubã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã„ã‚‹ã“ã¨
4. **Vibebaseã‚µãƒ¼ãƒãƒ¼ãŒ localhost:8787 ã§å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨**

### âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€**å¿…ãšVibebaseã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãã ã•ã„**ï¼š

```bash
# packages/core ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd packages/core
pnpm dev
```

ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆã€å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã™ã€‚

### ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/vibebase/vibebase.git
cd vibebase

# 2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# 3. Vibebaseã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼‰
cd packages/core
pnpm dev

# 4. E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼‰
cd tests/e2e
npm run setup    # ãƒ†ã‚¹ãƒˆç’°å¢ƒã®åˆæœŸåŒ–
npm run seed     # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
npm test         # E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm run teardown # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

### è©³ç´°ãªæ‰‹é †

#### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
pnpm install
```

#### 2. Vibebaseã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
# packages/core ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd packages/core
pnpm dev
```

ã‚µãƒ¼ãƒãƒ¼ãŒ `http://localhost:8787` ã§èµ·å‹•ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

#### 3. E2Eãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

```bash
cd tests/e2e
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### å®Œå…¨ãªE2Eãƒ†ã‚¹ãƒˆã‚µã‚¤ã‚¯ãƒ«

```bash
# 1. ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npm run setup

# 2. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
npm run seed

# 3. E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm test

# 4. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
npm run teardown
```

### å„ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜

#### Setupï¼ˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰
```bash
npm run setup
```
- `.env.test` ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•ç”Ÿæˆ
- æ—¢å­˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å‰Šé™¤
- ã‚³ã‚¢ & ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®é©ç”¨
- ãƒ†ã‚¹ãƒˆç”¨APIã‚­ãƒ¼ã®ç™»éŒ²
- VAPIDå…¬é–‹/ç§˜å¯†éµã®åˆæœŸåŒ–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆAliceã€Bobã€Charlieï¼‰ã®ä½œæˆ

#### Seedï¼ˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼‰
```bash
npm run seed
```
- ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆï¼ˆAliceã€Bobã€Charlieã€Dianaã€Eveï¼‰
- ãƒãƒ¼ãƒ ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã‚¿ã‚¹ã‚¯ã®ä½œæˆ
- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—ã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š
- ã‚¿ã‚¹ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã®ä½œæˆ
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿IDã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®ä¿å­˜

#### Testï¼ˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼‰
```bash
npm test
```
å…¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

#### Teardownï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
```bash
npm run teardown
```
- å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸçŠ¶æ…‹ã¸ã®å¾©å…ƒ

### å€‹åˆ¥ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# èªè¨¼ãƒ†ã‚¹ãƒˆã®ã¿
npm test auth.test.ts

# ãƒãƒ¼ãƒ ç®¡ç†ãƒ†ã‚¹ãƒˆã®ã¿
npm test teams.test.ts

# ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ†ã‚¹ãƒˆã®ã¿
npm test user-auth.test.ts

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã®ã¿
npm test realtime.test.ts

# ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãƒ†ã‚¹ãƒˆã®ã¿
npm test push-notifications.test.ts
```

### é–‹ç™ºç”¨ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰

```bash
# UIãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:ui

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:watch

# å‹ãƒã‚§ãƒƒã‚¯
npm run typecheck

# Lint
npm run lint
```

## ğŸ“Š ãƒ†ã‚¹ãƒˆæ§‹æˆ

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | ä¸»è¦æ©Ÿèƒ½ |
|----------|------|----------|
| `auth.test.ts` | ç®¡ç†è€…èªè¨¼ã¨APIã‚­ãƒ¼èªè¨¼ | GitHub OAuthã€ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ |
| `user-auth.test.ts` | ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ | RBACã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° |
| `teams.test.ts` | ãƒãƒ¼ãƒ ç®¡ç†ï¼ˆç®¡ç†è€…æ¨©é™ï¼‰ | CRUDã€ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç† |
| `teams-user.test.ts` | ãƒãƒ¼ãƒ ç®¡ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ï¼‰ | æ¨©é™åˆ¶å¾¡ãƒ†ã‚¹ãƒˆ |
| `tasks.test.ts` | ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆç®¡ç†è€…æ¨©é™ï¼‰ | CRUDã€ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒãƒ«ã‚¯æ“ä½œ |
| `tasks-user.test.ts` | ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ï¼‰ | æ‰€æœ‰è€…ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ |
| `storage.test.ts` | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½ï¼ˆç®¡ç†è€…ï¼‰ | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| `storage-user.test.ts` | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ | æ¨©é™ä»˜ããƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ |
| `storage-real-files.test.ts` | å®Ÿãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ†ã‚¹ãƒˆ | ç”»åƒãƒ»PDFãƒ»ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ« |
| `realtime.test.ts` | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆç®¡ç†è€…ï¼‰ | SSEã€ãƒ•ãƒƒã‚¯ç®¡ç† |
| `realtime-user.test.ts` | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ | ãƒ‡ãƒ¼ã‚¿å¤‰æ›´é€šçŸ¥ |
| `push-notifications.test.ts` | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆç®¡ç†è€…ï¼‰ | VAPIDã€é€šçŸ¥ãƒ«ãƒ¼ãƒ« |
| `push-notifications-user.test.ts` | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ | è³¼èª­ç®¡ç†ã€å—ä¿¡ |
| `custom-sql.test.ts` | ã‚«ã‚¹ã‚¿ãƒ SQLæ©Ÿèƒ½ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

- âœ… **èªè¨¼**: ç®¡ç†è€…èªè¨¼ï¼ˆRS256ï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆHS256ï¼‰ã€APIã‚­ãƒ¼èªè¨¼
- âœ… **CRUDæ“ä½œ**: ä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€å‰Šé™¤ã€ãƒãƒ«ã‚¯æ“ä½œ
- âœ… **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: RBACã€æ‰€æœ‰è€…ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãƒãƒªã‚·ãƒ¼
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: SSEæ¥ç¶šã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›´é€šçŸ¥ã€ãƒ•ãƒƒã‚¯ç®¡ç†
- âœ… **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**: VAPIDè¨­å®šã€ãƒ‡ãƒã‚¤ã‚¹ç™»éŒ²ã€é€šçŸ¥é…ä¿¡
- âœ… **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€æ¨©é™åˆ¶å¾¡
- âœ… **ã‚«ã‚¹ã‚¿ãƒ SQL**: å‹•çš„ã‚¯ã‚¨ãƒªã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ç„¡åŠ¹ãªå…¥åŠ›ã€æ¨©é™ã‚¨ãƒ©ãƒ¼ã€å‹å®‰å…¨æ€§

## ğŸ”§ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### `.env.test`
`npm run setup` å®Ÿè¡Œæ™‚ã«è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ï¼š
```env
VIBEBASE_API_URL=http://localhost:8787
VIBEBASE_API_KEY=vb_live_test123456789012345678901234567890
CLEANUP_BEFORE_TEST=true
```

### `package.json` ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```json
{
  "scripts": {
    "test": "vitest run",
    "test:watch": "vitest",
    "test:ui": "vitest --ui",
    "setup": "tsx --env-file .env.test team-task-app/setup.ts",
    "seed": "tsx --env-file .env.test team-task-app/seed.ts", 
    "teardown": "tsx --env-file .env.test team-task-app/teardown.ts",
    "typecheck": "tsc --noEmit",
    "lint": "biome check .",
    "lint:fix": "biome check --write ."
  }
}
```

### `vitest.config.ts`
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 30ç§’
- ç’°å¢ƒ: Node.js  
- Globals: Vitestã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
- EventSource: Node.js polyfill

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„**
   ```bash
   # ã‚¨ãƒ©ãƒ¼: Failed to fetch http://localhost:8787
   cd packages/core
   pnpm dev
   ```

2. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒå¤ã„**
   ```bash
   npm run teardown
   npm run setup
   npm run seed  
   ```

3. **å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹**
   ```bash
   npm run typecheck  # å‹ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ç¢ºèª
   pnpm typecheck     # ãƒ«ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã§ã®å…¨ä½“ãƒã‚§ãƒƒã‚¯
   ```

4. **Lintã‚¨ãƒ©ãƒ¼**
   ```bash
   npm run lint       # ã‚¨ãƒ©ãƒ¼ç¢ºèª
   npm run lint:fix   # è‡ªå‹•ä¿®æ­£
   ```

5. **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãƒ†ã‚¹ãƒˆãŒå¤±æ•—**
   - VAPIDè¨­å®šã‚’ç¢ºèª
   - setupæ™‚ã®VAPIDåˆæœŸåŒ–ã‚’ç¢ºèª

6. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ†ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**
   - SSEæ¥ç¶šã‚’ç¢ºèª
   - Durable Objectsè¨­å®šã‚’ç¢ºèª

### ãƒ­ã‚°ç¢ºèª

```bash
# Vibebaseã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ã‚°
cd packages/core
pnpm dev

# ãƒ†ã‚¹ãƒˆã®è©³ç´°ãƒ­ã‚°  
cd tests/e2e
npm test -- --reporter=verbose

# å‹ãƒã‚§ãƒƒã‚¯è©³ç´°
npm run typecheck
```

### å®Œå…¨ãƒªã‚»ãƒƒãƒˆ

```bash
# 1. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
npm run teardown

# 2. Wranglerãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªã‚¢
cd packages/core
rm -rf .wrangler

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†åˆæœŸåŒ–
pnpm db:init

# 4. ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
pnpm dev

# 5. E2Eãƒ†ã‚¹ãƒˆå†ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd ../../tests/e2e
npm run setup
npm run seed
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### èªè¨¼ãƒ•ãƒ­ãƒ¼
- **ç®¡ç†è€…**: GitHub OAuth â†’ vibebase-auth â†’ RS256 JWT â†’ AdminAuthManager
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: å†…éƒ¨èªè¨¼ â†’ HS256 JWT â†’ UserAuthManager  
- **API**: API Key â†’ APIKeyManager

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
1. HTTP Request â†’ Hono Router
2. Multi-Auth Middleware â†’ èªè¨¼æ¤œè¨¼
3. RBAC Middleware â†’ æ¨©é™ãƒã‚§ãƒƒã‚¯
4. Route Handler â†’ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
5. D1 Database â†’ ãƒ‡ãƒ¼ã‚¿æ“ä½œ
6. Response â†’ JSON/SSE

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
1. ãƒ‡ãƒ¼ã‚¿å¤‰æ›´ â†’ Database Trigger
2. Realtime Hook â†’ Event Generation  
3. Durable Object â†’ Connection Management
4. SSE â†’ Client Notification

## ğŸ¤ è²¢çŒ®

æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ ã™ã‚‹å ´åˆï¼š

1. é©åˆ‡ãªãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ 
2. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ãªå ´åˆã¯ `fixtures/seed-data.ts` ã‚’æ›´æ–°
3. å‹å®šç¾©ã¯ `fixtures/types.ts` ã‚’æ›´æ–°
4. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ã‚’ç¢ºå®Ÿã«å®Ÿè£…  
5. ã“ã®READMEã‚’æ›´æ–°

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‘½åè¦å‰‡
- `*.test.ts`: ç®¡ç†è€…æ¨©é™ã§ã®ãƒ†ã‚¹ãƒˆ
- `*-user.test.ts`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã§ã®ãƒ†ã‚¹ãƒˆ  
- æ©Ÿèƒ½åã‚’æ˜ç¢ºã«è¡¨ç¾ï¼ˆä¾‹ï¼š`push-notifications.test.ts`ï¼‰

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Elastic License 2.0