(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Te,N,St,se,gt,Nt,jt,Lt,qe,Me,Ie,Dt,ke={},Kt=[],fn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$e=Array.isArray;function J(e,t){for(var r in t)e[r]=t[r];return e}function Ge(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t,r){var i,s,a,d={};for(a in t)a=="key"?i=t[a]:a=="ref"?s=t[a]:d[a]=t[a];if(arguments.length>2&&(d.children=arguments.length>3?Te.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)d[a]===void 0&&(d[a]=e.defaultProps[a]);return xe(e,d,i,s,null)}function xe(e,t,r,i,s){var a={type:e,props:t,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++St,__i:-1,__u:0};return s==null&&N.vnode!=null&&N.vnode(a),a}function Ke(e){return e.children}function ve(e,t){this.props=e,this.context=t}function fe(e,t){if(t==null)return e.__?fe(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?fe(e):null}function Ft(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ft(e)}}function Ue(e){(!e.__d&&(e.__d=!0)&&se.push(e)&&!De.__r++||gt!=N.debounceRendering)&&((gt=N.debounceRendering)||Nt)(De)}function De(){for(var e,t,r,i,s,a,d,h=1;se.length;)se.length>h&&se.sort(jt),e=se.shift(),h=se.length,e.__d&&(r=void 0,s=(i=(t=e).__v).__e,a=[],d=[],t.__P&&((r=J({},i)).__v=i.__v+1,N.vnode&&N.vnode(r),Je(t.__P,r,i,t.__n,t.__P.namespaceURI,32&i.__u?[s]:null,a,s??fe(i),!!(32&i.__u),d),r.__v=i.__v,r.__.__k[r.__i]=r,Pt(a,r,d),r.__e!=s&&Ft(r)));De.__r=0}function At(e,t,r,i,s,a,d,h,g,m,b){var l,y,f,C,S,j,v=i&&i.__k||Kt,T=t.length;for(g=hn(r,t,v,g,T),l=0;l<T;l++)(f=r.__k[l])!=null&&(y=f.__i==-1?ke:v[f.__i]||ke,f.__i=l,j=Je(e,f,y,s,a,d,h,g,m,b),C=f.__e,f.ref&&y.ref!=f.ref&&(y.ref&&Xe(y.ref,null,f),b.push(f.ref,f.__c||C,f)),S==null&&C!=null&&(S=C),4&f.__u||y.__k===f.__k?g=Rt(f,g,e):typeof f.type=="function"&&j!==void 0?g=j:C&&(g=C.nextSibling),f.__u&=-7);return r.__e=S,g}function hn(e,t,r,i,s){var a,d,h,g,m,b=r.length,l=b,y=0;for(e.__k=new Array(s),a=0;a<s;a++)(d=t[a])!=null&&typeof d!="boolean"&&typeof d!="function"?(g=a+y,(d=e.__k[a]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?xe(null,d,null,null,null):$e(d)?xe(Ke,{children:d},null,null,null):d.constructor==null&&d.__b>0?xe(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=e,d.__b=e.__b+1,h=null,(m=d.__i=mn(d,r,g,l))!=-1&&(l--,(h=r[m])&&(h.__u|=2)),h==null||h.__v==null?(m==-1&&(s>b?y--:s<b&&y++),typeof d.type!="function"&&(d.__u|=4)):m!=g&&(m==g-1?y--:m==g+1?y++:(m>g?y--:y++,d.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<b;a++)(h=r[a])!=null&&!(2&h.__u)&&(h.__e==i&&(i=fe(h)),Mt(h,h));return i}function Rt(e,t,r){var i,s;if(typeof e.type=="function"){for(i=e.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=e,t=Rt(i[s],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=fe(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Be(e,t){return t=t||[],e==null||typeof e=="boolean"||($e(e)?e.some(function(r){Be(r,t)}):t.push(e)),t}function mn(e,t,r,i){var s,a,d=e.key,h=e.type,g=t[r];if(g===null&&e.key==null||g&&d==g.key&&h==g.type&&!(2&g.__u))return r;if(i>(g!=null&&!(2&g.__u)?1:0))for(s=r-1,a=r+1;s>=0||a<t.length;){if(s>=0){if((g=t[s])&&!(2&g.__u)&&d==g.key&&h==g.type)return s;s--}if(a<t.length){if((g=t[a])&&!(2&g.__u)&&d==g.key&&h==g.type)return a;a++}}return-1}function yt(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||fn.test(t)?r:r+"px"}function je(e,t,r,i,s){var a,d;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)r&&t in r||yt(e.style,t,"");if(r)for(t in r)i&&r[t]==i[t]||yt(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(Lt,"$1")),d=t.toLowerCase(),t=d in e||t=="onFocusOut"||t=="onFocusIn"?d.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?i?r.u=i.u:(r.u=qe,e.addEventListener(t,a?Ie:Me,a)):e.removeEventListener(t,a?Ie:Me,a);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function _t(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=qe++;else if(t.t<r.u)return;return r(N.event?N.event(t):t)}}}function Je(e,t,r,i,s,a,d,h,g,m){var b,l,y,f,C,S,j,v,T,q,w,_,U,ee,X,W,G,H=t.type;if(t.constructor!=null)return null;128&r.__u&&(g=!!(32&r.__u),a=[h=t.__e=r.__e]),(b=N.__b)&&b(t);e:if(typeof H=="function")try{if(v=t.props,T="prototype"in H&&H.prototype.render,q=(b=H.contextType)&&i[b.__c],w=b?q?q.props.value:b.__:i,r.__c?j=(l=t.__c=r.__c).__=l.__E:(T?t.__c=l=new H(v,w):(t.__c=l=new ve(v,w),l.constructor=H,l.render=gn),q&&q.sub(l),l.props=v,l.state||(l.state={}),l.context=w,l.__n=i,y=l.__d=!0,l.__h=[],l._sb=[]),T&&l.__s==null&&(l.__s=l.state),T&&H.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=J({},l.__s)),J(l.__s,H.getDerivedStateFromProps(v,l.__s))),f=l.props,C=l.state,l.__v=t,y)T&&H.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),T&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(T&&H.getDerivedStateFromProps==null&&v!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,w),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,w)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(l.props=v,l.state=l.__s,l.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function($){$&&($.__=t)}),_=0;_<l._sb.length;_++)l.__h.push(l._sb[_]);l._sb=[],l.__h.length&&d.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,w),T&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,C,S)})}if(l.context=w,l.props=v,l.__P=e,l.__e=!1,U=N.__r,ee=0,T){for(l.state=l.__s,l.__d=!1,U&&U(t),b=l.render(l.props,l.state,l.context),X=0;X<l._sb.length;X++)l.__h.push(l._sb[X]);l._sb=[]}else do l.__d=!1,U&&U(t),b=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++ee<25);l.state=l.__s,l.getChildContext!=null&&(i=J(J({},i),l.getChildContext())),T&&!y&&l.getSnapshotBeforeUpdate!=null&&(S=l.getSnapshotBeforeUpdate(f,C)),W=b,b!=null&&b.type===Ke&&b.key==null&&(W=Ot(b.props.children)),h=At(e,$e(W)?W:[W],t,r,i,s,a,d,h,g,m),l.base=t.__e,t.__u&=-161,l.__h.length&&d.push(l),j&&(l.__E=l.__=null)}catch($){if(t.__v=null,g||a!=null)if($.then){for(t.__u|=g?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;a[a.indexOf(h)]=null,t.__e=h}else for(G=a.length;G--;)Ge(a[G]);else t.__e=r.__e,t.__k=r.__k;N.__e($,t,r)}else a==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):h=t.__e=pn(r.__e,t,r,i,s,a,d,g,m);return(b=N.diffed)&&b(t),128&t.__u?void 0:h}function Pt(e,t,r){for(var i=0;i<r.length;i++)Xe(r[i],r[++i],r[++i]);N.__c&&N.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(a){a.call(s)})}catch(a){N.__e(a,s.__v)}})}function Ot(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:$e(e)?e.map(Ot):J({},e)}function pn(e,t,r,i,s,a,d,h,g){var m,b,l,y,f,C,S,j=r.props,v=t.props,T=t.type;if(T=="svg"?s="http://www.w3.org/2000/svg":T=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(m=0;m<a.length;m++)if((f=a[m])&&"setAttribute"in f==!!T&&(T?f.localName==T:f.nodeType==3)){e=f,a[m]=null;break}}if(e==null){if(T==null)return document.createTextNode(v);e=document.createElementNS(s,T,v.is&&v),h&&(N.__m&&N.__m(t,a),h=!1),a=null}if(T==null)j===v||h&&e.data==v||(e.data=v);else{if(a=a&&Te.call(e.childNodes),j=r.props||ke,!h&&a!=null)for(j={},m=0;m<e.attributes.length;m++)j[(f=e.attributes[m]).name]=f.value;for(m in j)if(f=j[m],m!="children"){if(m=="dangerouslySetInnerHTML")l=f;else if(!(m in v)){if(m=="value"&&"defaultValue"in v||m=="checked"&&"defaultChecked"in v)continue;je(e,m,null,f,s)}}for(m in v)f=v[m],m=="children"?y=f:m=="dangerouslySetInnerHTML"?b=f:m=="value"?C=f:m=="checked"?S=f:h&&typeof f!="function"||j[m]===f||je(e,m,f,j[m],s);if(b)h||l&&(b.__html==l.__html||b.__html==e.innerHTML)||(e.innerHTML=b.__html),t.__k=[];else if(l&&(e.innerHTML=""),At(t.type=="template"?e.content:e,$e(y)?y:[y],t,r,i,T=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,d,a?a[0]:r.__k&&fe(r,0),h,g),a!=null)for(m=a.length;m--;)Ge(a[m]);h||(m="value",T=="progress"&&C==null?e.removeAttribute("value"):C!=null&&(C!==e[m]||T=="progress"&&!C||T=="option"&&C!=j[m])&&je(e,m,C,j[m],s),m="checked",S!=null&&S!=e[m]&&je(e,m,S,j[m],s))}return e}function Xe(e,t,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(s){N.__e(s,r)}}function Mt(e,t,r){var i,s;if(N.unmount&&N.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Xe(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){N.__e(a,t)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&Mt(i[s],t,r||typeof e.type!="function");r||Ge(e.__e),e.__c=e.__=e.__e=void 0}function gn(e,t,r){return this.constructor(e,r)}function yn(e,t,r){var i,s,a,d;t==document&&(t=document.documentElement),N.__&&N.__(e,t),s=(i=!1)?null:t.__k,a=[],d=[],Je(t,e=t.__k=Ee(Ke,null,[e]),s||ke,ke,t.namespaceURI,s?null:t.firstChild?Te.call(t.childNodes):null,a,s?s.__e:t.firstChild,i,d),Pt(a,e,d)}function _n(e,t,r){var i,s,a,d,h=J({},e.props);for(a in e.type&&e.type.defaultProps&&(d=e.type.defaultProps),t)a=="key"?i=t[a]:a=="ref"?s=t[a]:h[a]=t[a]===void 0&&d!=null?d[a]:t[a];return arguments.length>2&&(h.children=arguments.length>3?Te.call(arguments,2):r),xe(e.type,h,i||e.key,s||e.ref,null)}function bn(e){function t(r){var i,s;return this.getChildContext||(i=new Set,(s={})[t.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&i.forEach(function(d){d.__e=!0,Ue(d)})},this.sub=function(a){i.add(a);var d=a.componentWillUnmount;a.componentWillUnmount=function(){i&&i.delete(a),d&&d.call(a)}}),r.children}return t.__c="__cC"+Dt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,i){return r.children(i)}).contextType=t,t}Te=Kt.slice,N={__e:function(e,t,r,i){for(var s,a,d;t=t.__;)if((s=t.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),d=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,i||{}),d=s.__d),d)return s.__E=s}catch(h){e=h}throw e}},St=0,ve.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=J({},this.state),typeof e=="function"&&(e=e(J({},r),this.props)),e&&J(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ue(this))},ve.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ue(this))},ve.prototype.render=Ke,se=[],Nt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jt=function(e,t){return e.__v.__b-t.__v.__b},De.__r=0,Lt=/(PointerCapture)$|Capture$/i,qe=0,Me=_t(!1),Ie=_t(!0),Dt=0;var xn=0;function n(e,t,r,i,s,a){t||(t={});var d,h,g=t;if("ref"in g)for(h in g={},t)h=="ref"?d=t[h]:g[h]=t[h];var m={type:e,props:g,key:r,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--xn,__i:-1,__u:0,__source:s,__self:a};if(typeof e=="function"&&(d=e.defaultProps))for(h in d)g[h]===void 0&&(g[h]=d[h]);return N.vnode&&N.vnode(m),m}var Ce,D,Pe,bt,He=0,It=[],O=N,xt=O.__b,vt=O.__r,wt=O.diffed,kt=O.__c,Ct=O.unmount,Tt=O.__;function Ze(e,t){O.__h&&O.__h(D,e,He||t),He=0;var r=D.__H||(D.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function k(e){return He=1,vn(Ut,e)}function vn(e,t,r){var i=Ze(Ce++,2);if(i.t=e,!i.__c&&(i.__=[Ut(void 0,t),function(h){var g=i.__N?i.__N[0]:i.__[0],m=i.t(g,h);g!==m&&(i.__N=[m,i.__[1]],i.__c.setState({}))}],i.__c=D,!D.__f)){var s=function(h,g,m){if(!i.__c.__H)return!0;var b=i.__c.__H.__.filter(function(y){return!!y.__c});if(b.every(function(y){return!y.__N}))return!a||a.call(this,h,g,m);var l=i.__c.props!==h;return b.forEach(function(y){if(y.__N){var f=y.__[0];y.__=y.__N,y.__N=void 0,f!==y.__[0]&&(l=!0)}}),a&&a.call(this,h,g,m)||l};D.__f=!0;var a=D.shouldComponentUpdate,d=D.componentWillUpdate;D.componentWillUpdate=function(h,g,m){if(this.__e){var b=a;a=void 0,s(h,g,m),a=b}d&&d.call(this,h,g,m)},D.shouldComponentUpdate=s}return i.__N||i.__}function ue(e,t){var r=Ze(Ce++,3);!O.__s&&Tn(r.__H,t)&&(r.__=e,r.u=t,D.__H.__h.push(r))}function wn(e){var t=D.context[e.__c],r=Ze(Ce++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(D)),t.props.value):e.__}function kn(){for(var e;e=It.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Le),e.__H.__h.forEach(ze),e.__H.__h=[]}catch(t){e.__H.__h=[],O.__e(t,e.__v)}}O.__b=function(e){D=null,xt&&xt(e)},O.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Tt&&Tt(e,t)},O.__r=function(e){vt&&vt(e),Ce=0;var t=(D=e.__c).__H;t&&(Pe===D?(t.__h=[],D.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(Le),t.__h.forEach(ze),t.__h=[],Ce=0)),Pe=D},O.diffed=function(e){wt&&wt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(It.push(t)!==1&&bt===O.requestAnimationFrame||((bt=O.requestAnimationFrame)||Cn)(kn)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Pe=D=null},O.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Le),r.__h=r.__h.filter(function(i){return!i.__||ze(i)})}catch(i){t.some(function(s){s.__h&&(s.__h=[])}),t=[],O.__e(i,r.__v)}}),kt&&kt(e,t)},O.unmount=function(e){Ct&&Ct(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(i){try{Le(i)}catch(s){t=s}}),r.__H=void 0,t&&O.__e(t,r.__v))};var $t=typeof requestAnimationFrame=="function";function Cn(e){var t,r=function(){clearTimeout(i),$t&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(r,35);$t&&(t=requestAnimationFrame(r))}function Le(e){var t=D,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),D=t}function ze(e){var t=D;e.__c=e.__(),D=t}function Tn(e,t){return!e||e.length!==t.length||t.some(function(r,i){return r!==e[i]})}function Ut(e,t){return typeof t=="function"?t(e):t}var $n={};function be(e,t){for(var r in t)e[r]=t[r];return e}function We(e,t,r){var i,s=/(?:\?([^#]*))?(#.*)?$/,a=e.match(s),d={};if(a&&a[1])for(var h=a[1].split("&"),g=0;g<h.length;g++){var m=h[g].split("=");d[decodeURIComponent(m[0])]=decodeURIComponent(m.slice(1).join("="))}e=Ve(e.replace(s,"")),t=Ve(t||"");for(var b=Math.max(e.length,t.length),l=0;l<b;l++)if(t[l]&&t[l].charAt(0)===":"){var y=t[l].replace(/(^:|[+*?]+$)/g,""),f=(t[l].match(/[+*?]+$/)||$n)[0]||"",C=~f.indexOf("+"),S=~f.indexOf("*"),j=e[l]||"";if(!j&&!S&&(f.indexOf("?")<0||C)){i=!1;break}if(d[y]=decodeURIComponent(j),C||S){d[y]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){i=!1;break}return(r.default===!0||i!==!1)&&d}function En(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Sn(e,t){return e.index=t,e.rank=function(r){return r.props.default?0:Ve(r.props.path).map(Nn).join("")}(e),e.props}function Ve(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Nn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var jn={},ae=[],we=[],z=null,Qe={url:Ye()},Bt=bn(Qe);function Ln(){var e=wn(Bt);if(e===Qe){var t=k()[1];ue(function(){return we.push(t),function(){return we.splice(we.indexOf(t),1)}},[])}return[e,Ht]}function Ye(){var e;return""+((e=z&&z.location?z.location:z&&z.getCurrentLocation?z.getCurrentLocation():typeof location<"u"?location:jn).pathname||"")+(e.search||"")}function Ht(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(r){for(var i=ae.length;i--;)if(ae[i].canRoute(r))return!0;return!1}(e)&&function(r,i){i===void 0&&(i="push"),z&&z[i]?z[i](r):typeof history<"u"&&history[i+"State"]&&history[i+"State"](null,null,r)}(e,t?"replace":"push"),zt(e)}function zt(e){for(var t=!1,r=0;r<ae.length;r++)ae[r].routeTo(e)&&(t=!0);return t}function Dn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),r=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return Ht(t)}}function Kn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Wt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Dn(t))return Kn(e)}while(t=t.parentNode)}}var Et=!1;function Vt(e){e.history&&(z=e.history),this.state={url:e.url||Ye()}}be(Vt.prototype=new ve,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Be(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Et||(Et=!0,z||addEventListener("popstate",function(){zt(Ye())}),addEventListener("click",Wt)),ae.push(this),z&&(this.u=z.listen(function(t){var r=t.location||t;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),ae.splice(ae.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Sn).sort(En);for(var r=0;r<e.length;r++){var i=e[r],s=We(t,i.props.path,i.props);if(s)return[i,s]}},render:function(e,t){var r,i,s=e.onChange,a=t.url,d=this.c,h=this.g(Be(e.children),a);if(h&&(i=_n(h[0],be(be({url:a,matches:r=h[1]},r),{key:void 0,ref:void 0}))),a!==(d&&d.url)){be(Qe,d=this.c={url:a,previous:d&&d.url,current:i,path:i?i.props.path:null,matches:r}),d.router=this,d.active=i?[i]:[];for(var g=we.length;g--;)we[g]({});typeof s=="function"&&s(d)}return Ee(Bt.Provider,{value:d},i)}});var Fn=function(e){return Ee("a",be({onClick:Wt},e))},ye=function(e){return Ee(e.component,e)},An=["className","activeClass","activeClassName","path"];function Rn(e){var t=e.className,r=e.activeClass,i=e.activeClassName,s=e.path,a=function(b,l){if(b==null)return{};var y,f,C={},S=Object.keys(b);for(f=0;f<S.length;f++)l.indexOf(y=S[f])>=0||(C[y]=b[y]);return C}(e,An),d=Ln()[0],h=s&&d.path&&We(d.path,s,{})||We(d.url,a.href,{}),g=a.class||t||"",m=h&&(r||i)||"";return a.class=g+(g&&m&&" ")+m,Ee(Fn,a)}function qt(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qt(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function Pn(){for(var e,t,r=0,i="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qt(e))&&(i&&(i+=" "),i+=t);return i}function On({children:e}){return n("div",{class:"min-h-screen bg-gray-50",children:[n("nav",{class:"bg-white shadow-sm border-b",children:n("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n("div",{class:"flex justify-between h-16",children:[n("div",{class:"flex",children:[n("div",{class:"flex-shrink-0 flex items-center",children:n("h1",{class:"text-xl font-bold text-gray-900",children:"Viveforge"})}),n("div",{class:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[n(_e,{href:"/",children:"Dashboard"}),n(_e,{href:"/database",children:"Database"}),n(_e,{href:"/storage",children:"Storage"}),n(_e,{href:"/auth",children:"Auth"}),n(_e,{href:"/settings",children:"Settings"})]})]}),n("div",{class:"flex items-center space-x-4",children:n("a",{href:"/api/docs/swagger",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"ðŸ“š API Docs"})})]})})}),n("main",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function _e({href:e,children:t}){return n(Rn,{href:e,class:Pn("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium","hover:border-gray-300 hover:text-gray-700"),activeClassName:"border-indigo-500 text-gray-900",inactiveClassName:"border-transparent text-gray-500",children:t})}const F=window.location.origin,P={async health(){return(await fetch(`${F}/api/health`)).json()},async getItems(){const e=await fetch(`${F}/api/items`);if(!e.ok)throw new Error("Failed to fetch items");return e.json()},async createItem(e){const t=await fetch(`${F}/api/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create item");return t.json()},async updateItem(e,t){const r=await fetch(`${F}/api/items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update item");return r.json()},async deleteItem(e){const t=await fetch(`${F}/api/items/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete item");return t.json()},async getTables(){const e=await fetch(`${F}/api/tables`);if(!e.ok)throw new Error("Failed to fetch tables");return e.json()},async getTableSchema(e){const t=await fetch(`${F}/api/tables/${e}/schema`);if(!t.ok)throw new Error("Failed to fetch table schema");return t.json()},async getTableData(e,t=100,r=0){const i=await fetch(`${F}/api/tables/${e}/data?limit=${t}&offset=${r}`);if(!i.ok)throw new Error("Failed to fetch table data");return i.json()},async createTable(e,t){const r=await fetch(`${F}/api/tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,columns:t})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to create table")}return r.json()},async dropTable(e){const t=await fetch(`${F}/api/tables/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to drop table")}return t.json()},async executeSQL(e,t=[]){const r=await fetch(`${F}/api/tables/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:e,params:t})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to execute SQL")}return r.json()},async addColumn(e,t){const r=await fetch(`${F}/api/tables/${e}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to add column")}return r.json()},async renameColumn(e,t,r){const i=await fetch(`${F}/api/tables/${e}/columns/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:t,newName:r})});if(!i.ok){const s=await i.json();throw new Error(s.error||"Failed to rename column")}return i.json()},async dropColumn(e,t){const r=await fetch(`${F}/api/tables/${e}/columns/${t}`,{method:"DELETE"});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to drop column")}return r.json()},async modifyColumn(e,t,r){const i=await fetch(`${F}/api/tables/${e}/columns/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Failed to modify column")}return i.json()},async validateColumnChanges(e,t,r){const i=await fetch(`${F}/api/tables/${e}/columns/${t}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Failed to validate column changes")}return i.json()},async updateRecord(e,t,r){const i=await fetch(`${F}/api/tables/${e}/data/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Failed to update record")}return i.json()},async getSnapshots(e=20,t=0){const r=await fetch(`${F}/api/snapshots?limit=${e}&offset=${t}`);if(!r.ok)throw new Error("Failed to fetch snapshots");return r.json()},async getSnapshot(e){const t=await fetch(`${F}/api/snapshots/${e}`);if(!t.ok)throw new Error("Failed to fetch snapshot");return t.json()},async createSnapshot(e){const t=await fetch(`${F}/api/snapshots`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create snapshot")}return t.json()},async restoreSnapshot(e){const t=await fetch(`${F}/api/snapshots/${e}/restore`,{method:"POST"});if(console.log("Restore response status:",t.status,t.statusText),!t.ok){let r;try{r=await t.json(),console.error("Restore API Error Details:",r)}catch(i){throw console.error("Failed to parse error response:",i),console.error("Raw response:",await t.text()),new Error(`HTTP ${t.status}: ${t.statusText}`)}throw new Error(r.error||"Failed to restore snapshot")}return t.json()},async compareSnapshots(e,t){const r=await fetch(`${F}/api/snapshots/compare/${e}/${t}`);if(!r.ok)throw new Error("Failed to compare snapshots");return r.json()}};function Mn(){const[e,t]=k({userTables:0,systemTables:0,dbStatus:"checking..."});ue(()=>{r()},[]);const r=async()=>{try{const i=await P.health(),s=await P.getTables(),a=s.tables.filter(h=>h.type==="user").length,d=s.tables.filter(h=>h.type==="system").length;t({userTables:a,systemTables:d,dbStatus:i.database==="connected"?"connected":"disconnected"})}catch(i){console.error("Failed to load stats:",i),t(s=>({...s,dbStatus:"error"}))}};return n("div",{children:[n("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard"}),n("div",{class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[n(Oe,{title:"Database Tables",description:"User-defined tables in D1",href:"/database",stats:`${e.userTables} tables`,status:e.dbStatus}),n(Oe,{title:"System Tables",description:"Protected system tables",href:"/database",stats:`${e.systemTables} tables`}),n(Oe,{title:"Storage",description:"R2 object storage (coming soon)",href:"/storage",stats:"Not configured"})]}),n("div",{class:"mt-8",children:[n("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),n("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6",children:n("div",{class:"space-y-3",children:[n("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Create new table â†’"}),n("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Browse database â†’"}),n("a",{href:"/api/health",target:"_blank",class:"text-indigo-600 hover:text-indigo-500 block",children:"View API health â†’"})]})})})]}),n("div",{class:"mt-8",children:[n("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"API Endpoints"}),n("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6",children:n("div",{class:"space-y-2 text-sm",children:[n("div",{class:"flex justify-between",children:[n("code",{class:"text-gray-600",children:"GET /api/health"}),n("span",{class:"text-green-600",children:"Health check"})]}),n("div",{class:"flex justify-between",children:[n("code",{class:"text-gray-600",children:"GET /api/tables"}),n("span",{class:"text-green-600",children:"List tables"})]}),n("div",{class:"flex justify-between",children:[n("code",{class:"text-gray-600",children:"POST /api/tables"}),n("span",{class:"text-green-600",children:"Create table"})]}),n("div",{class:"flex justify-between",children:[n("code",{class:"text-gray-600",children:"GET /api/tables/:name/data"}),n("span",{class:"text-green-600",children:"Get table data"})]})]})})})]})]})}function Oe({title:e,description:t,href:r,stats:i,status:s}){return n("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6",children:[n("div",{class:"flex items-center justify-between",children:[n("dt",{class:"text-sm font-medium text-gray-500 truncate",children:e}),s&&n("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s==="connected"?"bg-green-100 text-green-800":s==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s})]}),n("dd",{class:"mt-1 text-3xl font-semibold text-gray-900",children:i}),n("p",{class:"mt-2 text-sm text-gray-600",children:t}),n("a",{href:r,class:"mt-3 text-indigo-600 hover:text-indigo-500 text-sm font-medium inline-block",children:"Manage â†’"})]})})}function In({onClose:e,onRestore:t}){const[r,i]=k([]),[s,a]=k(null),[d,h]=k(!0),[g,m]=k(null),[b,l]=k(!1),[y,f]=k({name:"",description:""}),[C,S]=k(null);ue(()=>{j()},[]);const j=async()=>{try{h(!0),m(null);const _=await P.getSnapshots();i(_.snapshots)}catch(_){m(_ instanceof Error?_.message:"Failed to load data")}finally{h(!1)}},v=async _=>{_.preventDefault();try{m(null),await P.createSnapshot(y),l(!1),f({name:"",description:""}),await j()}catch(U){m(U instanceof Error?U.message:"Failed to create snapshot")}},T=async()=>{if(C)try{m(null),await P.restoreSnapshot(C),S(null),t&&t(),e()}catch(_){m(_ instanceof Error?_.message:"Failed to restore"),S(null)}},q=_=>new Date(_+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}),w=_=>{const U=new Date(_+"Z"),X=new Date().getTime()-U.getTime(),W=Math.floor(X/(1e3*60*60*24)),G=Math.floor(X%(1e3*60*60*24)/(1e3*60*60));return W>0?`${W} day${W>1?"s":""} ago`:G>0?`${G} hour${G>1?"s":""} ago`:"Just now"};return n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[n("div",{class:"px-6 py-4 border-b flex items-center justify-between",children:[n("h2",{class:"text-xl font-semibold text-gray-900",children:"Schema Snapshots"}),n("button",{onClick:e,class:"text-gray-400 hover:text-gray-600",children:n("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g&&n("div",{class:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:n("div",{class:"text-sm text-red-700",children:g})}),n("div",{class:"mx-6 mt-4 bg-blue-50 border border-blue-200 rounded-md p-4",children:n("div",{class:"flex",children:[n("div",{class:"flex-shrink-0",children:n("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})})}),n("div",{class:"ml-3",children:[n("h3",{class:"text-sm font-medium text-blue-800",children:"ðŸ’¡ Cloudflareã®Time Travelæ©Ÿèƒ½ã«ã¤ã„ã¦"}),n("p",{class:"mt-1 text-sm text-blue-700",children:["Cloudflareã®ç®¡ç†ç”»é¢ã‹ã‚‰ã€D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’éŽåŽ»ã®ä»»æ„ã®æ™‚ç‚¹ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã§7æ—¥é–“ã€æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§30æ—¥é–“ï¼‰ã«å¾©å…ƒã§ãã‚‹Time Travelæ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚ è©³ã—ãã¯",n("a",{href:"https://developers.cloudflare.com/d1/reference/time-travel/",target:"_blank",rel:"noopener noreferrer",class:"font-medium underline hover:no-underline",children:"Cloudflare D1 Time Travelãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"}),"ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"]})]})]})}),n("div",{class:"flex-1 overflow-auto p-6",children:d?n("div",{class:"text-center py-8",children:n("div",{class:"text-gray-500",children:"Loading..."})}):n("div",{children:[!b&&n("div",{class:"mb-6",children:n("button",{onClick:()=>l(!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})}),"Create Snapshot"]})}),b&&n("div",{class:"mb-6 bg-gray-50 rounded-lg p-4",children:[n("h3",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Snapshot"}),n("form",{onSubmit:v,children:n("div",{class:"space-y-3",children:[n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700",children:"Name"}),n("input",{type:"text",value:y.name,onInput:_=>f({...y,name:_.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Before major refactoring"})]}),n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700",children:"Description"}),n("textarea",{value:y.description,onInput:_=>f({...y,description:_.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",rows:2,placeholder:"Optional description of current state"})]}),n("div",{class:"flex space-x-3",children:[n("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),n("button",{type:"button",onClick:()=>{l(!1),f({name:"",description:""})},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})})]}),n("div",{class:"space-y-3",children:r.length===0?n("div",{class:"text-center py-8 text-gray-500",children:"No snapshots yet. Create your first snapshot to start tracking schema changes."}):r.map(_=>n("div",{class:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${(s==null?void 0:s.id)===_.id?"border-indigo-500 bg-indigo-50":"border-gray-200"}`,onClick:()=>a(_),children:n("div",{class:"flex items-start justify-between",children:[n("div",{class:"flex-1",children:[n("div",{class:"flex items-center space-x-3",children:[n("h4",{class:"text-sm font-medium text-gray-900",children:_.name||`Snapshot v${_.version}`}),n("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_.snapshotType==="manual"?"bg-blue-100 text-blue-800":_.snapshotType==="auto"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:_.snapshotType})]}),_.description&&n("p",{class:"mt-1 text-sm text-gray-600",children:_.description}),n("div",{class:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[n("span",{children:["Version ",_.version]}),n("span",{children:q(_.createdAt)}),n("span",{children:w(_.createdAt)})]})]}),n("div",{class:"ml-4",children:n("button",{onClick:U=>{U.stopPropagation(),S(_.id)},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"})})]})},_.id))})]})}),C&&n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n("div",{class:"flex items-center mb-4",children:[n("div",{class:"flex-shrink-0",children:n("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n("div",{class:"ml-3",children:n("h3",{class:"text-lg font-medium text-gray-900",children:"Confirm Restore"})})]}),n("div",{class:"mb-6",children:[n("p",{class:"text-sm text-gray-700",children:"This will restore your database schema to the selected snapshot. All current tables and data will be replaced."}),n("p",{class:"text-sm text-red-600 mt-2 font-medium",children:"This action cannot be undone. Make sure you have a backup of your current data."})]}),n("div",{class:"flex space-x-3",children:[n("button",{onClick:T,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Restore"}),n("button",{onClick:()=>S(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})})]})})}const Un=e=>e?e.length>8?`${e.substring(0,4)}...`:e:"-",Bn=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch{try{const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.focus(),r.select();const i=document.execCommand("copy");return document.body.removeChild(r),i}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}};function Hn(){var st,at,lt,ct,dt;const[e,t]=k([]),[r,i]=k(null),[s,a]=k([]),[d,h]=k([]),[g,m]=k([]),[b,l]=k(!1),[y,f]=k(null),[C,S]=k(!1),[j,v]=k(!1),[T,q]=k({}),[w,_]=k({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),[U,ee]=k(null),[X,W]=k(null),[G,H]=k(!1),[$,te]=k({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),[Z,Se]=k(null),[E,Q]=k(null),[he,Fe]=k(null),[le,ne]=k(null),[I,me]=k(null),[A,re]=k(null),[Gt,Ae]=k({}),[V,Re]=k({}),[Jt,et]=k(!1),tt=o=>o?new Date(o+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}):"-";ue(()=>{Ne()},[]),ue(()=>{r&&(ce(),oe(),S(!1),v(!1),H(!1))},[r]),ue(()=>{const o=()=>{ee(null)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]);const Ne=async()=>{try{l(!0);const o=await P.getTables();t(o.tables),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to load tables")}finally{l(!1)}},oe=async()=>{if(r)try{const o=await P.getTableSchema(r);h(o.columns),m(o.foreignKeys||[]);const c={};o.columns.forEach(p=>{["id","created_at","updated_at"].includes(p.name)||(c[p.name]="")}),q(c)}catch(o){console.error("Failed to load table schema:",o)}},ce=async()=>{if(r)try{l(!0);const o=await P.getTableData(r);a(o.data),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to load table data")}finally{l(!1)}},Xt=async o=>{if(o.preventDefault(),!!r)try{const c=Object.fromEntries(Object.entries(T).map(([u,x])=>[u,x===""?null:x]));console.log("Sending record data:",c);const p=await fetch(`${window.location.origin}/api/tables/${r}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!p.ok){const u=await p.json();throw new Error(u.error||`HTTP ${p.status}: Failed to create record`)}await ce(),S(!1),f(null)}catch(c){if(console.error("Create record error:",c),c instanceof Error){let p=c.message;if(c.message.includes("FOREIGN KEY constraint failed"))p="Foreign key constraint failed: The referenced record does not exist";else if(c.message.includes("NOT NULL constraint failed")){const u=c.message.match(/NOT NULL constraint failed: (\w+)\.(\w+)/);u?p=`Required field "${u[2]}" cannot be empty`:p="A required field cannot be empty"}else if(c.message.includes("UNIQUE constraint failed")){const u=c.message.match(/UNIQUE constraint failed: (\w+)\.(\w+)/);u?p=`Value for "${u[2]}" must be unique`:p="This value must be unique"}f(p)}else f("Failed to create record")}},Zt=async o=>{r&&ne({title:"Delete Record",message:"Are you sure you want to delete this record? This action cannot be undone.",variant:"danger",onConfirm:async()=>{ne(null);try{await fetch(`${window.location.origin}/api/tables/${r}/data/${o}`,{method:"DELETE"}),await ce()}catch(c){f(c instanceof Error?c.message:"Failed to delete record")}}})},Qt=async o=>{o.preventDefault();try{const c=w.columns.filter(p=>p.name).map(p=>{var u,x,M;return{name:p.name,type:p.type,constraints:p.notNull?"NOT NULL":void 0,...(u=p.foreignKey)!=null&&u.enabled&&((x=p.foreignKey)!=null&&x.table)&&((M=p.foreignKey)!=null&&M.column)?{foreignKey:{table:p.foreignKey.table,column:p.foreignKey.column}}:{}}});console.log("Creating table:",w.name,"with columns:",c),await P.createTable(w.name,c),await Ne(),v(!1),_({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),f(null)}catch(c){f(c instanceof Error?c.message:"Failed to create table")}},Yt=async o=>{ne({title:"Drop Table",message:`Are you sure you want to drop the table "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{ne(null);try{await P.dropTable(o),await Ne(),r===o&&(i(null),a([]))}catch(c){f(c instanceof Error?c.message:"Failed to drop table")}}})},en=async(o,c,p)=>{if(await Bn(o)){const x=`${c}-${p}`;W(x),setTimeout(()=>W(null),2e3)}},tn=async(o,c,p,u)=>{o.metaKey||o.ctrlKey?await nn(c,u):await en(c,p,u)},nn=async(o,c)=>{const p=await rn(o,c);p&&(i(p),setTimeout(()=>{const u=document.querySelector(`[data-record-id="${o}"]`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.classList.add("bg-yellow-100"),setTimeout(()=>u.classList.remove("bg-yellow-100"),2e3))},500))},rn=async(o,c)=>{if(c.endsWith("_id")){const p=c.replace("_id","")+"s",u=e.find(x=>x.name===p);if(u)return u.name}for(const p of e)try{if((await P.getTableData(p.name,1,0)).data.some(M=>M.id===o))return p.name}catch{}return null},on=async o=>{var c,p,u;if(o.preventDefault(),!!r)try{const x={name:$.name,type:$.type,constraints:$.notNull?"NOT NULL":void 0,...(c=$.foreignKey)!=null&&c.enabled&&((p=$.foreignKey)!=null&&p.table)&&((u=$.foreignKey)!=null&&u.column)?{foreignKey:{table:$.foreignKey.table,column:$.foreignKey.column}}:{}};await P.addColumn(r,x),await oe(),te({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),f(null)}catch(x){f(x instanceof Error?x.message:"Failed to add column")}},nt=async(o,c)=>{if(!(!r||!c||o===c))try{await P.renameColumn(r,o,c),await oe(),Se(null),f(null)}catch(p){f(p instanceof Error?p.message:"Failed to rename column")}},sn=async o=>{r&&ne({title:"Drop Column",message:`Are you sure you want to drop the column "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{ne(null);try{await P.dropColumn(r,o),await oe(),f(null)}catch(c){f(c instanceof Error?c.message:"Failed to drop column")}}})},an=async(o,c)=>{if(r)try{const p=await P.validateColumnChanges(r,o,c);if(!p.valid){Fe({errors:p.errors,conflictingRows:p.conflictingRows,onConfirm:async()=>{Fe(null);try{await P.modifyColumn(r,o,c),await oe(),Q(null),f(null)}catch(u){f(u instanceof Error?u.message:"Failed to modify column")}}});return}await P.modifyColumn(r,o,c),await oe(),Q(null),f(null)}catch(p){f(p instanceof Error?p.message:"Failed to modify column")}},B=o=>g.find(c=>c.from===o)||null,rt=async(o,c)=>{if(!o.trim())return null;const p=`${c.table}-${o}`;Re(u=>({...u,[p]:{isValid:!1,isChecking:!0}}));try{const x=(await P.getTableData(c.table)).data.some(M=>M.id===o);return Re(M=>({...M,[p]:{isValid:x,isChecking:!1,displayName:x?`Valid ID in ${c.table}`:`ID not found in ${c.table}`}})),x}catch{return Re(x=>({...x,[p]:{isValid:!1,isChecking:!1,displayName:`Error checking ${c.table}`}})),!1}},ln=(o,c,p)=>{if(["id","created_at","updated_at"].includes(c))return;const u=d.find(M=>M.name===c);if(B(c)||!u){const M=s.find(K=>K.id===o);M&&re({id:o,data:{...M}})}else me({rowId:o,columnName:c,value:p})},ot=async(o,c,p)=>{if(r){me(null),a(u=>u.map(x=>x.id===o?{...x,[c]:p}:x));try{await P.updateRecord(r,o,{[c]:p}),f(null)}catch(u){f(u instanceof Error?u.message:"Failed to update record"),me({rowId:o,columnName:c,value:p}),await ce()}}},cn=()=>{me(null)},dn=async()=>{if(!(!r||!A))try{const o={...A.data};delete o.id,delete o.created_at,delete o.updated_at,await P.updateRecord(r,A.id,o),await ce(),re(null),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to update record")}},it=e.filter(o=>o.type==="user"),un=e.filter(o=>o.type==="system");return n("div",{children:[n("div",{class:"sm:flex sm:items-center",children:[n("div",{class:"sm:flex-auto",children:[n("h2",{class:"text-2xl font-bold text-gray-900",children:"Database"}),n("p",{class:"mt-2 text-sm text-gray-700",children:"Manage your D1 database tables and data"})]}),n("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex space-x-3",children:[n("button",{type:"button",onClick:()=>et(!0),class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:[n("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),n("button",{type:"button",onClick:()=>v(!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:"Create Table"})]})]}),y&&!C&&n("div",{class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:[n("div",{class:"text-sm text-red-700",children:y}),n("button",{onClick:()=>f(null),class:"mt-2 text-xs text-red-600 hover:text-red-500",children:"Dismiss"})]}),j&&n("div",{class:"mt-6 bg-white shadow rounded-lg p-6",children:[n("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Create New Table"}),n("form",{onSubmit:Qt,children:[n("div",{class:"mb-4",children:[n("label",{class:"block text-sm font-medium text-gray-700",children:"Table Name"}),n("input",{type:"text",value:w.name,onInput:o=>_({...w,name:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"my_table",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",required:!0})]}),n("div",{class:"mb-4",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),n("div",{class:"space-y-2",children:w.columns.map((o,c)=>{var p,u,x,M;return n("div",{children:[n("div",{class:"flex space-x-2",children:[n("input",{type:"text",value:o.name,onInput:K=>{const L=[...w.columns];L[c].name=K.target.value,_({...w,columns:L})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*"}),n("select",{value:o.type,onChange:K=>{const L=[...w.columns];L[c].type=K.target.value,_({...w,columns:L})},class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[n("option",{value:"TEXT",children:"TEXT"}),n("option",{value:"INTEGER",children:"INTEGER"}),n("option",{value:"REAL",children:"REAL"}),n("option",{value:"BLOB",children:"BLOB"}),n("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),n("label",{class:"flex items-center space-x-1",children:[n("input",{type:"checkbox",checked:o.notNull||!1,onChange:K=>{const L=[...w.columns];L[c].notNull=K.target.checked,_({...w,columns:L})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-xs text-gray-700",children:"NN"})]}),n("label",{class:"flex items-center space-x-1",children:[n("input",{type:"checkbox",checked:((p=o.foreignKey)==null?void 0:p.enabled)||!1,onChange:K=>{const L=[...w.columns],ie=K.target.checked;L[c].foreignKey={...L[c].foreignKey,enabled:ie,column:ie?"id":""},_({...w,columns:L})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-xs text-gray-700",children:"FK"})]}),c>0&&n("button",{type:"button",onClick:()=>{const K=w.columns.filter((L,ie)=>ie!==c);_({...w,columns:K})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),((u=o.foreignKey)==null?void 0:u.enabled)&&n("div",{class:"flex space-x-2 ml-4 mt-1",children:[n("select",{value:((x=o.foreignKey)==null?void 0:x.table)||"",onChange:K=>{const L=[...w.columns];L[c].foreignKey={...L[c].foreignKey,table:K.target.value},_({...w,columns:L})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[n("option",{value:"",children:"Select table..."}),e.map(K=>n("option",{value:K.name,children:K.name},K.name))]}),n("input",{type:"text",value:((M=o.foreignKey)==null?void 0:M.column)||"",onChange:K=>{const L=[...w.columns];L[c].foreignKey={...L[c].foreignKey,column:K.target.value},_({...w,columns:L})},placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]},c)})}),n("button",{type:"button",onClick:()=>_({...w,columns:[...w.columns,{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500",children:"Add Column"}),n("p",{class:"mt-2 text-xs text-gray-500",children:"Note: id, created_at, and updated_at columns will be added automatically"})]}),n("div",{class:"flex space-x-3",children:[n("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),n("button",{type:"button",onClick:()=>{v(!1),f(null)},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),n("div",{class:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[n("div",{class:"lg:col-span-1",children:n("div",{class:"bg-white shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6",children:[n("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Tables"}),b&&!r?n("div",{class:"text-sm text-gray-500",children:"Loading..."}):n("div",{class:"space-y-4",children:[n("div",{children:[n("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"User Tables"}),n("div",{class:"space-y-1",children:[it.map(o=>n("div",{class:`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,children:[n("div",{class:"flex-1 cursor-pointer",onClick:()=>i(o.name),children:[n("div",{class:"text-sm font-medium text-gray-900",children:o.name}),n("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),o.type==="user"&&n("div",{class:"relative",children:[n("button",{onClick:c=>{c.stopPropagation(),ee(U===o.name?null:o.name)},class:"p-1 text-gray-400 hover:text-gray-600 rounded",children:n("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),U===o.name&&n("div",{class:"absolute right-0 mt-1 w-24 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:n("button",{onClick:c=>{c.stopPropagation(),Yt(o.name),ee(null)},class:"w-full px-3 py-2 text-xs text-left text-red-600 hover:bg-red-50",children:"Drop Table"})})]})]},o.name)),it.length===0&&n("p",{class:"text-sm text-gray-500",children:"No user tables yet"})]})]}),n("div",{children:[n("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"System Tables"}),n("div",{class:"space-y-1",children:un.map(o=>n("div",{class:`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,onClick:()=>i(o.name),children:[n("div",{children:[n("div",{class:"text-sm font-medium text-gray-900",children:o.name}),n("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),n("span",{class:"text-xs text-gray-400",children:"Protected"})]},o.name))})]})]})]})})}),n("div",{class:"lg:col-span-2",children:r?n("div",{class:"bg-white shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6",children:[n("div",{class:"flex items-center justify-between mb-4",children:[n("h3",{class:"text-lg font-medium text-gray-900",children:r}),((st=e.find(o=>o.name===r))==null?void 0:st.type)==="user"&&n("div",{class:"flex space-x-2",children:[n("button",{type:"button",onClick:()=>H(!G),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Schema"}),n("button",{type:"button",onClick:()=>{const o={};d.forEach(c=>{["id","created_at","updated_at"].includes(c.name)||(o[c.name]="")}),q(o),f(null),S(!0)},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Record"})]})]}),G&&n("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[n("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Table Schema"}),n("div",{class:"mb-4",children:[n("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Columns"}),n("div",{class:"space-y-2",children:d.map(o=>n("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(Z==null?void 0:Z.oldName)===o.name?n("input",{type:"text",value:Z.newName,onInput:c=>Se({...Z,newName:c.target.value}),onKeyDown:c=>{c.key==="Enter"&&nt(Z.oldName,Z.newName),c.key==="Escape"&&Se(null)},onBlur:()=>nt(Z.oldName,Z.newName),class:"flex-1 text-sm border-gray-300 rounded px-2 py-1",autoFocus:!0}):n("div",{class:"flex-1",children:[n("span",{class:"text-sm font-medium text-gray-900",children:o.name}),n("span",{class:"ml-2 text-xs text-gray-500",children:o.type}),o.notnull?n("span",{class:"ml-1 text-xs text-red-500",children:"NOT NULL"}):null,o.pk?n("span",{class:"ml-1 text-xs text-blue-500",children:"PRIMARY KEY"}):null,B(o.name)&&n("span",{class:"ml-1 text-xs text-green-600",children:["FK â†’ ",B(o.name).table,".",B(o.name).to]})]}),!["id","created_at","updated_at"].includes(o.name)&&n("div",{class:"flex space-x-2",children:[n("button",{onClick:()=>Se({oldName:o.name,newName:o.name}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Rename"}),n("button",{onClick:()=>{const c=B(o.name);Q({name:o.name,type:o.type,notNull:o.notnull===1,foreignKey:{enabled:!!c,table:(c==null?void 0:c.table)||"",column:(c==null?void 0:c.to)||""}})},class:"text-xs text-blue-600 hover:text-blue-500",children:"Modify"}),n("button",{onClick:()=>sn(o.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]})]},o.name))})]}),n("div",{class:"border-t pt-4",children:[n("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Add Column"}),n("form",{onSubmit:on,children:[n("div",{class:"flex space-x-2",children:[n("input",{type:"text",value:$.name,onInput:o=>te({...$,name:o.target.value}),placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0}),n("select",{value:$.type,onChange:o=>te({...$,type:o.target.value}),class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[n("option",{value:"TEXT",children:"TEXT"}),n("option",{value:"INTEGER",children:"INTEGER"}),n("option",{value:"REAL",children:"REAL"}),n("option",{value:"BLOB",children:"BLOB"}),n("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),n("label",{class:"flex items-center space-x-1",children:[n("input",{type:"checkbox",checked:$.notNull,onChange:o=>te({...$,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-xs text-gray-700",children:"NN"})]}),n("label",{class:"flex items-center space-x-1",children:[n("input",{type:"checkbox",checked:(at=$.foreignKey)==null?void 0:at.enabled,onChange:o=>te({...$,foreignKey:{...$.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-xs text-gray-700",children:"FK"})]}),n("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add"})]}),((lt=$.foreignKey)==null?void 0:lt.enabled)&&n("div",{class:"flex space-x-2 mt-2",children:[n("select",{value:((ct=$.foreignKey)==null?void 0:ct.table)||"",onChange:o=>te({...$,foreignKey:{...$.foreignKey,table:o.target.value}}),class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[n("option",{value:"",children:"Select table..."}),e.map(o=>n("option",{value:o.name,children:o.name},o.name))]}),n("input",{type:"text",value:((dt=$.foreignKey)==null?void 0:dt.column)||"",onChange:o=>te({...$,foreignKey:{...$.foreignKey,column:o.target.value}}),placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]})]}),E&&n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n("h4",{class:"text-lg font-medium text-gray-900 mb-4",children:["Modify Column: ",E.name]}),n("div",{class:"space-y-4",children:[n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700",children:"Type"}),n("select",{value:E.type,onChange:o=>Q({...E,type:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[n("option",{value:"TEXT",children:"TEXT"}),n("option",{value:"INTEGER",children:"INTEGER"}),n("option",{value:"REAL",children:"REAL"}),n("option",{value:"BLOB",children:"BLOB"}),n("option",{value:"BOOLEAN",children:"BOOLEAN"})]})]}),n("div",{children:n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",checked:E.notNull,onChange:o=>Q({...E,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-sm text-gray-700",children:"NOT NULL"})]})}),n("div",{children:n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",checked:E.foreignKey.enabled,onChange:o=>Q({...E,foreignKey:{...E.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),n("span",{class:"text-sm text-gray-700",children:"Foreign Key"})]})}),E.foreignKey.enabled&&n("div",{class:"space-y-2",children:[n("select",{value:E.foreignKey.table,onChange:o=>Q({...E,foreignKey:{...E.foreignKey,table:o.target.value}}),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[n("option",{value:"",children:"Select table..."}),e.map(o=>n("option",{value:o.name,children:o.name},o.name))]}),n("input",{type:"text",value:E.foreignKey.column,onChange:o=>Q({...E,foreignKey:{...E.foreignKey,column:o.target.value}}),placeholder:"id",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),n("div",{class:"mt-6 flex space-x-3",children:[n("button",{onClick:()=>{var p,u;const o={};E.type!==((p=d.find(x=>x.name===E.name))==null?void 0:p.type)&&(o.type=E.type);const c=((u=d.find(x=>x.name===E.name))==null?void 0:u.notnull)===1;E.notNull!==c&&(o.notNull=E.notNull),E.foreignKey.enabled&&E.foreignKey.table&&E.foreignKey.column?o.foreignKey={table:E.foreignKey.table,column:E.foreignKey.column}:E.foreignKey.enabled||(o.foreignKey=null),an(E.name,o)},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Apply Changes"}),n("button",{onClick:()=>Q(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),he&&n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[n("div",{class:"flex items-center mb-4",children:[n("div",{class:"flex-shrink-0",children:n("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n("div",{class:"ml-3",children:n("h3",{class:"text-lg font-medium text-gray-900",children:"Validation Warning"})})]}),n("div",{class:"mb-4",children:[n("p",{class:"text-sm text-gray-700 mb-3",children:"The following issues were found with your changes:"}),n("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:[n("ul",{class:"list-disc list-inside space-y-1",children:he.errors.map((o,c)=>n("li",{class:"text-sm text-yellow-800",children:o},c))}),he.conflictingRows>0&&n("p",{class:"text-sm text-yellow-800 mt-2 font-medium",children:[he.conflictingRows," rows will be affected."]})]}),n("p",{class:"text-sm text-gray-600 mt-3",children:"Proceeding may result in data loss or corruption. Are you sure you want to continue?"})]}),n("div",{class:"flex space-x-3",children:[n("button",{onClick:he.onConfirm,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Proceed Anyway"}),n("button",{onClick:()=>Fe(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),le&&n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n("div",{class:"flex items-center mb-4",children:[n("div",{class:"flex-shrink-0",children:le.variant==="danger"?n("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):n("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n("div",{class:"ml-3",children:n("h3",{class:"text-lg font-medium text-gray-900",children:le.title})})]}),n("div",{class:"mb-6",children:n("p",{class:"text-sm text-gray-700",children:le.message})}),n("div",{class:"flex space-x-3",children:[n("button",{onClick:le.onConfirm,class:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${le.variant==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}`,children:"Confirm"}),n("button",{onClick:()=>ne(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),A&&n("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n("div",{class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[n("div",{class:"flex items-center justify-between mb-4",children:[n("h3",{class:"text-lg font-medium text-gray-900",children:"Edit Record"}),n("button",{onClick:()=>re(null),class:"text-gray-400 hover:text-gray-600",children:n("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n("div",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:d.map(o=>{if(["id","created_at","updated_at"].includes(o.name))return n("div",{class:"sm:col-span-2",children:[n("label",{class:"block text-sm font-medium text-gray-500",children:[o.name," (read-only)"]}),n("div",{class:"mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-500",children:o.name.includes("_at")&&A.data[o.name]?tt(A.data[o.name]):A.data[o.name]||"-"})]},o.name);const c=B(o.name);return n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700",children:[o.name,o.notnull?n("span",{class:"text-red-500 ml-1",children:"*"}):null,c&&n("span",{class:"text-green-600 ml-1 text-xs",children:["FK â†’ ",c.table,".",c.to]})]}),c?n("div",{class:"relative",children:[n("input",{type:"text",value:A.data[o.name]||"",onInput:p=>{const u=p.target.value;re({...A,data:{...A.data,[o.name]:u}}),u.trim()&&rt(u,c)},class:`mt-1 block w-full border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${A.data[o.name]&&V[`${c.table}-${A.data[o.name]}`]?V[`${c.table}-${A.data[o.name]}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:`Enter ${c.table} ID`,required:o.notnull===1}),A.data[o.name]&&V[`${c.table}-${A.data[o.name]}`]&&n("div",{class:`absolute left-0 top-full mt-1 text-xs px-2 py-1 rounded ${V[`${c.table}-${A.data[o.name]}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:V[`${c.table}-${A.data[o.name]}`].isChecking?"Checking...":V[`${c.table}-${A.data[o.name]}`].displayName})]}):n("input",{type:o.type==="INTEGER"||o.type==="REAL"?"number":"text",value:A.data[o.name]||"",onInput:p=>re({...A,data:{...A.data,[o.name]:p.target.value}}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:o.notnull===1})]},o.name)})}),n("div",{class:"mt-6 flex space-x-3",children:[n("button",{onClick:dn,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"}),n("button",{onClick:()=>re(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),C&&n("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[n("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Record"}),n("form",{onSubmit:Xt,children:[n("div",{class:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Object.entries(T).map(([o,c])=>n("div",{children:[n("label",{class:"block text-xs font-medium text-gray-700",children:o}),n("input",{type:"text",value:c,onInput:p=>q({...T,[o]:p.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]},o))}),y&&C&&n("div",{class:"mt-3 bg-red-50 border border-red-200 rounded-md p-3",children:n("div",{class:"flex",children:[n("div",{class:"flex-shrink-0",children:n("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})})}),n("div",{class:"ml-3",children:n("p",{class:"text-sm text-red-700",children:y})})]})}),n("div",{class:"mt-3 flex space-x-2",children:[n("button",{type:"submit",class:"inline-flex justify-center py-1.5 px-3 border border-transparent shadow-sm text-xs font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),n("button",{type:"button",onClick:()=>{S(!1),f(null)},class:"inline-flex justify-center py-1.5 px-3 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),b?n("div",{class:"text-center py-4 text-sm text-gray-500",children:"Loading data..."}):s.length===0?n("div",{class:"text-center py-8",children:n("p",{class:"text-sm text-gray-500",children:"No data in this table"})}):n("div",{class:"overflow-x-auto",children:n("table",{class:"min-w-full divide-y divide-gray-200",children:[n("thead",{class:"bg-gray-50",children:n("tr",{children:[d.map(o=>n("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.name},o.name)),n("th",{class:"px-3 py-2"})]})}),n("tbody",{class:"bg-white divide-y divide-gray-200",children:s.map((o,c)=>{var p;return n("tr",{"data-record-id":o.id,children:[d.map(u=>{var x,M,K,L,ie,ut,ft,ht;return n("td",{class:`px-3 py-2 whitespace-nowrap text-sm text-gray-900 select-text ${!["id","created_at","updated_at"].includes(u.name)&&((x=e.find(R=>R.name===r))==null?void 0:x.type)==="user"?"cursor-pointer hover:bg-gray-50":""}`,onClick:R=>{var mt;const Y=`${o.id}-${u.name}`;if(["id","created_at","updated_at"].includes(u.name)||((mt=e.find(ge=>ge.name===r))==null?void 0:mt.type)!=="user")return;const pe=Gt[Y];if(pe)clearTimeout(pe.timeout),Ae(ge=>{const de={...ge};return delete de[Y],de}),R.preventDefault(),R.stopPropagation(),ln(o.id,u.name,o[u.name]);else{const ge=setTimeout(()=>{Ae(de=>{const pt={...de};return delete pt[Y],pt})},400);Ae(de=>({...de,[Y]:{count:1,timeout:ge}}))}},title:!["id","created_at","updated_at"].includes(u.name)&&((M=e.find(R=>R.name===r))==null?void 0:M.type)==="user"?"Double-click to edit":"",children:(I==null?void 0:I.rowId)===o.id&&(I==null?void 0:I.columnName)===u.name?n("div",{class:"relative",children:[n("input",{type:u.type==="INTEGER"||u.type==="REAL"?"number":"text",value:I.value||"",onInput:R=>{const Y=R.target.value;me({...I,value:Y});const pe=B(u.name);pe&&Y.trim()&&rt(Y,pe)},onKeyDown:R=>{R.key==="Enter"&&ot(o.id,u.name,I.value),R.key==="Escape"&&cn()},onBlur:()=>ot(o.id,u.name,I.value),class:`w-full px-2 py-1 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${B(u.name)&&I.value&&V[`${(K=B(u.name))==null?void 0:K.table}-${I.value}`]?V[`${(L=B(u.name))==null?void 0:L.table}-${I.value}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-indigo-300"}`,autoFocus:!0,ref:R=>{R&&(R.focus(),R.select())}}),B(u.name)&&I.value&&V[`${(ie=B(u.name))==null?void 0:ie.table}-${I.value}`]&&n("div",{class:`absolute left-0 -bottom-6 text-xs px-2 py-1 rounded ${V[`${(ut=B(u.name))==null?void 0:ut.table}-${I.value}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:V[`${(ft=B(u.name))==null?void 0:ft.table}-${I.value}`].isChecking?"Checking...":V[`${(ht=B(u.name))==null?void 0:ht.table}-${I.value}`].displayName})]}):u.name.includes("_at")&&o[u.name]?tt(o[u.name]):(u.name==="id"||u.name.endsWith("_id"))&&o[u.name]&&o[u.name].length>8?n("button",{onClick:R=>{R.stopPropagation(),tn(R,o[u.name],c,u.name)},onDoubleClick:R=>{R.preventDefault(),R.stopPropagation()},class:"text-blue-600 hover:text-blue-800 cursor-pointer underline decoration-dotted relative",title:"Click to copy â€¢ Cmd+Click to jump to record",children:[Un(o[u.name]),X===`${c}-${u.name}`&&n("span",{class:"absolute -top-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Copied!"})]}):o[u.name]||"-"},u.name)}),n("td",{class:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium",children:((p=e.find(u=>u.name===r))==null?void 0:p.type)==="user"&&n("div",{class:"flex space-x-2",children:[n("button",{onClick:()=>{const u=s.find(x=>x.id===o.id);u&&re({id:o.id,data:{...u}})},class:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),n("button",{onClick:()=>Zt(o.id),class:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},o.id||c)})})]})})]})}):n("div",{class:"bg-white shadow rounded-lg",children:n("div",{class:"px-4 py-5 sm:p-6 text-center",children:[n("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n("h3",{class:"mt-2 text-sm font-medium text-gray-900",children:"No table selected"}),n("p",{class:"mt-1 text-sm text-gray-500",children:"Select a table from the list to view its data"})]})})})]}),Jt&&n(In,{onClose:()=>et(!1),onRestore:()=>{Ne(),r&&(ce(),oe())}})]})}function zn(){return n("div",{children:[n("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Storage"}),n("p",{class:"text-gray-600",children:"R2 storage management coming soon..."})]})}function Wn(){return n("div",{children:[n("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Authentication"}),n("p",{class:"text-gray-600",children:"OAuth provider configuration coming soon..."})]})}function Vn(){return n("div",{children:[n("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),n("p",{class:"text-gray-600",children:"Project settings coming soon..."})]})}function qn(){return n(On,{children:n(Vt,{children:[n(ye,{path:"/",component:Mn}),n(ye,{path:"/database",component:Hn}),n(ye,{path:"/storage",component:zn}),n(ye,{path:"/auth",component:Wn}),n(ye,{path:"/settings",component:Vn})]})})}yn(n(qn,{}),document.getElementById("app"));
//# sourceMappingURL=index-BhJD2lk6.js.map
