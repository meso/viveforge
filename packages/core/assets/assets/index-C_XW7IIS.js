(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ee,j,Lt,le,_t,Ft,Kt,At,Ze,He,We,Rt,$e={},Ot=[],bn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Se=Array.isArray;function te(e,n){for(var r in n)e[r]=n[r];return e}function Qe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function je(e,n,r){var s,i,a,d={};for(a in n)a=="key"?s=n[a]:a=="ref"?i=n[a]:d[a]=n[a];if(arguments.length>2&&(d.children=arguments.length>3?Ee.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)d[a]===void 0&&(d[a]=e.defaultProps[a]);return ke(e,d,s,i,null)}function ke(e,n,r,s,i){var a={type:e,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Lt,__i:-1,__u:0};return i==null&&j.vnode!=null&&j.vnode(a),a}function Ae(e){return e.children}function Ce(e,n){this.props=e,this.context=n}function ge(e,n){if(n==null)return e.__?ge(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?ge(e):null}function Pt(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Pt(e)}}function Ve(e){(!e.__d&&(e.__d=!0)&&le.push(e)&&!Fe.__r++||_t!=j.debounceRendering)&&((_t=j.debounceRendering)||Ft)(Fe)}function Fe(){for(var e,n,r,s,i,a,d,f=1;le.length;)le.length>f&&le.sort(Kt),e=le.shift(),f=le.length,e.__d&&(r=void 0,i=(s=(n=e).__v).__e,a=[],d=[],n.__P&&((r=te({},s)).__v=s.__v+1,j.vnode&&j.vnode(r),Ye(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,a,i??ge(s),!!(32&s.__u),d),r.__v=s.__v,r.__.__k[r.__i]=r,Bt(a,r,d),r.__e!=i&&Pt(r)));Fe.__r=0}function Mt(e,n,r,s,i,a,d,f,y,m,_){var l,b,h,T,E,S,w=s&&s.__k||Ot,C=n.length;for(y=_n(r,n,w,y,C),l=0;l<C;l++)(h=r.__k[l])!=null&&(b=h.__i==-1?$e:w[h.__i]||$e,h.__i=l,S=Ye(e,h,b,i,a,d,f,y,m,_),T=h.__e,h.ref&&b.ref!=h.ref&&(b.ref&&et(b.ref,null,h),_.push(h.ref,h.__c||T,h)),E==null&&T!=null&&(E=T),4&h.__u||b.__k===h.__k?y=It(h,y,e):typeof h.type=="function"&&S!==void 0?y=S:T&&(y=T.nextSibling),h.__u&=-7);return r.__e=E,y}function _n(e,n,r,s,i){var a,d,f,y,m,_=r.length,l=_,b=0;for(e.__k=new Array(i),a=0;a<i;a++)(d=n[a])!=null&&typeof d!="boolean"&&typeof d!="function"?(y=a+b,(d=e.__k[a]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?ke(null,d,null,null,null):Se(d)?ke(Ae,{children:d},null,null,null):d.constructor==null&&d.__b>0?ke(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=e,d.__b=e.__b+1,f=null,(m=d.__i=xn(d,r,y,l))!=-1&&(l--,(f=r[m])&&(f.__u|=2)),f==null||f.__v==null?(m==-1&&(i>_?b--:i<_&&b++),typeof d.type!="function"&&(d.__u|=4)):m!=y&&(m==y-1?b--:m==y+1?b++:(m>y?b--:b++,d.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<_;a++)(f=r[a])!=null&&!(2&f.__u)&&(f.__e==s&&(s=ge(f)),zt(f,f));return s}function It(e,n,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,n=It(s[i],n,r));return n}e.__e!=n&&(n&&e.type&&!r.contains(n)&&(n=ge(e)),r.insertBefore(e.__e,n||null),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function qe(e,n){return n=n||[],e==null||typeof e=="boolean"||(Se(e)?e.some(function(r){qe(r,n)}):n.push(e)),n}function xn(e,n,r,s){var i,a,d=e.key,f=e.type,y=n[r];if(y===null&&e.key==null||y&&d==y.key&&f==y.type&&!(2&y.__u))return r;if(s>(y!=null&&!(2&y.__u)?1:0))for(i=r-1,a=r+1;i>=0||a<n.length;){if(i>=0){if((y=n[i])&&!(2&y.__u)&&d==y.key&&f==y.type)return i;i--}if(a<n.length){if((y=n[a])&&!(2&y.__u)&&d==y.key&&f==y.type)return a;a++}}return-1}function xt(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||bn.test(n)?r:r+"px"}function De(e,n,r,s,i){var a,d;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(n in s)r&&n in r||xt(e.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||xt(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(At,"$1")),d=n.toLowerCase(),n=d in e||n=="onFocusOut"||n=="onFocusIn"?d.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?s?r.u=s.u:(r.u=Ze,e.addEventListener(n,a?We:He,a)):e.removeEventListener(n,a?We:He,a);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function vt(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=Ze++;else if(n.t<r.u)return;return r(j.event?j.event(n):n)}}}function Ye(e,n,r,s,i,a,d,f,y,m){var _,l,b,h,T,E,S,w,C,W,k,I,U,ne,V,J,Y,z=n.type;if(n.constructor!=null)return null;128&r.__u&&(y=!!(32&r.__u),a=[f=n.__e=r.__e]),(_=j.__b)&&_(n);e:if(typeof z=="function")try{if(w=n.props,C="prototype"in z&&z.prototype.render,W=(_=z.contextType)&&s[_.__c],k=_?W?W.props.value:_.__:s,r.__c?S=(l=n.__c=r.__c).__=l.__E:(C?n.__c=l=new z(w,k):(n.__c=l=new Ce(w,k),l.constructor=z,l.render=wn),W&&W.sub(l),l.props=w,l.state||(l.state={}),l.context=k,l.__n=s,b=l.__d=!0,l.__h=[],l._sb=[]),C&&l.__s==null&&(l.__s=l.state),C&&z.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=te({},l.__s)),te(l.__s,z.getDerivedStateFromProps(w,l.__s))),h=l.props,T=l.state,l.__v=n,b)C&&z.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),C&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(C&&z.getDerivedStateFromProps==null&&w!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(w,k),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(w,l.__s,k)===!1||n.__v==r.__v){for(n.__v!=r.__v&&(l.props=w,l.state=l.__s,l.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function($){$&&($.__=n)}),I=0;I<l._sb.length;I++)l.__h.push(l._sb[I]);l._sb=[],l.__h.length&&d.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(w,l.__s,k),C&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,T,E)})}if(l.context=k,l.props=w,l.__P=e,l.__e=!1,U=j.__r,ne=0,C){for(l.state=l.__s,l.__d=!1,U&&U(n),_=l.render(l.props,l.state,l.context),V=0;V<l._sb.length;V++)l.__h.push(l._sb[V]);l._sb=[]}else do l.__d=!1,U&&U(n),_=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++ne<25);l.state=l.__s,l.getChildContext!=null&&(s=te(te({},s),l.getChildContext())),C&&!b&&l.getSnapshotBeforeUpdate!=null&&(E=l.getSnapshotBeforeUpdate(h,T)),J=_,_!=null&&_.type===Ae&&_.key==null&&(J=Ut(_.props.children)),f=Mt(e,Se(J)?J:[J],n,r,s,i,a,d,f,y,m),l.base=n.__e,n.__u&=-161,l.__h.length&&d.push(l),S&&(l.__E=l.__=null)}catch($){if(n.__v=null,y||a!=null)if($.then){for(n.__u|=y?160:128;f&&f.nodeType==8&&f.nextSibling;)f=f.nextSibling;a[a.indexOf(f)]=null,n.__e=f}else for(Y=a.length;Y--;)Qe(a[Y]);else n.__e=r.__e,n.__k=r.__k;j.__e($,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):f=n.__e=vn(r.__e,n,r,s,i,a,d,y,m);return(_=j.diffed)&&_(n),128&n.__u?void 0:f}function Bt(e,n,r){for(var s=0;s<r.length;s++)et(r[s],r[++s],r[++s]);j.__c&&j.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){j.__e(a,i.__v)}})}function Ut(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Se(e)?e.map(Ut):te({},e)}function vn(e,n,r,s,i,a,d,f,y){var m,_,l,b,h,T,E,S=r.props,w=n.props,C=n.type;if(C=="svg"?i="http://www.w3.org/2000/svg":C=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(m=0;m<a.length;m++)if((h=a[m])&&"setAttribute"in h==!!C&&(C?h.localName==C:h.nodeType==3)){e=h,a[m]=null;break}}if(e==null){if(C==null)return document.createTextNode(w);e=document.createElementNS(i,C,w.is&&w),f&&(j.__m&&j.__m(n,a),f=!1),a=null}if(C==null)S===w||f&&e.data==w||(e.data=w);else{if(a=a&&Ee.call(e.childNodes),S=r.props||$e,!f&&a!=null)for(S={},m=0;m<e.attributes.length;m++)S[(h=e.attributes[m]).name]=h.value;for(m in S)if(h=S[m],m!="children"){if(m=="dangerouslySetInnerHTML")l=h;else if(!(m in w)){if(m=="value"&&"defaultValue"in w||m=="checked"&&"defaultChecked"in w)continue;De(e,m,null,h,i)}}for(m in w)h=w[m],m=="children"?b=h:m=="dangerouslySetInnerHTML"?_=h:m=="value"?T=h:m=="checked"?E=h:f&&typeof h!="function"||S[m]===h||De(e,m,h,S[m],i);if(_)f||l&&(_.__html==l.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),n.__k=[];else if(l&&(e.innerHTML=""),Mt(n.type=="template"?e.content:e,Se(b)?b:[b],n,r,s,C=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,d,a?a[0]:r.__k&&ge(r,0),f,y),a!=null)for(m=a.length;m--;)Qe(a[m]);f||(m="value",C=="progress"&&T==null?e.removeAttribute("value"):T!=null&&(T!==e[m]||C=="progress"&&!T||C=="option"&&T!=S[m])&&De(e,m,T,S[m],i),m="checked",E!=null&&E!=e[m]&&De(e,m,E,S[m],i))}return e}function et(e,n,r){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&n==null||(e.__u=e(n))}else e.current=n}catch(i){j.__e(i,r)}}function zt(e,n,r){var s,i;if(j.unmount&&j.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||et(s,null,n)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){j.__e(a,n)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&zt(s[i],n,r||typeof e.type!="function");r||Qe(e.__e),e.__c=e.__=e.__e=void 0}function wn(e,n,r){return this.constructor(e,r)}function kn(e,n,r){var s,i,a,d;n==document&&(n=document.documentElement),j.__&&j.__(e,n),i=(s=!1)?null:n.__k,a=[],d=[],Ye(n,e=n.__k=je(Ae,null,[e]),i||$e,$e,n.namespaceURI,i?null:n.firstChild?Ee.call(n.childNodes):null,a,i?i.__e:n.firstChild,s,d),Bt(a,e,d)}function Cn(e,n,r){var s,i,a,d,f=te({},e.props);for(a in e.type&&e.type.defaultProps&&(d=e.type.defaultProps),n)a=="key"?s=n[a]:a=="ref"?i=n[a]:f[a]=n[a]===void 0&&d!=null?d[a]:n[a];return arguments.length>2&&(f.children=arguments.length>3?Ee.call(arguments,2):r),ke(e.type,f,s||e.key,i||e.ref,null)}function Tn(e){function n(r){var s,i;return this.getChildContext||(s=new Set,(i={})[n.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&s.forEach(function(d){d.__e=!0,Ve(d)})},this.sub=function(a){s.add(a);var d=a.componentWillUnmount;a.componentWillUnmount=function(){s&&s.delete(a),d&&d.call(a)}}),r.children}return n.__c="__cC"+Rt++,n.__=e,n.Provider=n.__l=(n.Consumer=function(r,s){return r.children(s)}).contextType=n,n}Ee=Ot.slice,j={__e:function(e,n,r,s){for(var i,a,d;n=n.__;)if((i=n.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),d=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),d=i.__d),d)return i.__E=i}catch(f){e=f}throw e}},Lt=0,Ce.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=te({},this.state),typeof e=="function"&&(e=e(te({},r),this.props)),e&&te(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Ve(this))},Ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ve(this))},Ce.prototype.render=Ae,le=[],Ft=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Kt=function(e,n){return e.__v.__b-n.__v.__b},Fe.__r=0,At=/(PointerCapture)$|Capture$/i,Ze=0,He=vt(!1),We=vt(!0),Rt=0;var $n=0;function t(e,n,r,s,i,a){n||(n={});var d,f,y=n;if("ref"in y)for(f in y={},n)f=="ref"?d=n[f]:y[f]=n[f];var m={type:e,props:y,key:r,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$n,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(d=e.defaultProps))for(f in d)y[f]===void 0&&(y[f]=d[f]);return j.vnode&&j.vnode(m),m}var pe,K,Ie,wt,Ke=0,Ht=[],P=j,kt=P.__b,Ct=P.__r,Tt=P.diffed,$t=P.__c,Et=P.unmount,St=P.__;function Re(e,n){P.__h&&P.__h(K,e,Ke||n),Ke=0;var r=K.__H||(K.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function v(e){return Ke=1,En(Vt,e)}function En(e,n,r){var s=Re(pe++,2);if(s.t=e,!s.__c&&(s.__=[Vt(void 0,n),function(f){var y=s.__N?s.__N[0]:s.__[0],m=s.t(y,f);y!==m&&(s.__N=[m,s.__[1]],s.__c.setState({}))}],s.__c=K,!K.__f)){var i=function(f,y,m){if(!s.__c.__H)return!0;var _=s.__c.__H.__.filter(function(b){return!!b.__c});if(_.every(function(b){return!b.__N}))return!a||a.call(this,f,y,m);var l=s.__c.props!==f;return _.forEach(function(b){if(b.__N){var h=b.__[0];b.__=b.__N,b.__N=void 0,h!==b.__[0]&&(l=!0)}}),a&&a.call(this,f,y,m)||l};K.__f=!0;var a=K.shouldComponentUpdate,d=K.componentWillUpdate;K.componentWillUpdate=function(f,y,m){if(this.__e){var _=a;a=void 0,i(f,y,m),a=_}d&&d.call(this,f,y,m)},K.shouldComponentUpdate=i}return s.__N||s.__}function ce(e,n){var r=Re(pe++,3);!P.__s&&Wt(r.__H,n)&&(r.__=e,r.u=n,K.__H.__h.push(r))}function jt(e){return Ke=5,Sn(function(){return{current:e}},[])}function Sn(e,n){var r=Re(pe++,7);return Wt(r.__H,n)&&(r.__=e(),r.__H=n,r.__h=e),r.__}function jn(e){var n=K.context[e.__c],r=Re(pe++,9);return r.c=e,n?(r.__==null&&(r.__=!0,n.sub(K)),n.props.value):e.__}function Nn(){for(var e;e=Ht.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Le),e.__H.__h.forEach(Ge),e.__H.__h=[]}catch(n){e.__H.__h=[],P.__e(n,e.__v)}}P.__b=function(e){K=null,kt&&kt(e)},P.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),St&&St(e,n)},P.__r=function(e){Ct&&Ct(e),pe=0;var n=(K=e.__c).__H;n&&(Ie===K?(n.__h=[],K.__h=[],n.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.forEach(Le),n.__h.forEach(Ge),n.__h=[],pe=0)),Ie=K},P.diffed=function(e){Tt&&Tt(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(Ht.push(n)!==1&&wt===P.requestAnimationFrame||((wt=P.requestAnimationFrame)||Dn)(Nn)),n.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Ie=K=null},P.__c=function(e,n){n.some(function(r){try{r.__h.forEach(Le),r.__h=r.__h.filter(function(s){return!s.__||Ge(s)})}catch(s){n.some(function(i){i.__h&&(i.__h=[])}),n=[],P.__e(s,r.__v)}}),$t&&$t(e,n)},P.unmount=function(e){Et&&Et(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{Le(s)}catch(i){n=i}}),r.__H=void 0,n&&P.__e(n,r.__v))};var Nt=typeof requestAnimationFrame=="function";function Dn(e){var n,r=function(){clearTimeout(s),Nt&&cancelAnimationFrame(n),setTimeout(e)},s=setTimeout(r,35);Nt&&(n=requestAnimationFrame(r))}function Le(e){var n=K,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),K=n}function Ge(e){var n=K;e.__c=e.__(),K=n}function Wt(e,n){return!e||e.length!==n.length||n.some(function(r,s){return r!==e[s]})}function Vt(e,n){return typeof n=="function"?n(e):n}var Ln={};function we(e,n){for(var r in n)e[r]=n[r];return e}function Je(e,n,r){var s,i=/(?:\?([^#]*))?(#.*)?$/,a=e.match(i),d={};if(a&&a[1])for(var f=a[1].split("&"),y=0;y<f.length;y++){var m=f[y].split("=");d[decodeURIComponent(m[0])]=decodeURIComponent(m.slice(1).join("="))}e=Xe(e.replace(i,"")),n=Xe(n||"");for(var _=Math.max(e.length,n.length),l=0;l<_;l++)if(n[l]&&n[l].charAt(0)===":"){var b=n[l].replace(/(^:|[+*?]+$)/g,""),h=(n[l].match(/[+*?]+$/)||Ln)[0]||"",T=~h.indexOf("+"),E=~h.indexOf("*"),S=e[l]||"";if(!S&&!E&&(h.indexOf("?")<0||T)){s=!1;break}if(d[b]=decodeURIComponent(S),T||E){d[b]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(n[l]!==e[l]){s=!1;break}return(r.default===!0||s!==!1)&&d}function Fn(e,n){return e.rank<n.rank?1:e.rank>n.rank?-1:e.index-n.index}function Kn(e,n){return e.index=n,e.rank=function(r){return r.props.default?0:Xe(r.props.path).map(An).join("")}(e),e.props}function Xe(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function An(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Rn={},de=[],Te=[],q=null,tt={url:nt()},qt=Tn(tt);function On(){var e=jn(qt);if(e===tt){var n=v()[1];ce(function(){return Te.push(n),function(){return Te.splice(Te.indexOf(n),1)}},[])}return[e,Gt]}function nt(){var e;return""+((e=q&&q.location?q.location:q&&q.getCurrentLocation?q.getCurrentLocation():typeof location<"u"?location:Rn).pathname||"")+(e.search||"")}function Gt(e,n){return n===void 0&&(n=!1),typeof e!="string"&&e.url&&(n=e.replace,e=e.url),function(r){for(var s=de.length;s--;)if(de[s].canRoute(r))return!0;return!1}(e)&&function(r,s){s===void 0&&(s="push"),q&&q[s]?q[s](r):typeof history<"u"&&history[s+"State"]&&history[s+"State"](null,null,r)}(e,n?"replace":"push"),Jt(e)}function Jt(e){for(var n=!1,r=0;r<de.length;r++)de[r].routeTo(e)&&(n=!0);return n}function Pn(e){if(e&&e.getAttribute){var n=e.getAttribute("href"),r=e.getAttribute("target");if(n&&n.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return Gt(n)}}function Mn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Xt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var n=e.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(Pn(n))return Mn(e)}while(n=n.parentNode)}}var Dt=!1;function Zt(e){e.history&&(q=e.history),this.state={url:e.url||nt()}}we(Zt.prototype=new Ce,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var n=qe(this.props.children);return this.g(n,e)!==void 0},routeTo:function(e){this.setState({url:e});var n=this.canRoute(e);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Dt||(Dt=!0,q||addEventListener("popstate",function(){Jt(nt())}),addEventListener("click",Xt)),de.push(this),q&&(this.u=q.listen(function(n){var r=n.location||n;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),de.splice(de.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,n){e=e.filter(Kn).sort(Fn);for(var r=0;r<e.length;r++){var s=e[r],i=Je(n,s.props.path,s.props);if(i)return[s,i]}},render:function(e,n){var r,s,i=e.onChange,a=n.url,d=this.c,f=this.g(qe(e.children),a);if(f&&(s=Cn(f[0],we(we({url:a,matches:r=f[1]},r),{key:void 0,ref:void 0}))),a!==(d&&d.url)){we(tt,d=this.c={url:a,previous:d&&d.url,current:s,path:s?s.props.path:null,matches:r}),d.router=this,d.active=s?[s]:[];for(var y=Te.length;y--;)Te[y]({});typeof i=="function"&&i(d)}return je(qt.Provider,{value:d},s)}});var In=function(e){return je("a",we({onClick:Xt},e))},xe=function(e){return je(e.component,e)},Bn=["className","activeClass","activeClassName","path"];function Un(e){var n=e.className,r=e.activeClass,s=e.activeClassName,i=e.path,a=function(_,l){if(_==null)return{};var b,h,T={},E=Object.keys(_);for(h=0;h<E.length;h++)l.indexOf(b=E[h])>=0||(T[b]=_[b]);return T}(e,Bn),d=On()[0],f=i&&d.path&&Je(d.path,i,{})||Je(d.url,a.href,{}),y=a.class||n||"",m=f&&(r||s)||"";return a.class=y+(y&&m&&" ")+m,je(In,a)}function Qt(e){var n,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(r=Qt(e[n]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function zn(){for(var e,n,r=0,s="",i=arguments.length;r<i;r++)(e=arguments[r])&&(n=Qt(e))&&(s&&(s+=" "),s+=n);return s}function Hn({children:e}){return t("div",{class:"min-h-screen bg-gray-50",children:[t("nav",{class:"bg-white shadow-sm border-b",children:t("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t("div",{class:"flex justify-between h-16",children:[t("div",{class:"flex",children:[t("div",{class:"flex-shrink-0 flex items-center",children:t("h1",{class:"text-xl font-bold text-gray-900",children:"Viveforge"})}),t("div",{class:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[t(ve,{href:"/",children:"Dashboard"}),t(ve,{href:"/database",children:"Database"}),t(ve,{href:"/storage",children:"Storage"}),t(ve,{href:"/auth",children:"Auth"}),t(ve,{href:"/settings",children:"Settings"})]})]}),t("div",{class:"flex items-center space-x-4",children:t("a",{href:"/api/docs/swagger",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"ðŸ“š API Docs"})})]})})}),t("main",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function ve({href:e,children:n}){return t(Un,{href:e,class:zn("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium","hover:border-gray-300 hover:text-gray-700"),activeClassName:"border-indigo-500 text-gray-900",inactiveClassName:"border-transparent text-gray-500",children:n})}const F=window.location.origin,O={async health(){return(await fetch(`${F}/api/health`)).json()},async getItems(){const e=await fetch(`${F}/api/items`);if(!e.ok)throw new Error("Failed to fetch items");return e.json()},async createItem(e){const n=await fetch(`${F}/api/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Failed to create item");return n.json()},async updateItem(e,n){const r=await fetch(`${F}/api/items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update item");return r.json()},async deleteItem(e){const n=await fetch(`${F}/api/items/${e}`,{method:"DELETE"});if(!n.ok)throw new Error("Failed to delete item");return n.json()},async getTables(){const e=await fetch(`${F}/api/tables`);if(!e.ok)throw new Error("Failed to fetch tables");return e.json()},async getTableSchema(e){const n=await fetch(`${F}/api/tables/${e}/schema`);if(!n.ok)throw new Error("Failed to fetch table schema");return n.json()},async getTableData(e,n=100,r=0){const s=await fetch(`${F}/api/tables/${e}/data?limit=${n}&offset=${r}`);if(!s.ok)throw new Error("Failed to fetch table data");return s.json()},async createTable(e,n){const r=await fetch(`${F}/api/tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,columns:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to create table")}return r.json()},async dropTable(e){const n=await fetch(`${F}/api/tables/${e}`,{method:"DELETE"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to drop table")}return n.json()},async executeSQL(e,n=[]){const r=await fetch(`${F}/api/tables/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:e,params:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to execute SQL")}return r.json()},async addColumn(e,n){const r=await fetch(`${F}/api/tables/${e}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to add column")}return r.json()},async renameColumn(e,n,r){const s=await fetch(`${F}/api/tables/${e}/columns/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:n,newName:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to rename column")}return s.json()},async dropColumn(e,n){const r=await fetch(`${F}/api/tables/${e}/columns/${n}`,{method:"DELETE"});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to drop column")}return r.json()},async modifyColumn(e,n,r){const s=await fetch(`${F}/api/tables/${e}/columns/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to modify column")}return s.json()},async validateColumnChanges(e,n,r){const s=await fetch(`${F}/api/tables/${e}/columns/${n}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to validate column changes")}return s.json()},async updateRecord(e,n,r){const s=await fetch(`${F}/api/tables/${e}/data/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update record")}return s.json()},async getSnapshots(e=20,n=0){const r=await fetch(`${F}/api/snapshots?limit=${e}&offset=${n}`);if(!r.ok)throw new Error("Failed to fetch snapshots");return r.json()},async getSnapshot(e){const n=await fetch(`${F}/api/snapshots/${e}`);if(!n.ok)throw new Error("Failed to fetch snapshot");return n.json()},async createSnapshot(e){const n=await fetch(`${F}/api/snapshots`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to create snapshot")}return n.json()},async restoreSnapshot(e){const n=await fetch(`${F}/api/snapshots/${e}/restore`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to restore snapshot"}));throw new Error(r.error||"Failed to restore snapshot")}return n.json()},async deleteSnapshot(e){const n=await fetch(`${F}/api/snapshots/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to delete snapshot"}));throw new Error(r.error||"Failed to delete snapshot")}return n.json()},async compareSnapshots(e,n){const r=await fetch(`${F}/api/snapshots/compare/${e}/${n}`);if(!r.ok)throw new Error("Failed to compare snapshots");return r.json()}};function Wn(){const[e,n]=v({userTables:0,systemTables:0,dbStatus:"checking..."});ce(()=>{r()},[]);const r=async()=>{try{const s=await O.health(),i=await O.getTables(),a=i.tables.filter(f=>f.type==="user").length,d=i.tables.filter(f=>f.type==="system").length;n({userTables:a,systemTables:d,dbStatus:s.database==="connected"?"connected":"disconnected"})}catch(s){console.error("Failed to load stats:",s),n(i=>({...i,dbStatus:"error"}))}};return t("div",{children:[t("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard"}),t("div",{class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[t(Be,{title:"Database Tables",description:"User-defined tables in D1",href:"/database",stats:`${e.userTables} tables`,status:e.dbStatus}),t(Be,{title:"System Tables",description:"Protected system tables",href:"/database",stats:`${e.systemTables} tables`}),t(Be,{title:"Storage",description:"R2 object storage (coming soon)",href:"/storage",stats:"Not configured"})]}),t("div",{class:"mt-8",children:[t("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),t("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6",children:t("div",{class:"space-y-3",children:[t("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Create new table â†’"}),t("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Browse database â†’"}),t("a",{href:"/api/health",target:"_blank",class:"text-indigo-600 hover:text-indigo-500 block",children:"View API health â†’"})]})})})]}),t("div",{class:"mt-8",children:[t("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"API Endpoints"}),t("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6",children:t("div",{class:"space-y-2 text-sm",children:[t("div",{class:"flex justify-between",children:[t("code",{class:"text-gray-600",children:"GET /api/health"}),t("span",{class:"text-green-600",children:"Health check"})]}),t("div",{class:"flex justify-between",children:[t("code",{class:"text-gray-600",children:"GET /api/tables"}),t("span",{class:"text-green-600",children:"List tables"})]}),t("div",{class:"flex justify-between",children:[t("code",{class:"text-gray-600",children:"POST /api/tables"}),t("span",{class:"text-green-600",children:"Create table"})]}),t("div",{class:"flex justify-between",children:[t("code",{class:"text-gray-600",children:"GET /api/tables/:name/data"}),t("span",{class:"text-green-600",children:"Get table data"})]})]})})})]})]})}function Be({title:e,description:n,href:r,stats:s,status:i}){return t("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6",children:[t("div",{class:"flex items-center justify-between",children:[t("dt",{class:"text-sm font-medium text-gray-500 truncate",children:e}),i&&t("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i==="connected"?"bg-green-100 text-green-800":i==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i})]}),t("dd",{class:"mt-1 text-3xl font-semibold text-gray-900",children:s}),t("p",{class:"mt-2 text-sm text-gray-600",children:n}),t("a",{href:r,class:"mt-3 text-indigo-600 hover:text-indigo-500 text-sm font-medium inline-block",children:"Manage â†’"})]})})}function Ue({size:e="sm"}){return t("svg",{class:`animate-spin ${e==="sm"?"h-4 w-4":"h-6 w-6"} text-white`,fill:"none",viewBox:"0 0 24 24",children:[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function Vn({onClose:e,onRestore:n}){const[r,s]=v([]),[i,a]=v(null),[d,f]=v(!0),[y,m]=v(null),[_,l]=v(!1),[b,h]=v({name:"",description:""}),[T,E]=v(null),[S,w]=v(null),[C,W]=v(null),[k,I]=v(!1),[U,ne]=v(!1),[V,J]=v(!1);ce(()=>{Y()},[]),ce(()=>{const p=N=>{if(C){const oe=N.target;!oe.closest("[data-menu-container]")&&!oe.closest("[data-menu-button]")&&W(null)}};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[C]);const Y=async()=>{try{f(!0),m(null);const p=await O.getSnapshots();s(p.snapshots)}catch(p){m(p instanceof Error?p.message:"Failed to load data")}finally{f(!1)}},z=async p=>{p.preventDefault();try{m(null),I(!0),await O.createSnapshot(b),l(!1),h({name:"",description:""}),await Y()}catch(N){m(N instanceof Error?N.message:"Failed to create snapshot")}finally{I(!1)}},$=async()=>{if(T)try{m(null),ne(!0),await O.restoreSnapshot(T),E(null),n&&n(),e()}catch(p){m(p instanceof Error?p.message:"Failed to restore"),E(null)}finally{ne(!1)}},re=async()=>{if(S)try{m(null),J(!0),await O.deleteSnapshot(S),w(null),W(null),await Y()}catch(p){m(p instanceof Error?p.message:"Failed to delete snapshot"),w(null)}finally{J(!1)}},X=p=>new Date(p+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}),ue=p=>{const N=new Date(p+"Z"),he=new Date().getTime()-N.getTime(),ee=Math.floor(he/(1e3*60*60*24)),Z=Math.floor(he%(1e3*60*60*24)/(1e3*60*60));return ee>0?`${ee} day${ee>1?"s":""} ago`:Z>0?`${Z} hour${Z>1?"s":""} ago`:"Just now"};return t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[t("div",{class:"px-6 py-4 border-b flex items-center justify-between",children:[t("h2",{class:"text-xl font-semibold text-gray-900",children:"Schema Snapshots"}),t("button",{onClick:e,class:"text-gray-400 hover:text-gray-600",children:t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),y&&t("div",{class:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:t("div",{class:"text-sm text-red-700",children:y})}),t("div",{class:"mx-6 mt-4 bg-blue-50 border border-blue-200 rounded-md p-4",children:t("div",{class:"flex",children:[t("div",{class:"flex-shrink-0",children:t("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})})}),t("div",{class:"ml-3",children:[t("h3",{class:"text-sm font-medium text-blue-800",children:"ðŸ’¡ Cloudflareã®Time Travelæ©Ÿèƒ½ã«ã¤ã„ã¦"}),t("p",{class:"mt-1 text-sm text-blue-700",children:["Cloudflareã®ç®¡ç†ç”»é¢ã‹ã‚‰ã€D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’éŽåŽ»ã®ä»»æ„ã®æ™‚ç‚¹ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã§7æ—¥é–“ã€æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§30æ—¥é–“ï¼‰ã«å¾©å…ƒã§ãã‚‹Time Travelæ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚ è©³ã—ãã¯",t("a",{href:"https://developers.cloudflare.com/d1/reference/time-travel/",target:"_blank",rel:"noopener noreferrer",class:"font-medium underline hover:no-underline",children:"Cloudflare D1 Time Travelãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"}),"ã‚’ã”ç¢ºèªãã ã•ã„ã€‚"]})]})]})}),t("div",{class:"flex-1 overflow-auto p-6",children:d?t("div",{class:"text-center py-8",children:t("div",{class:"text-gray-500",children:"Loading..."})}):t("div",{children:[!_&&t("div",{class:"mb-6",children:t("button",{onClick:()=>l(!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})}),"Create Snapshot"]})}),_&&t("div",{class:"mb-6 bg-gray-50 rounded-lg p-4",children:[t("h3",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Snapshot"}),t("form",{onSubmit:z,children:t("div",{class:"space-y-3",children:[t("div",{children:[t("label",{class:"block text-sm font-medium text-gray-700",children:"Name"}),t("input",{type:"text",value:b.name,onInput:p=>h({...b,name:p.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Before major refactoring"})]}),t("div",{children:[t("label",{class:"block text-sm font-medium text-gray-700",children:"Description"}),t("textarea",{value:b.description,onInput:p=>h({...b,description:p.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",rows:2,placeholder:"Optional description of current state"})]}),t("div",{class:"flex space-x-3",children:[t("button",{type:"submit",disabled:k,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${k?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[k&&t(Ue,{size:"sm"}),t("span",{children:k?"Creating...":"Create"})]}),t("button",{type:"button",onClick:()=>{l(!1),h({name:"",description:""})},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})})]}),t("div",{class:"space-y-3",children:r.length===0?t("div",{class:"text-center py-8 text-gray-500",children:"No snapshots yet. Create your first snapshot to start tracking schema changes."}):r.map(p=>t("div",{class:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${(i==null?void 0:i.id)===p.id?"border-indigo-500 bg-indigo-50":"border-gray-200"}`,onClick:()=>a(p),children:t("div",{class:"flex items-start justify-between",children:[t("div",{class:"flex-1",children:[t("div",{class:"flex items-center space-x-3",children:[t("h4",{class:"text-sm font-medium text-gray-900",children:p.name||`Snapshot v${p.version}`}),t("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.snapshotType==="manual"?"bg-blue-100 text-blue-800":p.snapshotType==="auto"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.snapshotType})]}),p.description&&t("p",{class:"mt-1 text-sm text-gray-600",children:p.description}),t("div",{class:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[t("span",{children:["Version ",p.version]}),t("span",{children:X(p.createdAt)}),t("span",{children:ue(p.createdAt)})]})]}),t("div",{class:"ml-4 flex items-center space-x-2",children:[t("button",{onClick:N=>{N.stopPropagation(),E(p.id)},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),t("div",{class:"relative",children:[t("button",{onClick:N=>{N.stopPropagation(),W(C===p.id?null:p.id)},"data-menu-button":"true",class:"inline-flex items-center p-1.5 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 rounded-md",children:t("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:t("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),C===p.id&&t("div",{class:"absolute right-0 top-full mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10","data-menu-container":"true",children:t("div",{class:"py-1",children:t("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),W(null),w(p.id)},class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 focus:outline-none",children:t("div",{class:"flex items-center space-x-2",children:[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),t("span",{children:"Delete"})]})})})})]})]})]})},p.id))})]})}),T&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{class:"flex items-center mb-4",children:[t("div",{class:"flex-shrink-0",children:t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t("div",{class:"ml-3",children:t("h3",{class:"text-lg font-medium text-gray-900",children:"Confirm Restore"})})]}),t("div",{class:"mb-6",children:[t("p",{class:"text-sm text-gray-700",children:"This will restore your database schema to the selected snapshot. All current tables and data will be replaced."}),t("p",{class:"text-sm text-red-600 mt-2 font-medium",children:"This action cannot be undone. Make sure you have a backup of your current data."})]}),t("div",{class:"flex space-x-3",children:[t("button",{onClick:$,disabled:U,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${U?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[U&&t(Ue,{size:"sm"}),t("span",{children:U?"Restoring...":"Restore"})]}),t("button",{onClick:()=>E(null),disabled:U,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${U?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})}),S&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{class:"flex items-center mb-4",children:[t("div",{class:"flex-shrink-0",children:t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t("div",{class:"ml-3",children:t("h3",{class:"text-lg font-medium text-gray-900",children:"Delete Snapshot"})})]}),t("div",{class:"mb-6",children:t("p",{class:"text-sm text-gray-700",children:"Are you sure you want to delete this snapshot? This action cannot be undone."})}),t("div",{class:"flex space-x-3",children:[t("button",{onClick:re,disabled:V,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${V?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[V&&t(Ue,{size:"sm"}),t("span",{children:V?"Deleting...":"Delete"})]}),t("button",{onClick:()=>w(null),disabled:V,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${V?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})})]})})}const qn=e=>e?e.length>8?`${e.substring(0,4)}...`:e:"-",Gn=["admins","sessions","schema_snapshots","schema_snapshot_counter","d1_migrations"],ze=e=>e.filter(n=>!Gn.includes(n.name)),Jn=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch{try{const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.focus(),r.select();const s=document.execCommand("copy");return document.body.removeChild(r),s}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}};function Xn(){var ct,dt,ut,ht,ft;const[e,n]=v([]),[r,s]=v(null),[i,a]=v([]),[d,f]=v([]),[y,m]=v([]),[_,l]=v(!1),[b,h]=v(null),[T,E]=v(!1),[S,w]=v(!1),[C,W]=v({}),[k,I]=v({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),[U,ne]=v(null),[V,J]=v(null),[Y,z]=v(!1),[$,re]=v({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),[X,ue]=v(null),[p,N]=v(null),[oe,he]=v(null),[ee,Z]=v(null),[B,ye]=v(null),[R,se]=v(null),[Yt,Oe]=v({}),[G,Pe]=v({}),en=jt(null),Me=jt(!1),[tn,rt]=v(!1),ot=o=>o?new Date(o+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}):"-";ce(()=>{Ne()},[]),ce(()=>{r&&(fe(),ie(),E(!1),w(!1),z(!1))},[r]),ce(()=>{const o=()=>{ne(null)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]);const Ne=async()=>{try{l(!0);const o=await O.getTables();n(o.tables),h(null)}catch(o){h(o instanceof Error?o.message:"Failed to load tables")}finally{l(!1)}},ie=async()=>{if(r)try{const o=await O.getTableSchema(r);f(o.columns),m(o.foreignKeys||[]);const c={};o.columns.forEach(g=>{["id","created_at","updated_at"].includes(g.name)||(c[g.name]="")}),W(c)}catch(o){console.error("Failed to load table schema:",o)}},fe=async()=>{if(r)try{l(!0);const o=await O.getTableData(r);a(o.data),h(null)}catch(o){h(o instanceof Error?o.message:"Failed to load table data")}finally{l(!1)}},nn=async o=>{if(o.preventDefault(),!!r)try{const c=Object.fromEntries(Object.entries(C).map(([u,x])=>[u,x===""?null:x]));console.log("Sending record data:",c);const g=await fetch(`${window.location.origin}/api/tables/${r}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!g.ok){const u=await g.json();throw new Error(u.error||`HTTP ${g.status}: Failed to create record`)}await fe(),E(!1),h(null)}catch(c){if(console.error("Create record error:",c),c instanceof Error){let g=c.message;if(c.message.includes("FOREIGN KEY constraint failed"))g="Foreign key constraint failed: The referenced record does not exist";else if(c.message.includes("NOT NULL constraint failed")){const u=c.message.match(/NOT NULL constraint failed: (\w+)\.(\w+)/);u?g=`Required field "${u[2]}" cannot be empty`:g="A required field cannot be empty"}else if(c.message.includes("UNIQUE constraint failed")){const u=c.message.match(/UNIQUE constraint failed: (\w+)\.(\w+)/);u?g=`Value for "${u[2]}" must be unique`:g="This value must be unique"}h(g)}else h("Failed to create record")}},rn=async o=>{r&&Z({title:"Delete Record",message:"Are you sure you want to delete this record? This action cannot be undone.",variant:"danger",onConfirm:async()=>{Z(null);try{await fetch(`${window.location.origin}/api/tables/${r}/data/${o}`,{method:"DELETE"}),await fe()}catch(c){h(c instanceof Error?c.message:"Failed to delete record")}}})},on=async o=>{o.preventDefault();try{const c=k.columns.filter(g=>g.name).map(g=>{var u,x,M;return{name:g.name,type:g.type,constraints:g.notNull?"NOT NULL":void 0,...(u=g.foreignKey)!=null&&u.enabled&&((x=g.foreignKey)!=null&&x.table)&&((M=g.foreignKey)!=null&&M.column)?{foreignKey:{table:g.foreignKey.table,column:g.foreignKey.column}}:{}}});console.log("Creating table:",k.name,"with columns:",c),await O.createTable(k.name,c),await Ne(),w(!1),I({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),h(null)}catch(c){h(c instanceof Error?c.message:"Failed to create table")}},sn=async o=>{Z({title:"Drop Table",message:`Are you sure you want to drop the table "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{Z(null);try{await O.dropTable(o),await Ne(),r===o&&(s(null),a([]))}catch(c){h(c instanceof Error?c.message:"Failed to drop table")}}})},an=async(o,c,g)=>{if(await Jn(o)){const x=`${c}-${g}`;J(x),setTimeout(()=>J(null),2e3)}},ln=async(o,c,g,u)=>{o.metaKey||o.ctrlKey?await cn(c,u):await an(c,g,u)},cn=async(o,c)=>{const g=await dn(o,c);g&&(s(g),setTimeout(()=>{const u=document.querySelector(`[data-record-id="${o}"]`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.classList.add("bg-yellow-100"),setTimeout(()=>u.classList.remove("bg-yellow-100"),2e3))},500))},dn=async(o,c)=>{if(c.endsWith("_id")){const g=c.replace("_id","")+"s",u=e.find(x=>x.name===g);if(u)return u.name}for(const g of e)try{if((await O.getTableData(g.name,1,0)).data.some(M=>M.id===o))return g.name}catch{}return null},un=async o=>{var c,g,u;if(o.preventDefault(),!!r)try{const x={name:$.name,type:$.type,constraints:$.notNull?"NOT NULL":void 0,...(c=$.foreignKey)!=null&&c.enabled&&((g=$.foreignKey)!=null&&g.table)&&((u=$.foreignKey)!=null&&u.column)?{foreignKey:{table:$.foreignKey.table,column:$.foreignKey.column}}:{}};await O.addColumn(r,x),await ie(),re({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),h(null)}catch(x){h(x instanceof Error?x.message:"Failed to add column")}},st=async(o,c)=>{if(!(!r||!c||o===c))try{await O.renameColumn(r,o,c),await ie(),ue(null),h(null)}catch(g){h(g instanceof Error?g.message:"Failed to rename column")}},hn=async o=>{r&&Z({title:"Drop Column",message:`Are you sure you want to drop the column "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{Z(null);try{await O.dropColumn(r,o),await ie(),h(null)}catch(c){h(c instanceof Error?c.message:"Failed to drop column")}}})},fn=async(o,c)=>{if(r)try{const g=await O.validateColumnChanges(r,o,c);if(!g.valid){he({errors:g.errors,conflictingRows:g.conflictingRows,onConfirm:async()=>{he(null);try{await O.modifyColumn(r,o,c),await ie(),N(null),h(null)}catch(u){h(u instanceof Error?u.message:"Failed to modify column")}}});return}await O.modifyColumn(r,o,c),await ie(),N(null),h(null)}catch(g){h(g instanceof Error?g.message:"Failed to modify column")}},H=o=>y.find(c=>c.from===o)||null,it=async(o,c)=>{if(!o.trim())return null;const g=`${c.table}-${o}`;Pe(u=>({...u,[g]:{isValid:!1,isChecking:!0}}));try{const x=(await O.getTableData(c.table)).data.some(M=>M.id===o);return Pe(M=>({...M,[g]:{isValid:x,isChecking:!1,displayName:x?`Valid ID in ${c.table}`:`ID not found in ${c.table}`}})),x}catch{return Pe(x=>({...x,[g]:{isValid:!1,isChecking:!1,displayName:`Error checking ${c.table}`}})),!1}},mn=(o,c,g)=>{if(["id","created_at","updated_at"].includes(c))return;const u=d.find(M=>M.name===c);if(H(c)||!u){const M=i.find(A=>A.id===o);M&&se({id:o,data:{...M}})}else Me.current=!1,ye({rowId:o,columnName:c,value:g})},at=async(o,c,g)=>{if(r){ye(null),a(u=>u.map(x=>x.id===o?{...x,[c]:g}:x));try{await O.updateRecord(r,o,{[c]:g}),h(null)}catch(u){h(u instanceof Error?u.message:"Failed to update record"),ye({rowId:o,columnName:c,value:g}),await fe()}}},gn=()=>{ye(null)},pn=async()=>{if(!(!r||!R))try{const o={...R.data};delete o.id,delete o.created_at,delete o.updated_at,await O.updateRecord(r,R.id,o),await fe(),se(null),h(null)}catch(o){h(o instanceof Error?o.message:"Failed to update record")}},lt=e.filter(o=>o.type==="user"),yn=e.filter(o=>o.type==="system");return t("div",{children:[t("div",{class:"sm:flex sm:items-center",children:[t("div",{class:"sm:flex-auto",children:[t("h2",{class:"text-2xl font-bold text-gray-900",children:"Database"}),t("p",{class:"mt-2 text-sm text-gray-700",children:"Manage your D1 database tables and data"})]}),t("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex space-x-3",children:[t("button",{type:"button",onClick:()=>rt(!0),class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:[t("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),t("button",{type:"button",onClick:()=>w(!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:"Create Table"})]})]}),b&&!T&&t("div",{class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:[t("div",{class:"text-sm text-red-700",children:b}),t("button",{onClick:()=>h(null),class:"mt-2 text-xs text-red-600 hover:text-red-500",children:"Dismiss"})]}),S&&t("div",{class:"mt-6 bg-white shadow rounded-lg p-6",children:[t("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Create New Table"}),t("form",{onSubmit:on,children:[t("div",{class:"mb-4",children:[t("label",{class:"block text-sm font-medium text-gray-700",children:"Table Name"}),t("input",{type:"text",value:k.name,onInput:o=>I({...k,name:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"my_table",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",required:!0})]}),t("div",{class:"mb-4",children:[t("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),t("div",{class:"space-y-2",children:k.columns.map((o,c)=>{var g,u,x,M;return t("div",{children:[t("div",{class:"flex space-x-2",children:[t("input",{type:"text",value:o.name,onInput:A=>{const D=[...k.columns];D[c].name=A.target.value,I({...k,columns:D})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*"}),t("select",{value:o.type,onChange:A=>{const D=[...k.columns];D[c].type=A.target.value,I({...k,columns:D})},class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[t("option",{value:"TEXT",children:"TEXT"}),t("option",{value:"INTEGER",children:"INTEGER"}),t("option",{value:"REAL",children:"REAL"}),t("option",{value:"BLOB",children:"BLOB"}),t("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),t("label",{class:"flex items-center space-x-1",children:[t("input",{type:"checkbox",checked:o.notNull||!1,onChange:A=>{const D=[...k.columns];D[c].notNull=A.target.checked,I({...k,columns:D})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-xs text-gray-700",children:"NN"})]}),t("label",{class:"flex items-center space-x-1",children:[t("input",{type:"checkbox",checked:((g=o.foreignKey)==null?void 0:g.enabled)||!1,onChange:A=>{const D=[...k.columns],ae=A.target.checked;D[c].foreignKey={...D[c].foreignKey,enabled:ae,column:ae?"id":""},I({...k,columns:D})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-xs text-gray-700",children:"FK"})]}),c>0&&t("button",{type:"button",onClick:()=>{const A=k.columns.filter((D,ae)=>ae!==c);I({...k,columns:A})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),((u=o.foreignKey)==null?void 0:u.enabled)&&t("div",{class:"flex space-x-2 ml-4 mt-1",children:[t("select",{value:((x=o.foreignKey)==null?void 0:x.table)||"",onChange:A=>{const D=[...k.columns];D[c].foreignKey={...D[c].foreignKey,table:A.target.value},I({...k,columns:D})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[t("option",{value:"",children:"Select table..."}),ze(e).map(A=>t("option",{value:A.name,children:A.name},A.name))]}),t("input",{type:"text",value:((M=o.foreignKey)==null?void 0:M.column)||"",onChange:A=>{const D=[...k.columns];D[c].foreignKey={...D[c].foreignKey,column:A.target.value},I({...k,columns:D})},placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]},c)})}),t("button",{type:"button",onClick:()=>I({...k,columns:[...k.columns,{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500",children:"Add Column"}),t("p",{class:"mt-2 text-xs text-gray-500",children:"Note: id, created_at, and updated_at columns will be added automatically"})]}),t("div",{class:"flex space-x-3",children:[t("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),t("button",{type:"button",onClick:()=>{w(!1),h(null)},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),t("div",{class:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[t("div",{class:"lg:col-span-1",children:t("div",{class:"bg-white shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6",children:[t("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Tables"}),_&&!r?t("div",{class:"text-sm text-gray-500",children:"Loading..."}):t("div",{class:"space-y-4",children:[t("div",{children:[t("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"User Tables"}),t("div",{class:"space-y-1",children:[lt.map(o=>t("div",{class:`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,children:[t("div",{class:"flex-1 cursor-pointer",onClick:()=>s(o.name),children:[t("div",{class:"text-sm font-medium text-gray-900",children:o.name}),t("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),o.type==="user"&&t("div",{class:"relative",children:[t("button",{onClick:c=>{c.stopPropagation(),ne(U===o.name?null:o.name)},class:"p-1 text-gray-400 hover:text-gray-600 rounded",children:t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),U===o.name&&t("div",{class:"absolute right-0 mt-1 w-24 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:t("button",{onClick:c=>{c.stopPropagation(),sn(o.name),ne(null)},class:"w-full px-3 py-2 text-xs text-left text-red-600 hover:bg-red-50",children:"Drop Table"})})]})]},o.name)),lt.length===0&&t("p",{class:"text-sm text-gray-500",children:"No user tables yet"})]})]}),t("div",{children:[t("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"System Tables"}),t("div",{class:"space-y-1",children:yn.map(o=>t("div",{class:`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,onClick:()=>s(o.name),children:[t("div",{children:[t("div",{class:"text-sm font-medium text-gray-900",children:o.name}),t("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),t("span",{class:"text-xs text-gray-400",children:"Protected"})]},o.name))})]})]})]})})}),t("div",{class:"lg:col-span-2",children:r?t("div",{class:"bg-white shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6",children:[t("div",{class:"flex items-center justify-between mb-4",children:[t("h3",{class:"text-lg font-medium text-gray-900",children:r}),((ct=e.find(o=>o.name===r))==null?void 0:ct.type)==="user"&&t("div",{class:"flex space-x-2",children:[t("button",{type:"button",onClick:()=>z(!Y),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Schema"}),t("button",{type:"button",onClick:()=>{const o={};d.forEach(c=>{["id","created_at","updated_at"].includes(c.name)||(o[c.name]="")}),W(o),h(null),E(!0)},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Record"})]})]}),Y&&t("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[t("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Table Schema"}),t("div",{class:"mb-4",children:[t("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Columns"}),t("div",{class:"space-y-2",children:d.map(o=>t("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(X==null?void 0:X.oldName)===o.name?t("input",{type:"text",value:X.newName,onInput:c=>ue({...X,newName:c.target.value}),onKeyDown:c=>{c.key==="Enter"&&st(X.oldName,X.newName),c.key==="Escape"&&ue(null)},onBlur:()=>st(X.oldName,X.newName),class:"flex-1 text-sm border-gray-300 rounded px-2 py-1",autoFocus:!0}):t("div",{class:"flex-1",children:[t("span",{class:"text-sm font-medium text-gray-900",children:o.name}),t("span",{class:"ml-2 text-xs text-gray-500",children:o.type}),o.notnull?t("span",{class:"ml-1 text-xs text-red-500",children:"NOT NULL"}):null,o.pk?t("span",{class:"ml-1 text-xs text-blue-500",children:"PRIMARY KEY"}):null,H(o.name)&&t("span",{class:"ml-1 text-xs text-green-600",children:["FK â†’ ",H(o.name).table,".",H(o.name).to]})]}),!["id","created_at","updated_at"].includes(o.name)&&t("div",{class:"flex space-x-2",children:[t("button",{onClick:()=>ue({oldName:o.name,newName:o.name}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Rename"}),t("button",{onClick:()=>{const c=H(o.name);N({name:o.name,type:o.type,notNull:o.notnull===1,foreignKey:{enabled:!!c,table:(c==null?void 0:c.table)||"",column:(c==null?void 0:c.to)||""}})},class:"text-xs text-blue-600 hover:text-blue-500",children:"Modify"}),t("button",{onClick:()=>hn(o.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]})]},o.name))})]}),t("div",{class:"border-t pt-4",children:[t("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Add Column"}),t("form",{onSubmit:un,children:[t("div",{class:"flex space-x-2",children:[t("input",{type:"text",value:$.name,onInput:o=>re({...$,name:o.target.value}),placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0}),t("select",{value:$.type,onChange:o=>re({...$,type:o.target.value}),class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[t("option",{value:"TEXT",children:"TEXT"}),t("option",{value:"INTEGER",children:"INTEGER"}),t("option",{value:"REAL",children:"REAL"}),t("option",{value:"BLOB",children:"BLOB"}),t("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),t("label",{class:"flex items-center space-x-1",children:[t("input",{type:"checkbox",checked:$.notNull,onChange:o=>re({...$,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-xs text-gray-700",children:"NN"})]}),t("label",{class:"flex items-center space-x-1",children:[t("input",{type:"checkbox",checked:(dt=$.foreignKey)==null?void 0:dt.enabled,onChange:o=>re({...$,foreignKey:{...$.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-xs text-gray-700",children:"FK"})]}),t("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add"})]}),((ut=$.foreignKey)==null?void 0:ut.enabled)&&t("div",{class:"flex space-x-2 mt-2",children:[t("select",{value:((ht=$.foreignKey)==null?void 0:ht.table)||"",onChange:o=>re({...$,foreignKey:{...$.foreignKey,table:o.target.value}}),class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[t("option",{value:"",children:"Select table..."}),ze(e).map(o=>t("option",{value:o.name,children:o.name},o.name))]}),t("input",{type:"text",value:((ft=$.foreignKey)==null?void 0:ft.column)||"",onChange:o=>re({...$,foreignKey:{...$.foreignKey,column:o.target.value}}),placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]})]}),p&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t("h4",{class:"text-lg font-medium text-gray-900 mb-4",children:["Modify Column: ",p.name]}),t("div",{class:"space-y-4",children:[t("div",{children:[t("label",{class:"block text-sm font-medium text-gray-700",children:"Type"}),t("select",{value:p.type,onChange:o=>N({...p,type:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[t("option",{value:"TEXT",children:"TEXT"}),t("option",{value:"INTEGER",children:"INTEGER"}),t("option",{value:"REAL",children:"REAL"}),t("option",{value:"BLOB",children:"BLOB"}),t("option",{value:"BOOLEAN",children:"BOOLEAN"})]})]}),t("div",{children:t("label",{class:"flex items-center space-x-2",children:[t("input",{type:"checkbox",checked:p.notNull,onChange:o=>N({...p,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-sm text-gray-700",children:"NOT NULL"})]})}),t("div",{children:t("label",{class:"flex items-center space-x-2",children:[t("input",{type:"checkbox",checked:p.foreignKey.enabled,onChange:o=>N({...p,foreignKey:{...p.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t("span",{class:"text-sm text-gray-700",children:"Foreign Key"})]})}),p.foreignKey.enabled&&t("div",{class:"space-y-2",children:[t("select",{value:p.foreignKey.table,onChange:o=>N({...p,foreignKey:{...p.foreignKey,table:o.target.value}}),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[t("option",{value:"",children:"Select table..."}),ze(e).map(o=>t("option",{value:o.name,children:o.name},o.name))]}),t("input",{type:"text",value:p.foreignKey.column,onChange:o=>N({...p,foreignKey:{...p.foreignKey,column:o.target.value}}),placeholder:"id",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),t("div",{class:"mt-6 flex space-x-3",children:[t("button",{onClick:()=>{var g,u;const o={};p.type!==((g=d.find(x=>x.name===p.name))==null?void 0:g.type)&&(o.type=p.type);const c=((u=d.find(x=>x.name===p.name))==null?void 0:u.notnull)===1;p.notNull!==c&&(o.notNull=p.notNull),p.foreignKey.enabled&&p.foreignKey.table&&p.foreignKey.column?o.foreignKey={table:p.foreignKey.table,column:p.foreignKey.column}:p.foreignKey.enabled||(o.foreignKey=null),fn(p.name,o)},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Apply Changes"}),t("button",{onClick:()=>N(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),oe&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[t("div",{class:"flex items-center mb-4",children:[t("div",{class:"flex-shrink-0",children:t("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t("div",{class:"ml-3",children:t("h3",{class:"text-lg font-medium text-gray-900",children:"Validation Warning"})})]}),t("div",{class:"mb-4",children:[t("p",{class:"text-sm text-gray-700 mb-3",children:"The following issues were found with your changes:"}),t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:[t("ul",{class:"list-disc list-inside space-y-1",children:oe.errors.map((o,c)=>t("li",{class:"text-sm text-yellow-800",children:o},c))}),oe.conflictingRows>0&&t("p",{class:"text-sm text-yellow-800 mt-2 font-medium",children:[oe.conflictingRows," rows will be affected."]})]}),t("p",{class:"text-sm text-gray-600 mt-3",children:"Proceeding may result in data loss or corruption. Are you sure you want to continue?"})]}),t("div",{class:"flex space-x-3",children:[t("button",{onClick:oe.onConfirm,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Proceed Anyway"}),t("button",{onClick:()=>he(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),ee&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t("div",{class:"flex items-center mb-4",children:[t("div",{class:"flex-shrink-0",children:ee.variant==="danger"?t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):t("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t("div",{class:"ml-3",children:t("h3",{class:"text-lg font-medium text-gray-900",children:ee.title})})]}),t("div",{class:"mb-6",children:t("p",{class:"text-sm text-gray-700",children:ee.message})}),t("div",{class:"flex space-x-3",children:[t("button",{onClick:ee.onConfirm,class:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${ee.variant==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}`,children:"Confirm"}),t("button",{onClick:()=>Z(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),R&&t("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t("div",{class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[t("div",{class:"flex items-center justify-between mb-4",children:[t("h3",{class:"text-lg font-medium text-gray-900",children:"Edit Record"}),t("button",{onClick:()=>se(null),class:"text-gray-400 hover:text-gray-600",children:t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),t("div",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:d.map(o=>{if(["id","created_at","updated_at"].includes(o.name))return t("div",{class:"sm:col-span-2",children:[t("label",{class:"block text-sm font-medium text-gray-500",children:[o.name," (read-only)"]}),t("div",{class:"mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-500",children:o.name.includes("_at")&&R.data[o.name]?ot(R.data[o.name]):R.data[o.name]||"-"})]},o.name);const c=H(o.name);return t("div",{children:[t("label",{class:"block text-sm font-medium text-gray-700",children:[o.name,o.notnull?t("span",{class:"text-red-500 ml-1",children:"*"}):null,c&&t("span",{class:"text-green-600 ml-1 text-xs",children:["FK â†’ ",c.table,".",c.to]})]}),c?t("div",{class:"relative",children:[t("input",{type:"text",value:R.data[o.name]||"",onInput:g=>{const u=g.target.value;se({...R,data:{...R.data,[o.name]:u}}),u.trim()&&it(u,c)},class:`mt-1 block w-full border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${R.data[o.name]&&G[`${c.table}-${R.data[o.name]}`]?G[`${c.table}-${R.data[o.name]}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:`Enter ${c.table} ID`,required:o.notnull===1}),R.data[o.name]&&G[`${c.table}-${R.data[o.name]}`]&&t("div",{class:`absolute left-0 top-full mt-1 text-xs px-2 py-1 rounded ${G[`${c.table}-${R.data[o.name]}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:G[`${c.table}-${R.data[o.name]}`].isChecking?"Checking...":G[`${c.table}-${R.data[o.name]}`].displayName})]}):t("input",{type:o.type==="INTEGER"||o.type==="REAL"?"number":"text",value:R.data[o.name]||"",onInput:g=>se({...R,data:{...R.data,[o.name]:g.target.value}}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:o.notnull===1})]},o.name)})}),t("div",{class:"mt-6 flex space-x-3",children:[t("button",{onClick:pn,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"}),t("button",{onClick:()=>se(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),T&&t("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[t("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Record"}),t("form",{onSubmit:nn,children:[t("div",{class:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Object.entries(C).map(([o,c])=>t("div",{children:[t("label",{class:"block text-xs font-medium text-gray-700",children:o}),t("input",{type:"text",value:c,onInput:g=>W({...C,[o]:g.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]},o))}),b&&T&&t("div",{class:"mt-3 bg-red-50 border border-red-200 rounded-md p-3",children:t("div",{class:"flex",children:[t("div",{class:"flex-shrink-0",children:t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})})}),t("div",{class:"ml-3",children:t("p",{class:"text-sm text-red-700",children:b})})]})}),t("div",{class:"mt-3 flex space-x-2",children:[t("button",{type:"submit",class:"inline-flex justify-center py-1.5 px-3 border border-transparent shadow-sm text-xs font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),t("button",{type:"button",onClick:()=>{E(!1),h(null)},class:"inline-flex justify-center py-1.5 px-3 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),_?t("div",{class:"text-center py-4 text-sm text-gray-500",children:"Loading data..."}):i.length===0?t("div",{class:"text-center py-8",children:t("p",{class:"text-sm text-gray-500",children:"No data in this table"})}):t("div",{class:"overflow-x-auto",children:t("table",{class:"min-w-full divide-y divide-gray-200",children:[t("thead",{class:"bg-gray-50",children:t("tr",{children:[d.map(o=>t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.name},o.name)),t("th",{class:"px-3 py-2"})]})}),t("tbody",{class:"bg-white divide-y divide-gray-200",children:i.map((o,c)=>{var g;return t("tr",{"data-record-id":o.id,children:[d.map(u=>{var x,M,A,D,ae,mt,gt,pt;return t("td",{class:`px-3 py-2 whitespace-nowrap text-sm text-gray-900 select-text ${!["id","created_at","updated_at"].includes(u.name)&&((x=e.find(L=>L.name===r))==null?void 0:x.type)==="user"?"cursor-pointer hover:bg-gray-50":""}`,onClick:L=>{var yt;const Q=`${o.id}-${u.name}`;if(["id","created_at","updated_at"].includes(u.name)||((yt=e.find(_e=>_e.name===r))==null?void 0:yt.type)!=="user")return;const be=Yt[Q];if(be)clearTimeout(be.timeout),Oe(_e=>{const me={..._e};return delete me[Q],me}),L.preventDefault(),L.stopPropagation(),mn(o.id,u.name,o[u.name]);else{const _e=setTimeout(()=>{Oe(me=>{const bt={...me};return delete bt[Q],bt})},400);Oe(me=>({...me,[Q]:{count:1,timeout:_e}}))}},title:!["id","created_at","updated_at"].includes(u.name)&&((M=e.find(L=>L.name===r))==null?void 0:M.type)==="user"?"Double-click to edit":"",children:(B==null?void 0:B.rowId)===o.id&&(B==null?void 0:B.columnName)===u.name?t("div",{class:"relative",children:[t("input",{type:u.type==="INTEGER"||u.type==="REAL"?"number":"text",value:B.value||"",onInput:L=>{const Q=L.target.value;ye({...B,value:Q});const be=H(u.name);be&&Q.trim()&&it(Q,be)},onKeyDown:L=>{L.key==="Enter"&&!L.isComposing&&at(o.id,u.name,B.value),L.key==="Escape"&&gn()},onBlur:()=>at(o.id,u.name,B.value),class:`w-full px-2 py-1 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${H(u.name)&&B.value&&G[`${(A=H(u.name))==null?void 0:A.table}-${B.value}`]?G[`${(D=H(u.name))==null?void 0:D.table}-${B.value}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-indigo-300"}`,ref:L=>{en.current=L,L&&!Me.current&&(Me.current=!0,setTimeout(()=>{L.focus();const Q=L.value.length;L.setSelectionRange(Q,Q)},0))}}),H(u.name)&&B.value&&G[`${(ae=H(u.name))==null?void 0:ae.table}-${B.value}`]&&t("div",{class:`absolute left-0 -bottom-6 text-xs px-2 py-1 rounded ${G[`${(mt=H(u.name))==null?void 0:mt.table}-${B.value}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:G[`${(gt=H(u.name))==null?void 0:gt.table}-${B.value}`].isChecking?"Checking...":G[`${(pt=H(u.name))==null?void 0:pt.table}-${B.value}`].displayName})]}):u.name.includes("_at")&&o[u.name]?ot(o[u.name]):(u.name==="id"||u.name.endsWith("_id"))&&o[u.name]&&o[u.name].length>8?t("button",{onClick:L=>{L.stopPropagation(),ln(L,o[u.name],c,u.name)},onDoubleClick:L=>{L.preventDefault(),L.stopPropagation()},class:"text-blue-600 hover:text-blue-800 cursor-pointer underline decoration-dotted relative",title:"Click to copy â€¢ Cmd+Click to jump to record",children:[qn(o[u.name]),V===`${c}-${u.name}`&&t("span",{class:"absolute -top-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Copied!"})]}):o[u.name]||"-"},u.name)}),t("td",{class:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium",children:((g=e.find(u=>u.name===r))==null?void 0:g.type)==="user"&&t("div",{class:"flex space-x-2",children:[t("button",{onClick:()=>{const u=i.find(x=>x.id===o.id);u&&se({id:o.id,data:{...u}})},class:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),t("button",{onClick:()=>rn(o.id),class:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},o.id||c)})})]})})]})}):t("div",{class:"bg-white shadow rounded-lg",children:t("div",{class:"px-4 py-5 sm:p-6 text-center",children:[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t("h3",{class:"mt-2 text-sm font-medium text-gray-900",children:"No table selected"}),t("p",{class:"mt-1 text-sm text-gray-500",children:"Select a table from the list to view its data"})]})})})]}),tn&&t(Vn,{onClose:()=>rt(!1),onRestore:()=>{Ne(),r&&(fe(),ie())}})]})}function Zn(){return t("div",{children:[t("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Storage"}),t("p",{class:"text-gray-600",children:"R2 storage management coming soon..."})]})}function Qn(){return t("div",{children:[t("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Authentication"}),t("p",{class:"text-gray-600",children:"OAuth provider configuration coming soon..."})]})}function Yn(){return t("div",{children:[t("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),t("p",{class:"text-gray-600",children:"Project settings coming soon..."})]})}function er(){return t(Hn,{children:t(Zt,{children:[t(xe,{path:"/",component:Wn}),t(xe,{path:"/database",component:Xn}),t(xe,{path:"/storage",component:Zn}),t(xe,{path:"/auth",component:Qn}),t(xe,{path:"/settings",component:Yn})]})})}kn(t(er,{}),document.getElementById("app"));
//# sourceMappingURL=index-C_XW7IIS.js.map
