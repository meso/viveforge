{"version":3,"file":"index-C9FBbR_E.js","sources":["../../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/dist/preact.module.js","../../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/hooks/dist/hooks.module.js","../../../../node_modules/.pnpm/preact-router@4.1.2_preact@10.26.9/node_modules/preact-router/dist/preact-router.mjs","../../../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs","../../../../node_modules/.pnpm/preact-router@4.1.2_preact@10.26.9/node_modules/preact-router/match/index.mjs","../../src/hooks/useAuthMonitor.ts","../../src/components/Layout.tsx","../../src/lib/api.ts","../../src/components/OAuthProviderCard.tsx","../../src/pages/Auth.tsx","../../src/pages/CustomSQL.tsx","../../src/components/SchemaHistory.tsx","../../src/pages/Database.tsx","../../src/pages/Home.tsx","../../src/lib/push-manager.ts","../../src/pages/PushNotifications.tsx","../../src/pages/Settings.tsx","../../src/pages/Storage.tsx","../../src/app.tsx","../../src/main.tsx"],"sourcesContent":["var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,z(f,t,c),t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_=t&&t.__k||v,m=l.length;for(f=P(u,l,_,f,m),a=0;a<m;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:_[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&q(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),4&y.__u||h.__k===y.__k?f=A(y,f,n):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):w(o)?m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),B(e,e));return t}function A(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=A(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=S(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o=n.key,e=n.type,f=l[u];if(null===f&&null==n.key||f&&o==f.key&&e==f.type&&0==(2&f.__u))return u;if(t>(null!=f&&0==(2&f.__u)?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;){if(i>=0){if((f=l[i])&&0==(2&f.__u)&&o==f.key&&e==f.type)return i;i--}if(r<l.length){if((f=l[r])&&0==(2&f.__u)&&o==f.key&&e==f.type)return r;r++}}return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=D),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=N(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else for(T=o.length;T--;)g(o[T]);else u.__e=t.__e,u.__k=t.__k;l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=V(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n,u,t){for(var i=0;i<t.length;i++)q(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function N(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(N):d({},n)}function V(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function q(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function B(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||q(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&B(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function D(n,l,u){return this.constructor(n,u)}function E(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),z(e,u,f)}function G(n,l){E(n,l,G)}function J(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function K(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,J as cloneElement,K as createContext,_ as createElement,b as createRef,_ as h,G as hydrate,t as isValidElement,l as options,E as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import{createContext as n,Component as t,toChildArray as r,cloneElement as i,h as o}from\"preact\";import{useContext as e,useState as u,useEffect as f}from\"preact/hooks\";var a={};function c(n,t){for(var r in t)n[r]=t[r];return n}function s(n,t,r){var i,o=/(?:\\?([^#]*))?(#.*)?$/,e=n.match(o),u={};if(e&&e[1])for(var f=e[1].split(\"&\"),c=0;c<f.length;c++){var s=f[c].split(\"=\");u[decodeURIComponent(s[0])]=decodeURIComponent(s.slice(1).join(\"=\"))}n=d(n.replace(o,\"\")),t=d(t||\"\");for(var h=Math.max(n.length,t.length),v=0;v<h;v++)if(t[v]&&\":\"===t[v].charAt(0)){var l=t[v].replace(/(^:|[+*?]+$)/g,\"\"),p=(t[v].match(/[+*?]+$/)||a)[0]||\"\",m=~p.indexOf(\"+\"),y=~p.indexOf(\"*\"),U=n[v]||\"\";if(!U&&!y&&(p.indexOf(\"?\")<0||m)){i=!1;break}if(u[l]=decodeURIComponent(U),m||y){u[l]=n.slice(v).map(decodeURIComponent).join(\"/\");break}}else if(t[v]!==n[v]){i=!1;break}return(!0===r.default||!1!==i)&&u}function h(n,t){return n.rank<t.rank?1:n.rank>t.rank?-1:n.index-t.index}function v(n,t){return n.index=t,n.rank=function(n){return n.props.default?0:d(n.props.path).map(l).join(\"\")}(n),n.props}function d(n){return n.replace(/(^\\/+|\\/+$)/g,\"\").split(\"/\")}function l(n){return\":\"==n.charAt(0)?1+\"*+?\".indexOf(n.charAt(n.length-1))||4:5}var p={},m=[],y=[],U=null,g={url:R()},k=n(g);function C(){var n=e(k);if(n===g){var t=u()[1];f(function(){return y.push(t),function(){return y.splice(y.indexOf(t),1)}},[])}return[n,$]}function R(){var n;return\"\"+((n=U&&U.location?U.location:U&&U.getCurrentLocation?U.getCurrentLocation():\"undefined\"!=typeof location?location:p).pathname||\"\")+(n.search||\"\")}function $(n,t){return void 0===t&&(t=!1),\"string\"!=typeof n&&n.url&&(t=n.replace,n=n.url),function(n){for(var t=m.length;t--;)if(m[t].canRoute(n))return!0;return!1}(n)&&function(n,t){void 0===t&&(t=\"push\"),U&&U[t]?U[t](n):\"undefined\"!=typeof history&&history[t+\"State\"]&&history[t+\"State\"](null,null,n)}(n,t?\"replace\":\"push\"),I(n)}function I(n){for(var t=!1,r=0;r<m.length;r++)m[r].routeTo(n)&&(t=!0);return t}function M(n){if(n&&n.getAttribute){var t=n.getAttribute(\"href\"),r=n.getAttribute(\"target\");if(t&&t.match(/^\\//g)&&(!r||r.match(/^_?self$/i)))return $(t)}}function b(n){return n.stopImmediatePropagation&&n.stopImmediatePropagation(),n.stopPropagation&&n.stopPropagation(),n.preventDefault(),!1}function W(n){if(!(n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.button)){var t=n.target;do{if(\"a\"===t.localName&&t.getAttribute(\"href\")){if(t.hasAttribute(\"data-native\")||t.hasAttribute(\"native\"))return;if(M(t))return b(n)}}while(t=t.parentNode)}}var w=!1;function D(n){n.history&&(U=n.history),this.state={url:n.url||R()}}c(D.prototype=new t,{shouldComponentUpdate:function(n){return!0!==n.static||n.url!==this.props.url||n.onChange!==this.props.onChange},canRoute:function(n){var t=r(this.props.children);return void 0!==this.g(t,n)},routeTo:function(n){this.setState({url:n});var t=this.canRoute(n);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var n=this;w||(w=!0,U||addEventListener(\"popstate\",function(){I(R())}),addEventListener(\"click\",W)),m.push(this),U&&(this.u=U.listen(function(t){var r=t.location||t;n.routeTo(\"\"+(r.pathname||\"\")+(r.search||\"\"))})),this.p=!1},componentWillUnmount:function(){\"function\"==typeof this.u&&this.u(),m.splice(m.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(n,t){n=n.filter(v).sort(h);for(var r=0;r<n.length;r++){var i=n[r],o=s(t,i.props.path,i.props);if(o)return[i,o]}},render:function(n,t){var e,u,f=n.onChange,a=t.url,s=this.c,h=this.g(r(n.children),a);if(h&&(u=i(h[0],c(c({url:a,matches:e=h[1]},e),{key:void 0,ref:void 0}))),a!==(s&&s.url)){c(g,s=this.c={url:a,previous:s&&s.url,current:u,path:u?u.props.path:null,matches:e}),s.router=this,s.active=u?[u]:[];for(var v=y.length;v--;)y[v]({});\"function\"==typeof f&&f(s)}return o(k.Provider,{value:s},u)}});var E=function(n){return o(\"a\",c({onClick:W},n))},L=function(n){return o(n.component,n)};export{E as Link,L as Route,D as Router,D as default,s as exec,R as getCurrentUrl,$ as route,C as useRouter};\n//# sourceMappingURL=preact-router.module.js.map\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import{h as a}from\"preact\";import{useRouter as t,exec as r,Link as e}from\"preact-router\";var s=[\"className\",\"activeClass\",\"activeClassName\",\"path\"];function l(a){var e=t()[0];return a.children({url:e.url,path:e.path,matches:!1!==r(e.path||e.url,a.path,{})})}function c(l){var c=l.className,n=l.activeClass,u=l.activeClassName,i=l.path,p=function(a,t){if(null==a)return{};var r,e,s={},l=Object.keys(a);for(e=0;e<l.length;e++)t.indexOf(r=l[e])>=0||(s[r]=a[r]);return s}(l,s),h=t()[0],f=i&&h.path&&r(h.path,i,{})||r(h.url,p.href,{}),o=p.class||c||\"\",m=f&&(n||u)||\"\";return p.class=o+(o&&m&&\" \")+m,a(e,p)}export{c as Link,l as Match,l as default};\n","import { useEffect } from 'preact/hooks'\n\n/**\n * Monitor authentication status on window focus\n */\nexport function useAuthMonitor() {\n  useEffect(() => {\n    // Check auth status when window regains focus\n    const handleFocus = async () => {\n      try {\n        // Simple auth status check\n        const response = await fetch(`${window.location.origin}/auth/status`)\n        \n        if (response.status === 401) {\n          // Prevent redirect loop\n          if (window.location.pathname !== '/auth/login') {\n            console.warn('Session expired, redirecting to login...')\n            window.location.href = '/auth/login'\n          }\n        }\n      } catch (error) {\n        // Ignore network errors on focus check\n        console.debug('Auth check failed on focus:', error)\n      }\n    }\n\n    // Add event listener\n    window.addEventListener('focus', handleFocus)\n\n    // Check immediately on mount\n    handleFocus()\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('focus', handleFocus)\n    }\n  }, [])\n}","import clsx from 'clsx'\nimport type { ComponentChildren } from 'preact'\nimport { Link } from 'preact-router/match'\nimport { useAuthMonitor } from '../hooks/useAuthMonitor'\n\ninterface LayoutProps {\n  children: ComponentChildren\n}\n\nexport function Layout({ children }: LayoutProps) {\n  // Monitor authentication status\n  useAuthMonitor()\n\n  return (\n    <div class=\"min-h-screen bg-gray-50\">\n      <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div class=\"flex justify-between h-16\">\n            <div class=\"flex\">\n              <div class=\"flex-shrink-0 flex items-center\">\n                <h1 class=\"text-xl font-bold text-gray-900\">Vibebase</h1>\n              </div>\n              <div class=\"hidden sm:ml-6 sm:flex sm:space-x-8\">\n                <NavLink href=\"/\">Dashboard</NavLink>\n                <NavLink href=\"/database\">Database</NavLink>\n                <NavLink href=\"/custom-sql\">Custom SQL</NavLink>\n                <NavLink href=\"/storage\">Storage</NavLink>\n                <NavLink href=\"/push\">Push</NavLink>\n                <NavLink href=\"/auth\">Auth</NavLink>\n                <NavLink href=\"/settings\">Settings</NavLink>\n              </div>\n            </div>\n            <div class=\"flex items-center space-x-4\">\n              <a\n                href=\"/api/docs/swagger\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                📚 API Docs\n              </a>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <main class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">{children}</main>\n    </div>\n  )\n}\n\ninterface NavLinkProps {\n  href: string\n  children: ComponentChildren\n}\n\nfunction NavLink({ href, children }: NavLinkProps) {\n  return (\n    <Link\n      {...({ href } as any)}\n      class={clsx(\n        'inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium',\n        'hover:border-gray-300 hover:text-gray-700',\n        'border-transparent text-gray-500'\n      )}\n      activeClassName=\"border-indigo-500 text-gray-900\"\n    >\n      {children}\n    </Link>\n  )\n}\n","const API_BASE = window.location.origin\n\n// Helper function to handle authentication errors\nfunction handleAuthError() {\n  // Prevent redirect loop\n  if (window.location.pathname === '/auth/login') {\n    return\n  }\n  \n  console.warn('Authentication required, redirecting to login...')\n  window.location.href = '/auth/login'\n}\n\n// Enhanced fetch with authentication error handling\nasync function fetchWithAuth(url: string, options: RequestInit = {}): Promise<Response> {\n  const response = await fetch(url, options)\n  \n  // Check for authentication errors\n  if (response.status === 401) {\n    handleAuthError()\n    // Throw error to prevent further processing\n    throw new Error('Authentication required')\n  }\n  \n  return response\n}\n\nexport interface Item {\n  id: string\n  name: string\n  description?: string\n  userId?: string\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface TableInfo {\n  name: string\n  type: 'system' | 'user'\n  sql: string\n  rowCount?: number\n  access_policy?: 'public' | 'private'\n}\n\nexport interface ColumnInfo {\n  cid: number\n  name: string\n  type: string\n  notnull: number\n  dflt_value: any\n  pk: number\n}\n\nexport interface ForeignKeyInfo {\n  from: string\n  table: string\n  to: string\n}\n\nexport interface IndexInfo {\n  name: string\n  tableName: string\n  columns: string[]\n  unique: boolean\n  sql: string\n}\n\nexport interface OAuthProvider {\n  id: string\n  provider: string\n  client_id: string\n  client_secret: string\n  is_enabled: boolean\n  scopes: string[]\n  redirect_uri?: string\n  created_at: string\n  updated_at: string\n}\n\nexport interface SupportedProvider {\n  provider: string\n  name: string\n  default_scopes: string[]\n  setup_instructions: string\n  note?: string\n}\n\nexport interface ApiResponse<T> {\n  data?: T\n  error?: string\n}\n\nexport interface SchemaSnapshot {\n  id: string\n  version: number\n  name?: string\n  description?: string\n  fullSchema: string\n  tablesJson: string\n  schemaHash: string\n  createdAt: string\n  createdBy?: string\n  snapshotType: 'manual' | 'auto' | 'pre_change'\n  d1BookmarkId?: string\n}\n\n// API client functions\nexport const api = {\n  // Health check\n  async health() {\n    const response = await fetchWithAuth(`${API_BASE}/api/health`)\n    return response.json()\n  },\n\n  // Items\n  async getItems(): Promise<{ items: Item[]; total: number; page: number; pageSize: number }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/items`)\n    if (!response.ok) {\n      throw new Error('Failed to fetch items')\n    }\n    return response.json()\n  },\n\n  async createItem(data: { name: string; description?: string }): Promise<Item> {\n    const response = await fetchWithAuth(`${API_BASE}/api/items`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      throw new Error('Failed to create item')\n    }\n    return response.json()\n  },\n\n  async updateItem(id: string, data: { name?: string; description?: string }): Promise<Item> {\n    const response = await fetchWithAuth(`${API_BASE}/api/items/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      throw new Error('Failed to update item')\n    }\n    return response.json()\n  },\n\n  async deleteItem(id: string): Promise<{ success: boolean; id: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/items/${id}`, {\n      method: 'DELETE',\n    })\n    if (!response.ok) {\n      throw new Error('Failed to delete item')\n    }\n    return response.json()\n  },\n\n  // Tables management\n  async getTables(): Promise<{ tables: TableInfo[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables`)\n    if (!response.ok) {\n      throw new Error('Failed to fetch tables')\n    }\n    return response.json()\n  },\n\n  async getTableSchema(\n    tableName: string\n  ): Promise<{ tableName: string; columns: ColumnInfo[]; foreignKeys: ForeignKeyInfo[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/schema`)\n    if (!response.ok) {\n      throw new Error('Failed to fetch table schema')\n    }\n    return response.json()\n  },\n\n  async getTableData(\n    tableName: string,\n    limit = 100,\n    offset = 0\n  ): Promise<{ data: any[]; total: number }> {\n    const response = await fetchWithAuth(\n      `${API_BASE}/api/tables/${tableName}/data?limit=${limit}&offset=${offset}`\n    )\n    if (!response.ok) {\n      throw new Error('Failed to fetch table data')\n    }\n    return response.json()\n  },\n\n  async createTable(\n    name: string,\n    columns: {\n      name: string\n      type: string\n      constraints?: string\n      foreignKey?: { table: string; column: string }\n    }[]\n  ): Promise<{ success: boolean; table: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ name, columns }),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to create table')\n    }\n    return response.json()\n  },\n\n  async dropTable(tableName: string): Promise<{ success: boolean; table: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}`, {\n      method: 'DELETE',\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to drop table')\n    }\n    return response.json()\n  },\n\n  async executeSQL(sql: string, params: any[] = []): Promise<{ result: any }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/query`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ sql, params }),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to execute SQL')\n    }\n    return response.json()\n  },\n\n  // Column management\n  async addColumn(\n    tableName: string,\n    column: {\n      name: string\n      type: string\n      constraints?: string\n      foreignKey?: { table: string; column: string }\n    }\n  ): Promise<{ success: boolean; column: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/columns`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(column),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to add column')\n    }\n    return response.json()\n  },\n\n  async renameColumn(\n    tableName: string,\n    oldName: string,\n    newName: string\n  ): Promise<{ success: boolean; oldName: string; newName: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/columns/${oldName}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ oldName, newName }),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to rename column')\n    }\n    return response.json()\n  },\n\n  async dropColumn(\n    tableName: string,\n    columnName: string\n  ): Promise<{ success: boolean; column: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/columns/${columnName}`, {\n      method: 'DELETE',\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to drop column')\n    }\n    return response.json()\n  },\n\n  async modifyColumn(\n    tableName: string,\n    columnName: string,\n    changes: {\n      type?: string\n      notNull?: boolean\n      foreignKey?: { table: string; column: string } | null\n    }\n  ): Promise<{ success: boolean; column: string; changes: any }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/columns/${columnName}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(changes),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to modify column')\n    }\n    return response.json()\n  },\n\n  async validateColumnChanges(\n    tableName: string,\n    columnName: string,\n    changes: {\n      type?: string\n      notNull?: boolean\n      foreignKey?: { table: string; column: string } | null\n    }\n  ): Promise<{ valid: boolean; errors: string[]; conflictingRows: number }> {\n    const response = await fetchWithAuth(\n      `${API_BASE}/api/tables/${tableName}/columns/${columnName}/validate`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(changes),\n      }\n    )\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to validate column changes')\n    }\n    return response.json()\n  },\n\n  // Record management\n  async updateRecord(\n    tableName: string,\n    id: string,\n    data: Record<string, any>\n  ): Promise<{ success: boolean }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/data/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to update record')\n    }\n    return response.json()\n  },\n\n  // Schema snapshots\n  async getSnapshots(\n    limit = 20,\n    offset = 0\n  ): Promise<{ snapshots: SchemaSnapshot[]; total: number }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots?limit=${limit}&offset=${offset}`)\n    if (!response.ok) {\n      throw new Error('Failed to fetch snapshots')\n    }\n    return response.json()\n  },\n\n  async getSnapshot(id: string): Promise<SchemaSnapshot> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots/${id}`)\n    if (!response.ok) {\n      throw new Error('Failed to fetch snapshot')\n    }\n    return response.json()\n  },\n\n  async createSnapshot(data: {\n    name?: string\n    description?: string\n  }): Promise<{ success: boolean; id: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to create snapshot')\n    }\n    return response.json()\n  },\n\n  async restoreSnapshot(id: string): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots/${id}/restore`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ error: 'Failed to restore snapshot' }))\n      throw new Error(error.error || 'Failed to restore snapshot')\n    }\n\n    return response.json()\n  },\n\n  async deleteSnapshot(id: string): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ error: 'Failed to delete snapshot' }))\n      throw new Error(error.error || 'Failed to delete snapshot')\n    }\n\n    return response.json()\n  },\n\n  async compareSnapshots(id1: string, id2: string): Promise<any> {\n    const response = await fetchWithAuth(`${API_BASE}/api/snapshots/compare/${id1}/${id2}`)\n    if (!response.ok) {\n      throw new Error('Failed to compare snapshots')\n    }\n    return response.json()\n  },\n\n  // Index management\n  async getTableIndexes(tableName: string): Promise<{ indexes: IndexInfo[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/indexes`)\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to fetch table indexes')\n    }\n    return response.json()\n  },\n\n  async getAllIndexes(): Promise<{ indexes: IndexInfo[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/indexes`)\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to fetch all indexes')\n    }\n    return response.json()\n  },\n\n  async createIndex(\n    tableName: string,\n    data: { name: string; columns: string[]; unique?: boolean }\n  ): Promise<{ success: boolean; index: IndexInfo }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/indexes`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to create index')\n    }\n    return response.json()\n  },\n\n  async dropIndex(\n    tableName: string,\n    indexName: string\n  ): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/indexes/${indexName}`, {\n      method: 'DELETE',\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to drop index')\n    }\n    return response.json()\n  },\n\n  // OAuth Provider management\n  async getOAuthProviders(): Promise<{ providers: OAuthProvider[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/providers`)\n    if (!response.ok) {\n      let errorMessage = 'Failed to fetch OAuth providers'\n      try {\n        const error = await response.json()\n        if (error.error === 'Authentication required') {\n          errorMessage = 'Admin authentication required. Please log in to access OAuth settings.'\n        } else {\n          errorMessage = error.error || errorMessage\n        }\n      } catch {\n        // If JSON parsing fails, use default message\n      }\n      throw new Error(errorMessage)\n    }\n    return response.json()\n  },\n\n  async getOAuthProvider(provider: string): Promise<{ provider: OAuthProvider }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/providers/${provider}`)\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to fetch OAuth provider')\n    }\n    return response.json()\n  },\n\n  async updateOAuthProvider(\n    provider: string,\n    data: {\n      client_id: string\n      client_secret: string\n      is_enabled?: boolean\n      scopes?: string[]\n      redirect_uri?: string\n    }\n  ): Promise<{ success: boolean; message: string; provider: any }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/providers/${provider}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to update OAuth provider')\n    }\n    return response.json()\n  },\n\n  async toggleOAuthProvider(\n    provider: string,\n    enabled: boolean\n  ): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/providers/${provider}/toggle`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ is_enabled: enabled }),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to toggle OAuth provider')\n    }\n    return response.json()\n  },\n\n  async deleteOAuthProvider(provider: string): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/providers/${provider}`, {\n      method: 'DELETE',\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to delete OAuth provider')\n    }\n    return response.json()\n  },\n\n  async getSupportedProviders(): Promise<{ supported_providers: SupportedProvider[] }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/admin/oauth/supported-providers`)\n    if (!response.ok) {\n      let errorMessage = 'Failed to fetch supported providers'\n      try {\n        const error = await response.json()\n        if (error.error === 'Authentication required') {\n          errorMessage = 'Admin authentication required. Please log in to access OAuth settings.'\n        } else {\n          errorMessage = error.error || errorMessage\n        }\n      } catch {\n        // If JSON parsing fails, use default message\n      }\n      throw new Error(errorMessage)\n    }\n    return response.json()\n  },\n\n  // Table access policy management\n  async getTablePolicy(\n    tableName: string\n  ): Promise<{ table_name: string; access_policy: 'public' | 'private' | 'system' }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/policy`)\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to get table policy')\n    }\n    return response.json()\n  },\n\n  async updateTablePolicy(\n    tableName: string,\n    policy: 'public' | 'private'\n  ): Promise<{ success: boolean; message: string }> {\n    const response = await fetchWithAuth(`${API_BASE}/api/tables/${tableName}/policy`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ access_policy: policy }),\n    })\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.error || 'Failed to update table policy')\n    }\n    return response.json()\n  },\n}\n","import { useState } from 'preact/hooks'\nimport type { OAuthProvider, SupportedProvider } from '../lib/api'\nimport { api } from '../lib/api'\n\ninterface OAuthProviderCardProps {\n  supportedProvider: SupportedProvider\n  configuredProvider?: OAuthProvider\n  onUpdate: () => void\n}\n\nexport function OAuthProviderCard({\n  supportedProvider,\n  configuredProvider,\n  onUpdate,\n}: OAuthProviderCardProps) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    client_id: configuredProvider?.client_id || '',\n    client_secret: configuredProvider?.client_secret || '',\n    is_enabled: configuredProvider?.is_enabled || false,\n    scopes: configuredProvider?.scopes || supportedProvider.default_scopes,\n  })\n  const [showSecret, setShowSecret] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const isConfigured = !!configuredProvider\n  const isEnabled = configuredProvider?.is_enabled || false\n\n  const handleSave = async () => {\n    if (!formData.client_id || !formData.client_secret) {\n      setError('Client ID and Client Secret are required')\n      return\n    }\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      await api.updateOAuthProvider(supportedProvider.provider, formData)\n      setIsEditing(false)\n      onUpdate()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save provider')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleToggle = async () => {\n    if (!isConfigured) return\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      await api.toggleOAuthProvider(supportedProvider.provider, !isEnabled)\n      onUpdate()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to toggle provider')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDelete = async () => {\n    if (\n      !isConfigured ||\n      !confirm(`Are you sure you want to delete the ${supportedProvider.name} OAuth configuration?`)\n    ) {\n      return\n    }\n\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      await api.deleteOAuthProvider(supportedProvider.provider)\n      onUpdate()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete provider')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const getProviderIcon = (provider: string) => {\n    const iconComponents = {\n      google: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n          <path\n            d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n            fill=\"#4285F4\"\n          />\n          <path\n            d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n            fill=\"#34A853\"\n          />\n          <path\n            d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n            fill=\"#FBBC05\"\n          />\n          <path\n            d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n            fill=\"#EA4335\"\n          />\n        </svg>\n      ),\n      github: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z\" />\n        </svg>\n      ),\n      facebook: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n          <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n        </svg>\n      ),\n      linkedin: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"#0A66C2\">\n          <path d=\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\" />\n        </svg>\n      ),\n      twitter: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\" />\n        </svg>\n      ),\n      apple: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701\" />\n        </svg>\n      ),\n      microsoft: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n          <path d=\"M0 0h11.377v11.372H0z\" fill=\"#F25022\" />\n          <path d=\"M12.623 0H24v11.372H12.623z\" fill=\"#7FBA00\" />\n          <path d=\"M0 12.628h11.377V24H0z\" fill=\"#00A4EF\" />\n          <path d=\"M12.623 12.628H24V24H12.623z\" fill=\"#FFB900\" />\n        </svg>\n      ),\n      discord: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"#5865F2\">\n          <path d=\"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9460 2.4189-2.1568 2.4189Z\" />\n        </svg>\n      ),\n      slack: (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n          <path\n            d=\"M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52h2.52v2.52z\"\n            fill=\"#E01E5A\"\n          />\n          <path\n            d=\"M6.313 15.165a2.527 2.527 0 012.521-2.52 2.527 2.527 0 012.521 2.52v6.313A2.528 2.528 0 018.834 24a2.528 2.528 0 01-2.521-2.522v-6.313z\"\n            fill=\"#E01E5A\"\n          />\n          <path\n            d=\"M8.834 5.042a2.528 2.528 0 01-2.521-2.52A2.528 2.528 0 018.834 0a2.528 2.528 0 012.521 2.522v2.52H8.834z\"\n            fill=\"#36C5F0\"\n          />\n          <path\n            d=\"M8.834 6.313a2.528 2.528 0 012.521 2.521 2.528 2.528 0 01-2.521 2.521H2.522A2.528 2.528 0 010 8.834a2.528 2.528 0 012.522-2.521h6.312z\"\n            fill=\"#36C5F0\"\n          />\n          <path\n            d=\"M18.956 8.834a2.528 2.528 0 012.521-2.521A2.528 2.528 0 0124 8.834a2.528 2.528 0 01-2.523 2.521h-2.521V8.834z\"\n            fill=\"#2EB67D\"\n          />\n          <path\n            d=\"M17.688 8.834a2.528 2.528 0 01-2.523 2.521 2.527 2.527 0 01-2.52-2.521V2.522A2.527 2.527 0 0115.165 0a2.528 2.528 0 012.523 2.522v6.312z\"\n            fill=\"#2EB67D\"\n          />\n          <path\n            d=\"M15.165 18.956a2.528 2.528 0 012.523 2.521A2.528 2.528 0 0115.165 24a2.527 2.527 0 01-2.52-2.523v-2.521h2.52z\"\n            fill=\"#ECB22E\"\n          />\n          <path\n            d=\"M15.165 17.688a2.527 2.527 0 01-2.52-2.523 2.526 2.526 0 012.52-2.52h6.313A2.527 2.527 0 0124 15.165a2.528 2.528 0 01-2.522 2.523h-6.313z\"\n            fill=\"#ECB22E\"\n          />\n        </svg>\n      ),\n    }\n\n    return (\n      iconComponents[provider as keyof typeof iconComponents] || (\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" />\n        </svg>\n      )\n    )\n  }\n\n  return (\n    <div class=\"bg-white border border-gray-200 rounded-lg p-6\">\n      <div class=\"flex items-start justify-between mb-4\">\n        <div class=\"flex items-center gap-3\">\n          <div class=\"w-8 h-8 flex items-center justify-center\">\n            {getProviderIcon(supportedProvider.provider)}\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-gray-900\">{supportedProvider.name}</h3>\n            <div class=\"flex items-center gap-2 mt-1\">\n              <span\n                class={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                  isConfigured\n                    ? isEnabled\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-yellow-100 text-yellow-800'\n                    : 'bg-gray-100 text-gray-800'\n                }`}\n              >\n                {isConfigured ? (isEnabled ? 'Enabled' : 'Disabled') : 'Not Configured'}\n              </span>\n              {supportedProvider.note && (\n                <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                  {supportedProvider.note}\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div class=\"flex items-center gap-2\">\n          {isConfigured && (\n            <button\n              onClick={handleToggle}\n              disabled={isLoading}\n              class={`px-3 py-1 text-sm rounded-md font-medium transition-colors ${\n                isEnabled\n                  ? 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'\n                  : 'bg-green-100 text-green-800 hover:bg-green-200'\n              } disabled:opacity-50`}\n            >\n              {isEnabled ? 'Disable' : 'Enable'}\n            </button>\n          )}\n\n          <button\n            onClick={() => setIsEditing(!isEditing)}\n            disabled={isLoading}\n            class=\"px-3 py-1 text-sm rounded-md font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors disabled:opacity-50\"\n          >\n            {isEditing ? 'Cancel' : isConfigured ? 'Edit' : 'Configure'}\n          </button>\n        </div>\n      </div>\n\n      {error && (\n        <div class=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\">\n          <p class=\"text-sm text-red-600\">{error}</p>\n        </div>\n      )}\n\n      {isEditing ? (\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Client ID</label>\n            <input\n              type=\"text\"\n              value={formData.client_id}\n              onInput={(e) =>\n                setFormData({ ...formData, client_id: (e.target as HTMLInputElement).value })\n              }\n              class=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              placeholder=\"Enter your OAuth Client ID\"\n            />\n          </div>\n\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Client Secret</label>\n            <div class=\"relative\">\n              <input\n                type={showSecret ? 'text' : 'password'}\n                value={formData.client_secret}\n                onInput={(e) =>\n                  setFormData({ ...formData, client_secret: (e.target as HTMLInputElement).value })\n                }\n                class=\"w-full border border-gray-300 rounded-md px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Enter your OAuth Client Secret\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowSecret(!showSecret)}\n                class=\"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600\"\n              >\n                {showSecret ? '👁️' : '👁️‍🗨️'}\n              </button>\n            </div>\n          </div>\n\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Scopes</label>\n            <div class=\"flex flex-wrap gap-2\">\n              {formData.scopes.map((scope, index) => (\n                <span\n                  key={index}\n                  class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\"\n                >\n                  {scope}\n                </span>\n              ))}\n            </div>\n          </div>\n\n          <div class=\"flex items-center gap-3 pt-4\">\n            <button\n              onClick={handleSave}\n              disabled={isLoading}\n              class=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? 'Saving...' : 'Save Configuration'}\n            </button>\n\n            {isConfigured && (\n              <button\n                onClick={handleDelete}\n                disabled={isLoading}\n                class=\"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Delete\n              </button>\n            )}\n          </div>\n        </div>\n      ) : (\n        <div class=\"space-y-3\">\n          <div class=\"text-sm text-gray-600\">\n            <strong>Setup Instructions:</strong>\n            <p class=\"mt-1\">{supportedProvider.setup_instructions}</p>\n          </div>\n\n          <div class=\"text-sm text-gray-600\">\n            <strong>OAuth Callback URL for Provider:</strong>\n            <br />\n            <code class=\"px-2 py-1 bg-gray-100 rounded text-xs\">\n              {window.location.origin}/api/auth/callback/{supportedProvider.provider}\n            </code>\n            <p class=\"mt-1 text-xs text-gray-500\">\n              Use this URL when configuring your OAuth application with the provider. After\n              authentication, users will be redirected to your app based on the callback URLs you\n              configure in your application settings.\n            </p>\n          </div>\n\n          <div class=\"text-sm text-gray-600\">\n            <strong>Default Scopes:</strong>\n            <div class=\"flex flex-wrap gap-1 mt-1\">\n              {supportedProvider.default_scopes.map((scope, index) => (\n                <span\n                  key={index}\n                  class=\"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700\"\n                >\n                  {scope}\n                </span>\n              ))}\n            </div>\n          </div>\n\n          {isConfigured && (\n            <div class=\"pt-2 border-t border-gray-100\">\n              <div class=\"text-sm text-gray-600\">\n                <strong>Status:</strong> Configured and {isEnabled ? 'enabled' : 'disabled'}\n              </div>\n              {configuredProvider && (\n                <div class=\"text-sm text-gray-600 mt-1\">\n                  <strong>Last updated:</strong>{' '}\n                  {new Date(configuredProvider.updated_at).toLocaleDateString()}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport { OAuthProviderCard } from '../components/OAuthProviderCard'\nimport { api, type OAuthProvider, type SupportedProvider } from '../lib/api'\n\nfunction CallbackUrlsSection() {\n  const [callbackUrls, setCallbackUrls] = useState<string[]>([])\n  const [newUrl, setNewUrl] = useState('')\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSaving, setIsSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const loadCallbackUrls = async () => {\n    try {\n      setIsLoading(true)\n      setError(null)\n\n      const response = await fetch('/api/app-settings', {\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to load app settings')\n      }\n\n      const data = await response.json()\n      setCallbackUrls(data.settings.allowed_callback_urls || [])\n    } catch (err) {\n      console.error('Failed to load callback URLs:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load callback URLs')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const saveCallbackUrls = async (urls: string[]) => {\n    try {\n      setIsSaving(true)\n      setError(null)\n\n      const response = await fetch('/api/app-settings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          allowed_callback_urls: urls,\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to save callback URLs')\n      }\n\n      setCallbackUrls(urls)\n    } catch (err) {\n      console.error('Failed to save callback URLs:', err)\n      setError(err instanceof Error ? err.message : 'Failed to save callback URLs')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const addUrl = async () => {\n    if (!newUrl.trim()) return\n\n    const updatedUrls = [...callbackUrls, newUrl.trim()]\n    await saveCallbackUrls(updatedUrls)\n    setNewUrl('')\n  }\n\n  const removeUrl = async (index: number) => {\n    const updatedUrls = callbackUrls.filter((_, i) => i !== index)\n    await saveCallbackUrls(updatedUrls)\n  }\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault()\n      addUrl()\n    }\n  }\n\n  useEffect(() => {\n    loadCallbackUrls()\n  }, [])\n\n  if (isLoading) {\n    return (\n      <div class=\"flex items-center justify-center py-12\">\n        <div class=\"text-gray-500\">Loading callback URLs...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <div class=\"mb-6\">\n        <h3 class=\"text-lg font-semibold text-gray-900\">Allowed Callback URLs</h3>\n        <p class=\"text-gray-600 mt-2\">\n          Configure URLs where users can be redirected after OAuth authentication. Supports web URLs\n          (https://), mobile deep links (myapp://), and localhost for development.\n        </p>\n      </div>\n\n      {error && (\n        <div class=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-md\">\n          <p class=\"text-sm text-red-600\">{error}</p>\n        </div>\n      )}\n\n      {/* Add new URL */}\n      <div class=\"bg-white border border-gray-200 rounded-lg p-6 mb-6\">\n        <h4 class=\"text-md font-medium text-gray-900 mb-4\">Add Callback URL</h4>\n        <div class=\"flex gap-3\">\n          <input\n            type=\"text\"\n            value={newUrl}\n            onInput={(e) => setNewUrl((e.target as HTMLInputElement).value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"https://myapp.com/auth/callback or myapp://auth/callback\"\n            class=\"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n          <button\n            onClick={addUrl}\n            disabled={!newUrl.trim() || isSaving}\n            class=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {isSaving ? 'Adding...' : 'Add URL'}\n          </button>\n        </div>\n      </div>\n\n      {/* URL List */}\n      <div class=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <h4 class=\"text-md font-medium text-gray-900 mb-4\">\n          Configured URLs ({callbackUrls.length})\n        </h4>\n\n        {callbackUrls.length === 0 ? (\n          <div class=\"text-center py-8 text-gray-500\">\n            <p class=\"mb-2\">No callback URLs configured</p>\n            <p class=\"text-sm\">\n              When no URLs are configured, any callback URL will be allowed (for backward\n              compatibility)\n            </p>\n          </div>\n        ) : (\n          <div class=\"space-y-3\">\n            {callbackUrls.map((url, index) => (\n              <div key={index} class=\"flex items-center justify-between p-3 bg-gray-50 rounded-md\">\n                <div class=\"flex-1\">\n                  <code class=\"text-sm text-gray-800\">{url}</code>\n                  <div class=\"text-xs text-gray-500 mt-1\">\n                    {url.startsWith('https://')\n                      ? '🌐 Web App'\n                      : url.startsWith('http://localhost') || url.startsWith('http://127.0.0.1')\n                        ? '🔧 Development'\n                        : url.includes('://')\n                          ? '📱 Mobile/Desktop App'\n                          : '❓ Unknown'}\n                  </div>\n                </div>\n                <button\n                  onClick={() => removeUrl(index)}\n                  disabled={isSaving}\n                  class=\"ml-3 text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50\"\n                >\n                  Remove\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Help Section */}\n      <div class=\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n        <h4 class=\"text-lg font-semibold text-blue-900 mb-3\">URL Format Examples</h4>\n        <div class=\"space-y-2 text-sm text-blue-800\">\n          <p>\n            <strong>Web Applications:</strong> <code>https://myapp.com/auth/callback</code>\n          </p>\n          <p>\n            <strong>Mobile Apps:</strong> <code>myapp://auth/callback</code> or{' '}\n            <code>com.example.myapp://callback</code>\n          </p>\n          <p>\n            <strong>Desktop Apps:</strong> <code>myapp://localhost/callback</code>\n          </p>\n          <p>\n            <strong>Development:</strong> <code>http://localhost:3000/callback</code> or{' '}\n            <code>http://127.0.0.1:8080/auth</code>\n          </p>\n        </div>\n      </div>\n\n      {/* API Usage */}\n      <div class=\"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-6\">\n        <h4 class=\"text-lg font-semibold text-gray-900 mb-3\">API Usage</h4>\n        <div class=\"space-y-2 text-sm font-mono text-gray-700\">\n          <p>\n            <strong>Login with callback:</strong>\n          </p>\n          <code class=\"block bg-white p-2 rounded border\">\n            GET /api/auth/login/google?callback_url=https://myapp.com/auth/callback\n          </code>\n          <p class=\"mt-3\">\n            <strong>The callback response includes:</strong>\n          </p>\n          <code class=\"block bg-white p-2 rounded border text-xs\">\n            {JSON.stringify(\n              {\n                success: true,\n                access_token: '...',\n                refresh_token: '...',\n                user: { id: '...', email: '...', name: '...' },\n                return_url: 'https://myapp.com/auth/callback',\n              },\n              null,\n              2\n            )}\n          </code>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function AuthPage() {\n  const [activeSection, setActiveSection] = useState<'providers' | 'callback-urls'>('providers')\n  const [supportedProviders, setSupportedProviders] = useState<SupportedProvider[]>([])\n  const [configuredProviders, setConfiguredProviders] = useState<OAuthProvider[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  const loadData = async () => {\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      const [supportedResult, configuredResult] = await Promise.all([\n        api.getSupportedProviders(),\n        api.getOAuthProviders(),\n      ])\n\n      setSupportedProviders(supportedResult.supported_providers)\n      setConfiguredProviders(configuredResult.providers)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load OAuth providers')\n      console.error('Error loading OAuth providers:', err)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  const getConfiguredProvider = (providerName: string): OAuthProvider | undefined => {\n    return configuredProviders.find((p) => p.provider === providerName)\n  }\n\n  const enabledCount = configuredProviders.filter((p) => p.is_enabled).length\n  const configuredCount = configuredProviders.length\n\n  if (isLoading) {\n    return (\n      <div>\n        <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Authentication</h2>\n        <div class=\"flex items-center justify-center py-12\">\n          <div class=\"text-gray-500\">Loading OAuth providers...</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Authentication</h2>\n\n      <div class=\"flex gap-6\">\n        {/* Navigation Sidebar */}\n        <div class=\"w-64 flex-shrink-0\">\n          <nav class=\"space-y-1\">\n            <button\n              onClick={() => setActiveSection('providers')}\n              class={`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                activeSection === 'providers'\n                  ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              OAuth Providers\n            </button>\n            <button\n              onClick={() => setActiveSection('callback-urls')}\n              class={`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                activeSection === 'callback-urls'\n                  ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              Callback URLs\n            </button>\n          </nav>\n        </div>\n\n        {/* Main Content */}\n        <div class=\"flex-1 min-w-0\">\n          {activeSection === 'providers' && (\n            <div>\n              <div class=\"mb-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900\">OAuth Providers</h3>\n                <p class=\"text-gray-600 mt-2\">\n                  Configure OAuth providers to enable user authentication in your applications\n                </p>\n              </div>\n\n              {error && (\n                <div class=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-md\">\n                  <p class=\"text-sm text-red-600\">{error}</p>\n                  {error.includes('authentication required') ? (\n                    <div class=\"mt-3\">\n                      <p class=\"text-sm text-red-700 mb-2\">\n                        You need to log in as an administrator to manage OAuth settings.\n                      </p>\n                      <a\n                        href=\"/\"\n                        class=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                      >\n                        Go to Dashboard\n                      </a>\n                    </div>\n                  ) : (\n                    <button\n                      onClick={loadData}\n                      class=\"mt-2 text-sm text-red-700 hover:text-red-800 underline\"\n                    >\n                      Try again\n                    </button>\n                  )}\n                </div>\n              )}\n\n              {/* Stats */}\n              <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n                <div class=\"bg-white border border-gray-200 rounded-lg p-4\">\n                  <div class=\"text-2xl font-bold text-gray-900\">{supportedProviders.length}</div>\n                  <div class=\"text-sm text-gray-600\">Supported Providers</div>\n                </div>\n                <div class=\"bg-white border border-gray-200 rounded-lg p-4\">\n                  <div class=\"text-2xl font-bold text-blue-600\">{configuredCount}</div>\n                  <div class=\"text-sm text-gray-600\">Configured</div>\n                </div>\n                <div class=\"bg-white border border-gray-200 rounded-lg p-4\">\n                  <div class=\"text-2xl font-bold text-green-600\">{enabledCount}</div>\n                  <div class=\"text-sm text-gray-600\">Enabled</div>\n                </div>\n              </div>\n\n              {/* Provider Cards */}\n              <div class=\"space-y-6\">\n                {supportedProviders.map((supportedProvider) => (\n                  <OAuthProviderCard\n                    key={supportedProvider.provider}\n                    supportedProvider={supportedProvider}\n                    configuredProvider={getConfiguredProvider(supportedProvider.provider)}\n                    onUpdate={loadData}\n                  />\n                ))}\n              </div>\n\n              {/* Help Section */}\n              <div class=\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                <h3 class=\"text-lg font-semibold text-blue-900 mb-3\">Getting Started</h3>\n                <div class=\"space-y-2 text-sm text-blue-800\">\n                  <p>\n                    1. <strong>Choose a provider:</strong> Click \"Configure\" on any OAuth provider\n                    you want to enable\n                  </p>\n                  <p>\n                    2. <strong>Create OAuth app:</strong> Follow the setup instructions to create an\n                    OAuth application\n                  </p>\n                  <p>\n                    3. <strong>Configure credentials:</strong> Enter your Client ID and Client\n                    Secret\n                  </p>\n                  <p>\n                    4. <strong>Enable provider:</strong> Toggle the provider to \"Enabled\" status\n                  </p>\n                  <p>\n                    5. <strong>Test authentication:</strong> Users can now authenticate with this\n                    provider\n                  </p>\n                </div>\n              </div>\n\n              {/* API Endpoints */}\n              <div class=\"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Authentication Endpoints</h3>\n                <div class=\"space-y-2 text-sm font-mono text-gray-700\">\n                  <div>\n                    <strong>Available providers:</strong> <code>GET /api/auth/providers</code>\n                  </div>\n                  <div>\n                    <strong>Start authentication:</strong>{' '}\n                    <code>GET /api/auth/login/{'{{provider}}'}</code>\n                  </div>\n                  <div>\n                    <strong>OAuth callback:</strong>{' '}\n                    <code>GET /api/auth/callback/{'{{provider}}'}</code>\n                  </div>\n                  <div>\n                    <strong>Get user info:</strong> <code>GET /api/auth/me</code>\n                  </div>\n                  <div>\n                    <strong>Refresh token:</strong> <code>POST /api/auth/refresh</code>\n                  </div>\n                  <div>\n                    <strong>Logout:</strong> <code>POST /api/auth/logout</code>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeSection === 'callback-urls' && <CallbackUrlsSection />}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useState } from 'preact/hooks'\n\ninterface Parameter {\n  name: string\n  type: 'string' | 'number' | 'boolean' | 'date'\n  required: boolean\n  description?: string\n  default?: string | number | boolean\n}\n\ninterface CustomQuery {\n  id: string\n  slug: string\n  name: string\n  description?: string\n  sql_query: string\n  parameters: Parameter[]\n  method: 'GET' | 'POST'\n  is_readonly: boolean\n  cache_ttl: number\n  enabled: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport function CustomSQL() {\n  const [queries, setQueries] = useState<CustomQuery[]>([])\n  const [selectedQuery, setSelectedQuery] = useState<CustomQuery | null>(null)\n  const [isCreating, setIsCreating] = useState(false)\n  const [isEditing, setIsEditing] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({})\n\n  // Form state\n  const [formData, setFormData] = useState({\n    slug: '',\n    name: '',\n    description: '',\n    sql_query: '',\n    parameters: [] as Parameter[],\n    cache_ttl: 0,\n    enabled: true,\n  })\n\n  // Auto-generate slug from name (proven algorithm)\n  const generateSlugFromName = (name: string): string => {\n    if (!name.trim()) {\n      return Date.now().toString(36).slice(-8).padStart(8, '0')\n    }\n\n    // Create a seed based on the string content and length\n    let seed = name.length + 1000 // Add offset to avoid small numbers\n\n    for (let i = 0; i < name.length; i++) {\n      const char = name.charCodeAt(i)\n      seed = seed * 31 + char // Classic polynomial rolling hash\n      seed = seed & 0x7fffffff // Keep positive\n    }\n\n    // Generate 8 characters using a simple PRNG approach\n    let result = ''\n    let rng = seed\n\n    for (let i = 0; i < 8; i++) {\n      // Linear congruential generator\n      rng = (rng * 1664525 + 1013904223) & 0x7fffffff\n      const digit = rng % 36\n      result += digit.toString(36)\n    }\n\n    return result\n  }\n\n  // Extract parameters from SQL query\n  const extractParametersFromSQL = (sql: string): Parameter[] => {\n    const paramRegex = /:(\\w+)/g\n    const matches = new Set<string>()\n    let match\n\n    while ((match = paramRegex.exec(sql)) !== null) {\n      matches.add(match[1])\n    }\n\n    return Array.from(matches).map((paramName) => ({\n      name: paramName,\n      type: 'string' as const,\n      required: true,\n      description: '',\n    }))\n  }\n\n  // Determine HTTP method and readonly status based on SQL\n  const determineMethodAndReadonly = (sql: string) => {\n    const trimmedSql = sql.trim().toLowerCase()\n    const isSelect = trimmedSql.startsWith('select')\n    const isPragma = trimmedSql.includes('pragma')\n\n    return {\n      method: isSelect ? 'GET' : 'POST',\n      readonly: isSelect || isPragma,\n    }\n  }\n\n  // Validate form data\n  const validateForm = () => {\n    const errors: Record<string, string> = {}\n\n    // Required field validation\n    if (!formData.name.trim()) {\n      errors.name = 'クエリ名は必須です'\n    }\n\n    if (!formData.slug.trim()) {\n      errors.slug = 'スラッグは必須です'\n    } else if (!/^[a-z0-9_-]+$/.test(formData.slug)) {\n      errors.slug = 'スラッグは小文字の英数字、ハイフン、アンダースコアのみ使用できます'\n    }\n\n    if (!formData.sql_query.trim()) {\n      errors.sql_query = 'SQLクエリは必須です'\n    } else {\n      // Check if SQL contains parameters that are not defined\n      const paramRegex = /:(\\w+)/g\n      const sqlParams = new Set<string>()\n      let match\n      while ((match = paramRegex.exec(formData.sql_query)) !== null) {\n        sqlParams.add(match[1])\n      }\n\n      const definedParams = new Set(formData.parameters.map((p) => p.name))\n      const undefinedParams = Array.from(sqlParams).filter((p) => !definedParams.has(p))\n\n      if (undefinedParams.length > 0) {\n        errors.sql_query = `SQLに未定義のパラメーターが含まれています: ${undefinedParams.join(', ')}`\n      }\n    }\n\n    // Parameter validation\n    formData.parameters.forEach((param, index) => {\n      if (!param.name.trim()) {\n        errors[`parameter_${index}_name`] = 'パラメーター名は必須です'\n      } else if (!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(param.name)) {\n        errors[`parameter_${index}_name`] =\n          'パラメーター名は英文字またはアンダースコアで始まり、英数字とアンダースコアのみ使用できます'\n      }\n    })\n\n    setValidationErrors(errors)\n    return Object.keys(errors).length === 0\n  }\n\n  // Test execution state\n  const [testParams, setTestParams] = useState<Record<string, unknown>>({})\n  const [testResult, setTestResult] = useState<{\n    data: unknown[]\n    row_count: number\n    execution_time: number\n  } | null>(null)\n  const [testError, setTestError] = useState<string | null>(null)\n  const [testing, setTesting] = useState(false)\n\n  useEffect(() => {\n    fetchQueries()\n  }, [])\n\n  const fetchQueries = async () => {\n    try {\n      const res = await fetch('/api/custom-queries')\n      if (!res.ok) throw new Error('Failed to fetch queries')\n      const data = await res.json()\n      setQueries(data.queries)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch queries')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreate = async () => {\n    // Clear previous errors\n    setError(null)\n    setValidationErrors({})\n\n    // Validate form\n    if (!validateForm()) {\n      return\n    }\n\n    try {\n      const res = await fetch('/api/custom-queries', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      })\n\n      if (!res.ok) {\n        const data = await res.json()\n        const errorMessage = data.error || 'Failed to create query'\n\n        // Handle specific validation errors from server\n        if (errorMessage.includes('slug already exists')) {\n          setValidationErrors({ slug: 'このスラッグは既に使用されています' })\n          return\n        }\n\n        throw new Error(errorMessage)\n      }\n\n      await fetchQueries()\n      setIsCreating(false)\n      resetForm()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create query')\n    }\n  }\n\n  const handleUpdate = async () => {\n    if (!selectedQuery) return\n\n    // Clear previous errors\n    setError(null)\n    setValidationErrors({})\n\n    // Validate form\n    if (!validateForm()) {\n      return\n    }\n\n    try {\n      const res = await fetch(`/api/custom-queries/${selectedQuery.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      })\n\n      if (!res.ok) {\n        const data = await res.json()\n        const errorMessage = data.error || 'Failed to update query'\n\n        // Handle specific validation errors from server\n        if (errorMessage.includes('slug already exists')) {\n          setValidationErrors({ slug: 'このスラッグは既に使用されています' })\n          return\n        }\n\n        throw new Error(errorMessage)\n      }\n\n      await fetchQueries()\n      setIsEditing(false)\n      setSelectedQuery(null)\n      resetForm()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update query')\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this query?')) return\n\n    try {\n      const res = await fetch(`/api/custom-queries/${id}`, {\n        method: 'DELETE',\n      })\n\n      if (!res.ok) throw new Error('Failed to delete query')\n\n      await fetchQueries()\n      if (selectedQuery?.id === id) {\n        setSelectedQuery(null)\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete query')\n    }\n  }\n\n  const handleTest = async () => {\n    if (!selectedQuery) return\n\n    setTesting(true)\n    setTestResult(null)\n    setTestError(null)\n\n    try {\n      const res = await fetch(`/api/custom-queries/${selectedQuery.id}/test`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ parameters: testParams }),\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || 'Failed to test query')\n      }\n\n      setTestResult(data)\n    } catch (err) {\n      setTestError(err instanceof Error ? err.message : 'Failed to test query')\n    } finally {\n      setTesting(false)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      slug: '',\n      name: '',\n      description: '',\n      sql_query: '',\n      parameters: [],\n      cache_ttl: 0,\n      enabled: true,\n    })\n    setValidationErrors({})\n    setError(null)\n  }\n\n  const addParameter = () => {\n    setFormData({\n      ...formData,\n      parameters: [...formData.parameters, { name: '', type: 'string', required: false }],\n    })\n  }\n\n  const removeParameter = (index: number) => {\n    setFormData({\n      ...formData,\n      parameters: formData.parameters.filter((_, i) => i !== index),\n    })\n  }\n\n  const updateParameter = (index: number, param: Partial<Parameter>) => {\n    setFormData({\n      ...formData,\n      parameters: formData.parameters.map((p, i) => (i === index ? { ...p, ...param } : p)),\n    })\n    // Clear validation error for this parameter name field\n    if (param.name !== undefined) {\n      const errorKey = `parameter_${index}_name`\n      if (validationErrors[errorKey]) {\n        setValidationErrors((prev) => {\n          const newErrors = { ...prev }\n          delete newErrors[errorKey]\n          return newErrors\n        })\n      }\n    }\n  }\n\n  if (loading) {\n    return (\n      <div class=\"flex justify-center items-center h-64\">\n        <div class=\"text-gray-500\">Loading custom queries...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div class=\"space-y-6\">\n      <div class=\"flex justify-between items-center\">\n        <h2 class=\"text-2xl font-bold text-gray-900\">Custom SQL APIs</h2>\n        <button\n          onClick={() => setIsCreating(true)}\n          class=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n        >\n          Create Query\n        </button>\n      </div>\n\n      {error && (\n        <div class=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">{error}</div>\n      )}\n\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Query List */}\n        <div class=\"bg-white shadow rounded-lg p-6\">\n          <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Queries</h3>\n          <div class=\"space-y-2\">\n            {queries.length === 0 ? (\n              <p class=\"text-gray-500\">No custom queries yet</p>\n            ) : (\n              queries.map((query) => (\n                <div\n                  key={query.id}\n                  class={`p-3 border rounded cursor-pointer hover:bg-gray-50 ${\n                    selectedQuery?.id === query.id\n                      ? 'border-indigo-500 bg-indigo-50'\n                      : 'border-gray-200'\n                  }`}\n                  onClick={() => {\n                    // Parse parameters if they're stored as JSON string\n                    const parsedQuery = {\n                      ...query,\n                      parameters:\n                        typeof query.parameters === 'string'\n                          ? JSON.parse(query.parameters || '[]')\n                          : query.parameters || [],\n                    }\n                    setSelectedQuery(parsedQuery)\n                    setTestParams({})\n                    setTestResult(null)\n                    setTestError(null)\n                  }}\n                >\n                  <div class=\"flex justify-between items-start\">\n                    <div>\n                      <h4 class=\"font-medium text-gray-900\">{query.name}</h4>\n                      <p class=\"text-sm text-gray-500\">/{query.slug}</p>\n                      <div class=\"flex gap-2 mt-1\">\n                        <span\n                          class={`text-xs px-2 py-1 rounded ${\n                            query.method === 'GET'\n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-blue-100 text-blue-800'\n                          }`}\n                        >\n                          {query.method}\n                        </span>\n                        <span\n                          class={`text-xs px-2 py-1 rounded ${\n                            query.enabled\n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-gray-100 text-gray-800'\n                          }`}\n                        >\n                          {query.enabled ? 'Enabled' : 'Disabled'}\n                        </span>\n                        {query.is_readonly && (\n                          <span class=\"text-xs px-2 py-1 rounded bg-gray-100 text-gray-800\">\n                            Read-only\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div class=\"flex gap-2\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          setSelectedQuery(query)\n                          setFormData({\n                            slug: query.slug,\n                            name: query.name,\n                            description: query.description || '',\n                            sql_query: query.sql_query,\n                            parameters: query.parameters || [],\n                            cache_ttl: query.cache_ttl,\n                            enabled: Boolean(query.enabled),\n                          })\n                          setIsEditing(true)\n                        }}\n                        class=\"text-indigo-600 hover:text-indigo-800\"\n                      >\n                        Edit\n                      </button>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleDelete(query.id)\n                        }}\n                        class=\"text-red-600 hover:text-red-800\"\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Query Details / Test */}\n        <div class=\"bg-white shadow rounded-lg p-6\">\n          {selectedQuery ? (\n            <div class=\"space-y-4\">\n              <div>\n                <h3 class=\"text-lg font-medium text-gray-900\">{selectedQuery.name}</h3>\n                {selectedQuery.description && (\n                  <p class=\"text-gray-600 mt-1\">{selectedQuery.description}</p>\n                )}\n                <p class=\"text-sm text-gray-500 mt-2\">\n                  Endpoint:{' '}\n                  <code class=\"bg-gray-100 px-1 py-0.5 rounded\">\n                    {selectedQuery.method} /api/custom/{selectedQuery.slug}\n                  </code>\n                </p>\n              </div>\n\n              <div>\n                <h4 class=\"font-medium text-gray-900 mb-2\">SQL Query</h4>\n                <pre class=\"bg-gray-50 p-3 rounded text-sm overflow-x-auto\">\n                  {selectedQuery.sql_query}\n                </pre>\n              </div>\n\n              {selectedQuery.parameters &&\n                Array.isArray(selectedQuery.parameters) &&\n                selectedQuery.parameters.length > 0 && (\n                  <div>\n                    <h4 class=\"font-medium text-gray-900 mb-2\">Parameters</h4>\n                    <div class=\"space-y-2\">\n                      {selectedQuery.parameters.map((param) => (\n                        <div key={param.name} class=\"flex items-center gap-2\">\n                          <label class=\"text-sm font-medium text-gray-700 w-32\">\n                            {param.name}\n                            {param.required && <span class=\"text-red-500\">*</span>}\n                          </label>\n                          <input\n                            type={param.type === 'number' ? 'number' : 'text'}\n                            value={(testParams[param.name] as string) || ''}\n                            onChange={(e) =>\n                              setTestParams({\n                                ...testParams,\n                                [param.name]: e.currentTarget.value,\n                              })\n                            }\n                            placeholder={param.default ? `Default: ${param.default}` : ''}\n                            class=\"flex-1 px-3 py-1 border border-gray-300 rounded-md\"\n                          />\n                          <span class=\"text-xs text-gray-500\">{param.type}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n              <button\n                onClick={handleTest}\n                disabled={testing}\n                class=\"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50\"\n              >\n                {testing ? 'Testing...' : 'Test Query'}\n              </button>\n\n              {testError && (\n                <div class=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n                  {testError}\n                </div>\n              )}\n\n              {testResult && (\n                <div>\n                  <h4 class=\"font-medium text-gray-900 mb-2\">Test Results</h4>\n                  <div class=\"text-sm text-gray-600 mb-2\">\n                    Rows: {testResult.row_count} | Time: {testResult.execution_time}ms\n                  </div>\n                  <div class=\"bg-gray-50 p-3 rounded overflow-x-auto\">\n                    <pre class=\"text-sm\">{JSON.stringify(testResult.data, null, 2)}</pre>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div class=\"text-center text-gray-500\">Select a query to view details</div>\n          )}\n        </div>\n      </div>\n\n      {/* Create/Edit Modal */}\n      {(isCreating || isEditing) && (\n        <div class=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\">\n          <div class=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\n            <h3 class=\"text-lg font-medium text-gray-900 mb-4\">\n              {isCreating ? 'Create Custom Query' : 'Edit Custom Query'}\n            </h3>\n\n            {error && (\n              <div class=\"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\n                {error}\n              </div>\n            )}\n\n            <div class=\"space-y-4\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700\">Name</label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => {\n                    const newName = e.currentTarget.value\n                    setFormData({\n                      ...formData,\n                      name: newName,\n                      // Auto-generate slug when creating new query, but preserve manual changes when editing\n                      slug: isCreating ? generateSlugFromName(newName) : formData.slug,\n                    })\n                    // Clear validation errors for name and slug (if slug is auto-generated)\n                    setValidationErrors((prev) => {\n                      const newErrors = { ...prev }\n                      delete newErrors.name\n                      if (isCreating) {\n                        delete newErrors.slug // Clear slug error when auto-generating\n                      }\n                      return newErrors\n                    })\n                  }}\n                  class={`mt-1 w-full px-3 py-2 border rounded-md ${\n                    validationErrors.name ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                  }`}\n                />\n                {validationErrors.name && (\n                  <p class=\"mt-1 text-sm text-red-600\">{validationErrors.name}</p>\n                )}\n              </div>\n\n              <div>\n                <div class=\"flex justify-between items-center\">\n                  <label class=\"block text-sm font-medium text-gray-700\">\n                    Slug\n                    <span class=\"text-xs text-gray-500\">(auto-generated, but editable)</span>\n                  </label>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setFormData({ ...formData, slug: generateSlugFromName(formData.name) })\n                      // Clear slug validation error when regenerating\n                      setValidationErrors((prev) => {\n                        const { slug, ...rest } = prev\n                        return rest\n                      })\n                    }}\n                    class=\"text-xs text-indigo-600 hover:text-indigo-800\"\n                  >\n                    Re-generate from name\n                  </button>\n                </div>\n                <input\n                  type=\"text\"\n                  value={formData.slug}\n                  onChange={(e) => {\n                    setFormData({ ...formData, slug: e.currentTarget.value })\n                    // Clear validation error for this field\n                    if (validationErrors.slug) {\n                      setValidationErrors((prev) => {\n                        const { slug, ...rest } = prev\n                        return rest\n                      })\n                    }\n                  }}\n                  placeholder=\"lowercase-with-hyphens\"\n                  class={`mt-1 w-full px-3 py-2 border rounded-md ${\n                    validationErrors.slug ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                  }`}\n                />\n                {validationErrors.slug && (\n                  <p class=\"mt-1 text-sm text-red-600\">{validationErrors.slug}</p>\n                )}\n                <p class=\"mt-1 text-sm text-gray-500\">\n                  This will be the API endpoint: /api/custom/{formData.slug || 'a1b2c3d4'}\n                </p>\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700\">Description</label>\n                <input\n                  type=\"text\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.currentTarget.value })}\n                  class=\"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md\"\n                />\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700\">SQL Query</label>\n                <textarea\n                  value={formData.sql_query}\n                  onChange={(e) => {\n                    const newSql = e.currentTarget.value\n                    const extractedParams = extractParametersFromSQL(newSql)\n\n                    // Merge with existing parameters, preserving manual edits\n                    const existingParamNames = new Set(formData.parameters.map((p) => p.name))\n                    const newParams = [\n                      ...formData.parameters.filter((p) => newSql.includes(`:${p.name}`)), // Keep params still used in SQL\n                      ...extractedParams.filter((p) => !existingParamNames.has(p.name)), // Add new params\n                    ]\n\n                    setFormData({\n                      ...formData,\n                      sql_query: newSql,\n                      parameters: newParams,\n                    })\n                    // Clear validation error for this field\n                    if (validationErrors.sql_query) {\n                      setValidationErrors((prev) => {\n                        const { sql_query, ...rest } = prev\n                        return rest\n                      })\n                    }\n                  }}\n                  rows={6}\n                  placeholder=\"SELECT * FROM users WHERE created_at > :start_date\"\n                  class={`mt-1 w-full px-3 py-2 border rounded-md font-mono text-sm ${\n                    validationErrors.sql_query ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                  }`}\n                />\n                {validationErrors.sql_query && (\n                  <p class=\"mt-1 text-sm text-red-600\">{validationErrors.sql_query}</p>\n                )}\n                <div class=\"mt-2 flex justify-between items-center\">\n                  <p class=\"text-sm text-gray-500\">\n                    Use :parameter_name for parameters (will be auto-detected)\n                  </p>\n                  {formData.sql_query && (\n                    <div class=\"flex gap-2\">\n                      <span\n                        class={`px-2 py-1 rounded text-xs ${\n                          determineMethodAndReadonly(formData.sql_query).method === 'GET'\n                            ? 'bg-green-100 text-green-800'\n                            : 'bg-blue-100 text-blue-800'\n                        }`}\n                      >\n                        {determineMethodAndReadonly(formData.sql_query).method}\n                      </span>\n                      {determineMethodAndReadonly(formData.sql_query).readonly && (\n                        <span class=\"px-2 py-1 rounded text-xs bg-gray-100 text-gray-800\">\n                          Read-only\n                        </span>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <div class=\"flex justify-between items-center mb-2\">\n                  <label class=\"block text-sm font-medium text-gray-700\">\n                    Parameters\n                    {formData.parameters.length > 0 && (\n                      <span class=\"text-xs text-gray-500 ml-1\">\n                        ({formData.parameters.length} detected)\n                      </span>\n                    )}\n                  </label>\n                  <button\n                    type=\"button\"\n                    onClick={addParameter}\n                    class=\"text-sm text-indigo-600 hover:text-indigo-800\"\n                  >\n                    Add Parameter\n                  </button>\n                </div>\n\n                {formData.parameters.length === 0 ? (\n                  <div class=\"text-sm text-gray-500 bg-gray-50 p-3 rounded border-2 border-dashed border-gray-200\">\n                    No parameters detected. Use :param_name in your SQL query to automatically add\n                    parameters here.\n                  </div>\n                ) : (\n                  formData.parameters.map((param, index) => (\n                    <div key={index} class=\"mb-3\">\n                      <div class=\"flex gap-2 mb-1\">\n                        <input\n                          type=\"text\"\n                          value={param.name}\n                          onChange={(e) => updateParameter(index, { name: e.currentTarget.value })}\n                          placeholder=\"param_name\"\n                          class={`flex-1 px-3 py-1 border rounded-md text-sm ${\n                            validationErrors[`parameter_${index}_name`]\n                              ? 'border-red-500 bg-red-50'\n                              : 'border-gray-300'\n                          }`}\n                        />\n                        <select\n                          value={param.type}\n                          onChange={(e) =>\n                            updateParameter(index, {\n                              type: e.currentTarget.value as Parameter['type'],\n                            })\n                          }\n                          class=\"px-3 py-1 border border-gray-300 rounded-md text-sm\"\n                        >\n                          <option value=\"string\">String</option>\n                          <option value=\"number\">Number</option>\n                          <option value=\"boolean\">Boolean</option>\n                          <option value=\"date\">Date</option>\n                        </select>\n                        <label class=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={param.required}\n                            onChange={(e) =>\n                              updateParameter(index, { required: e.currentTarget.checked })\n                            }\n                            class=\"mr-1\"\n                          />\n                          <span class=\"text-sm\">Required</span>\n                        </label>\n                        <button\n                          type=\"button\"\n                          onClick={() => removeParameter(index)}\n                          class=\"text-red-600 hover:text-red-800 text-sm\"\n                        >\n                          Remove\n                        </button>\n                      </div>\n                      {validationErrors[`parameter_${index}_name`] && (\n                        <p class=\"text-xs text-red-600 ml-1\">\n                          {validationErrors[`parameter_${index}_name`]}\n                        </p>\n                      )}\n                    </div>\n                  ))\n                )}\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700\">Cache TTL (seconds)</label>\n                <input\n                  type=\"number\"\n                  value={formData.cache_ttl}\n                  onChange={(e) =>\n                    setFormData({ ...formData, cache_ttl: parseInt(e.currentTarget.value) || 0 })\n                  }\n                  class=\"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md\"\n                />\n              </div>\n\n              <div>\n                <label class=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.enabled}\n                    onChange={(e) => setFormData({ ...formData, enabled: e.currentTarget.checked })}\n                    class=\"mr-2\"\n                  />\n                  <span class=\"text-sm font-medium text-gray-700\">Enabled</span>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"flex justify-end gap-2 mt-6\">\n              <button\n                onClick={() => {\n                  setIsCreating(false)\n                  setIsEditing(false)\n                  resetForm()\n                }}\n                class=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={isCreating ? handleCreate : handleUpdate}\n                class=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n              >\n                {isCreating ? 'Create' : 'Update'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport { api, type SchemaSnapshot } from '../lib/api'\n\ninterface SchemaHistoryProps {\n  onClose: () => void\n  onRestore?: () => void\n}\n\n// Spinner component\nfunction Spinner({ size = 'sm' }: { size?: 'sm' | 'md' }) {\n  const sizeClasses = size === 'sm' ? 'h-4 w-4' : 'h-6 w-6'\n  return (\n    <svg class={`animate-spin ${sizeClasses} text-white`} fill=\"none\" viewBox=\"0 0 24 24\">\n      <circle\n        class=\"opacity-25\"\n        cx=\"12\"\n        cy=\"12\"\n        r=\"10\"\n        stroke=\"currentColor\"\n        strokeWidth=\"4\"\n      ></circle>\n      <path\n        class=\"opacity-75\"\n        fill=\"currentColor\"\n        d=\"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n      ></path>\n    </svg>\n  )\n}\n\nexport function SchemaHistory({ onClose, onRestore }: SchemaHistoryProps) {\n  const [snapshots, setSnapshots] = useState<SchemaSnapshot[]>([])\n  const [selectedSnapshot, setSelectedSnapshot] = useState<SchemaSnapshot | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [newSnapshot, setNewSnapshot] = useState({ name: '', description: '' })\n  const [confirmRestore, setConfirmRestore] = useState<string | null>(null)\n  const [confirmDelete, setConfirmDelete] = useState<string | null>(null)\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null)\n  const [isCreating, setIsCreating] = useState(false)\n  const [isRestoring, setIsRestoring] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (openMenuId) {\n        const target = event.target as Element\n        // Don't close if clicking inside the menu or on menu buttons\n        if (!target.closest('[data-menu-container]') && !target.closest('[data-menu-button]')) {\n          setOpenMenuId(null)\n        }\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [openMenuId])\n\n  const loadData = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n\n      const result = await api.getSnapshots()\n      setSnapshots(result.snapshots)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateSnapshot = async (e: Event) => {\n    e.preventDefault()\n    try {\n      setError(null)\n      setIsCreating(true)\n      await api.createSnapshot(newSnapshot)\n      setShowCreateForm(false)\n      setNewSnapshot({ name: '', description: '' })\n      await loadData()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create snapshot')\n    } finally {\n      setIsCreating(false)\n    }\n  }\n\n  const handleRestore = async () => {\n    if (!confirmRestore) return\n\n    try {\n      setError(null)\n      setIsRestoring(true)\n      await api.restoreSnapshot(confirmRestore)\n      setConfirmRestore(null)\n      if (onRestore) onRestore()\n      onClose()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to restore')\n      setConfirmRestore(null)\n    } finally {\n      setIsRestoring(false)\n    }\n  }\n\n  const handleDelete = async () => {\n    if (!confirmDelete) return\n\n    try {\n      setError(null)\n      setIsDeleting(true)\n      await api.deleteSnapshot(confirmDelete)\n      setConfirmDelete(null)\n      setOpenMenuId(null)\n      await loadData()\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete snapshot')\n      setConfirmDelete(null)\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    // All dates are now in ISO format with timezone info\n    const date = new Date(dateString)\n\n    return date.toLocaleString(undefined, {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: false,\n      timeZoneName: 'short',\n    })\n  }\n\n  const getRelativeTime = (dateString: string) => {\n    const date = new Date(dateString)\n    const now = new Date()\n    const diff = now.getTime() - date.getTime()\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n\n    if (days > 0) return `${days} day${days > 1 ? 's' : ''} ago`\n    if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ago`\n    return 'Just now'\n  }\n\n  return (\n    <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div class=\"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden flex flex-col\">\n        {/* Header */}\n        <div class=\"px-6 py-4 border-b flex items-center justify-between\">\n          <h2 class=\"text-xl font-semibold text-gray-900\">Schema Snapshots</h2>\n          <button onClick={onClose} class=\"text-gray-400 hover:text-gray-600\">\n            <svg class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div class=\"mx-6 mt-4 bg-red-50 border border-red-200 rounded-md p-4\">\n            <div class=\"text-sm text-red-700\">{error}</div>\n          </div>\n        )}\n\n        {/* Time Travel Info Box */}\n        <div class=\"mx-6 mt-4 bg-blue-50 border border-blue-200 rounded-md p-4\">\n          <div class=\"flex\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"h-5 w-5 text-blue-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n            </div>\n            <div class=\"ml-3\">\n              <h3 class=\"text-sm font-medium text-blue-800\">\n                💡 CloudflareのTime Travel機能について\n              </h3>\n              <p class=\"mt-1 text-sm text-blue-700\">\n                Cloudflareの管理画面から、D1データベースを過去の任意の時点（無料プランで7日間、有料プランで30日間）に復元できるTime\n                Travel機能が利用可能です。 詳しくは\n                <a\n                  href=\"https://developers.cloudflare.com/d1/reference/time-travel/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  class=\"font-medium underline hover:no-underline\"\n                >\n                  Cloudflare D1 Time Travelドキュメント\n                </a>\n                をご確認ください。\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div class=\"flex-1 overflow-auto p-6\">\n          {loading ? (\n            <div class=\"text-center py-8\">\n              <div class=\"text-gray-500\">Loading...</div>\n            </div>\n          ) : (\n            <div>\n              {/* Create Snapshot Button */}\n              {!showCreateForm && (\n                <div class=\"mb-6\">\n                  <button\n                    onClick={() => setShowCreateForm(true)}\n                    class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                  >\n                    <svg class=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M12 4v16m8-8H4\"\n                      />\n                    </svg>\n                    Create Snapshot\n                  </button>\n                </div>\n              )}\n\n              {/* Create Snapshot Form */}\n              {showCreateForm && (\n                <div class=\"mb-6 bg-gray-50 rounded-lg p-4\">\n                  <h3 class=\"text-sm font-medium text-gray-900 mb-3\">Create New Snapshot</h3>\n                  <form onSubmit={handleCreateSnapshot}>\n                    <div class=\"space-y-3\">\n                      <div>\n                        <label class=\"block text-sm font-medium text-gray-700\">Name</label>\n                        <input\n                          type=\"text\"\n                          value={newSnapshot.name}\n                          onInput={(e) =>\n                            setNewSnapshot({\n                              ...newSnapshot,\n                              name: (e.target as HTMLInputElement).value,\n                            })\n                          }\n                          class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                          placeholder=\"e.g., Before major refactoring\"\n                        />\n                      </div>\n                      <div>\n                        <label class=\"block text-sm font-medium text-gray-700\">Description</label>\n                        <textarea\n                          value={newSnapshot.description}\n                          onInput={(e) =>\n                            setNewSnapshot({\n                              ...newSnapshot,\n                              description: (e.target as HTMLTextAreaElement).value,\n                            })\n                          }\n                          class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                          rows={2}\n                          placeholder=\"Optional description of current state\"\n                        />\n                      </div>\n                      <div class=\"flex space-x-3\">\n                        <button\n                          type=\"submit\"\n                          disabled={isCreating}\n                          class={`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${\n                            isCreating\n                              ? 'bg-indigo-400 cursor-not-allowed'\n                              : 'bg-indigo-600 hover:bg-indigo-700'\n                          }`}\n                        >\n                          {isCreating && <Spinner size=\"sm\" />}\n                          <span>{isCreating ? 'Creating...' : 'Create'}</span>\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setShowCreateForm(false)\n                            setNewSnapshot({ name: '', description: '' })\n                          }}\n                          class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              )}\n\n              {/* Snapshots List */}\n              <div class=\"space-y-3\">\n                {snapshots.length === 0 ? (\n                  <div class=\"text-center py-8 text-gray-500\">\n                    No snapshots yet. Create your first snapshot to start tracking schema changes.\n                  </div>\n                ) : (\n                  snapshots.map((snapshot) => (\n                    <div\n                      key={snapshot.id}\n                      class={`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${\n                        selectedSnapshot?.id === snapshot.id\n                          ? 'border-indigo-500 bg-indigo-50'\n                          : 'border-gray-200'\n                      }`}\n                      onClick={() => setSelectedSnapshot(snapshot)}\n                    >\n                      <div class=\"flex items-start justify-between\">\n                        <div class=\"flex-1\">\n                          <div class=\"flex items-center space-x-3\">\n                            <h4 class=\"text-sm font-medium text-gray-900\">\n                              {snapshot.name || `Snapshot v${snapshot.version}`}\n                            </h4>\n                            <span\n                              class={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                                snapshot.snapshotType === 'manual'\n                                  ? 'bg-blue-100 text-blue-800'\n                                  : snapshot.snapshotType === 'auto'\n                                    ? 'bg-green-100 text-green-800'\n                                    : 'bg-yellow-100 text-yellow-800'\n                              }`}\n                            >\n                              {snapshot.snapshotType}\n                            </span>\n                          </div>\n                          {snapshot.description && (\n                            <p class=\"mt-1 text-sm text-gray-600\">{snapshot.description}</p>\n                          )}\n                          <div class=\"mt-2 flex items-center space-x-4 text-xs text-gray-500\">\n                            <span>Version {snapshot.version}</span>\n                            <span>{formatDate(snapshot.createdAt)}</span>\n                            <span>{getRelativeTime(snapshot.createdAt)}</span>\n                          </div>\n                        </div>\n                        <div class=\"ml-4 flex items-center space-x-2\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              setConfirmRestore(snapshot.id)\n                            }}\n                            class=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                          >\n                            Restore\n                          </button>\n\n                          <div class=\"relative\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                setOpenMenuId(openMenuId === snapshot.id ? null : snapshot.id)\n                              }}\n                              data-menu-button=\"true\"\n                              class=\"inline-flex items-center p-1.5 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 rounded-md\"\n                            >\n                              <svg class=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\n                              </svg>\n                            </button>\n\n                            {/* Dropdown Menu */}\n                            {openMenuId === snapshot.id && (\n                              <div\n                                class=\"absolute right-0 top-full mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10\"\n                                data-menu-container=\"true\"\n                              >\n                                <div class=\"py-1\">\n                                  <button\n                                    onClick={(e) => {\n                                      e.preventDefault()\n                                      e.stopPropagation()\n                                      setOpenMenuId(null)\n                                      setConfirmDelete(snapshot.id)\n                                    }}\n                                    class=\"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 focus:outline-none\"\n                                  >\n                                    <div class=\"flex items-center space-x-2\">\n                                      <svg\n                                        class=\"h-4 w-4\"\n                                        fill=\"none\"\n                                        viewBox=\"0 0 24 24\"\n                                        stroke=\"currentColor\"\n                                      >\n                                        <path\n                                          stroke-linecap=\"round\"\n                                          stroke-linejoin=\"round\"\n                                          stroke-width=\"2\"\n                                          d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                                        />\n                                      </svg>\n                                      <span>Delete</span>\n                                    </div>\n                                  </button>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Restore Confirmation Modal */}\n        {confirmRestore && (\n          <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n              <div class=\"flex items-center mb-4\">\n                <div class=\"flex-shrink-0\">\n                  <svg\n                    class=\"h-6 w-6 text-red-600\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                    />\n                  </svg>\n                </div>\n                <div class=\"ml-3\">\n                  <h3 class=\"text-lg font-medium text-gray-900\">Confirm Restore</h3>\n                </div>\n              </div>\n\n              <div class=\"mb-6\">\n                <p class=\"text-sm text-gray-700\">\n                  This will restore your database schema to the selected snapshot. All current\n                  tables and data will be replaced.\n                </p>\n                <p class=\"text-sm text-red-600 mt-2 font-medium\">\n                  This action cannot be undone. Make sure you have a backup of your current data.\n                </p>\n              </div>\n\n              <div class=\"flex space-x-3\">\n                <button\n                  onClick={handleRestore}\n                  disabled={isRestoring}\n                  class={`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${\n                    isRestoring ? 'bg-red-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700'\n                  }`}\n                >\n                  {isRestoring && <Spinner size=\"sm\" />}\n                  <span>{isRestoring ? 'Restoring...' : 'Restore'}</span>\n                </button>\n                <button\n                  onClick={() => setConfirmRestore(null)}\n                  disabled={isRestoring}\n                  class={`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${\n                    isRestoring\n                      ? 'text-gray-400 bg-gray-100 cursor-not-allowed'\n                      : 'text-gray-700 bg-white hover:bg-gray-50'\n                  }`}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Delete Confirmation Modal */}\n        {confirmDelete && (\n          <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n              <div class=\"flex items-center mb-4\">\n                <div class=\"flex-shrink-0\">\n                  <svg\n                    class=\"h-6 w-6 text-red-600\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                    />\n                  </svg>\n                </div>\n                <div class=\"ml-3\">\n                  <h3 class=\"text-lg font-medium text-gray-900\">Delete Snapshot</h3>\n                </div>\n              </div>\n\n              <div class=\"mb-6\">\n                <p class=\"text-sm text-gray-700\">\n                  Are you sure you want to delete this snapshot? This action cannot be undone.\n                </p>\n              </div>\n\n              <div class=\"flex space-x-3\">\n                <button\n                  onClick={handleDelete}\n                  disabled={isDeleting}\n                  class={`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${\n                    isDeleting ? 'bg-red-400 cursor-not-allowed' : 'bg-red-600 hover:bg-red-700'\n                  }`}\n                >\n                  {isDeleting && <Spinner size=\"sm\" />}\n                  <span>{isDeleting ? 'Deleting...' : 'Delete'}</span>\n                </button>\n                <button\n                  onClick={() => setConfirmDelete(null)}\n                  disabled={isDeleting}\n                  class={`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${\n                    isDeleting\n                      ? 'text-gray-400 bg-gray-100 cursor-not-allowed'\n                      : 'text-gray-700 bg-white hover:bg-gray-50'\n                  }`}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport { SchemaHistory } from '../components/SchemaHistory'\nimport { api, type ForeignKeyInfo, type IndexInfo, type TableInfo } from '../lib/api'\n\n// Utility function to truncate IDs\nconst truncateId = (id: string | null): string => {\n  if (!id) return '-'\n  return id.length > 8 ? `${id.substring(0, 4)}...` : id\n}\n\n// System tables that should not be available for FK references\n// NOTE: Keep this in sync with SYSTEM_TABLES in packages/core/src/lib/table-manager.ts\nconst SYSTEM_TABLES = [\n  'admins',\n  'sessions',\n  'schema_snapshots',\n  'schema_snapshot_counter',\n  'd1_migrations',\n  'api_keys',\n  'user_sessions',\n  'oauth_providers',\n  'app_settings',\n  'table_policies',\n]\n\n// Filter out system tables for FK references\nconst getUserTables = (tables: TableInfo[]): TableInfo[] => {\n  return tables.filter((table) => !SYSTEM_TABLES.includes(table.name))\n}\n\n// Generate default index name\nconst generateIndexName = (tableName: string, columns: string[]): string => {\n  const columnPart = columns.filter((col) => col.trim() !== '').join('_')\n  return `idx_${tableName}_${columnPart}`.toLowerCase()\n}\n\n// Copy to clipboard utility\nconst copyToClipboard = async (text: string): Promise<boolean> => {\n  try {\n    await navigator.clipboard.writeText(text)\n    return true\n  } catch (_err) {\n    // Fallback for older browsers\n    try {\n      const textArea = document.createElement('textarea')\n      textArea.value = text\n      document.body.appendChild(textArea)\n      textArea.focus()\n      textArea.select()\n      const result = document.execCommand('copy')\n      document.body.removeChild(textArea)\n      return result\n    } catch (fallbackErr) {\n      console.error('Failed to copy to clipboard:', fallbackErr)\n      return false\n    }\n  }\n}\n\nexport function DatabasePage() {\n  const [tables, setTables] = useState<TableInfo[]>([])\n  const [selectedTable, setSelectedTable] = useState<string | null>(null)\n  const [tableData, setTableData] = useState<any[]>([])\n  const [tableColumns, setTableColumns] = useState<any[]>([])\n  const [tableForeignKeys, setTableForeignKeys] = useState<ForeignKeyInfo[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [showCreateTableForm, setShowCreateTableForm] = useState(false)\n  const [newRecord, setNewRecord] = useState<Record<string, any>>({})\n  const [newTable, setNewTable] = useState({\n    name: '',\n    columns: [\n      {\n        name: '',\n        type: 'TEXT',\n        notNull: false,\n        foreignKey: { enabled: false, table: '', column: '' },\n      },\n    ],\n    indexes: [] as { name: string; columns: string[]; unique: boolean }[],\n  })\n  const [openDropdownTable, setOpenDropdownTable] = useState<string | null>(null)\n  const [copiedCell, setCopiedCell] = useState<string | null>(null)\n  const [showSchemaEditor, setShowSchemaEditor] = useState(false)\n  const [newColumn, setNewColumn] = useState({\n    name: '',\n    type: 'TEXT',\n    notNull: false,\n    foreignKey: { enabled: false, table: '', column: '' },\n  })\n  const [editingColumn, setEditingColumn] = useState<{ oldName: string; newName: string } | null>(\n    null\n  )\n  const [modifyingColumn, setModifyingColumn] = useState<{\n    name: string\n    type: string\n    notNull: boolean\n    foreignKey: { enabled: boolean; table: string; column: string }\n  } | null>(null)\n  const [validationWarning, setValidationWarning] = useState<{\n    errors: string[]\n    conflictingRows: number\n    onConfirm: () => void\n  } | null>(null)\n  const [confirmationModal, setConfirmationModal] = useState<{\n    title: string\n    message: string\n    onConfirm: () => void\n    variant?: 'danger' | 'warning'\n  } | null>(null)\n  const [editingCell, setEditingCell] = useState<{\n    rowId: string\n    columnName: string\n    value: any\n  } | null>(null)\n  const [editingRecord, setEditingRecord] = useState<{\n    id: string\n    data: Record<string, any>\n  } | null>(null)\n  const [clickCount, setClickCount] = useState<{\n    [key: string]: { count: number; timeout: number }\n  }>({})\n  const [fkValidation, setFkValidation] = useState<{\n    [key: string]: { isValid: boolean; isChecking: boolean; displayName?: string }\n  }>({})\n  const editInputRef = useRef<HTMLInputElement | null>(null)\n  const hasInitializedFocus = useRef(false)\n  const [showSchemaHistory, setShowSchemaHistory] = useState(false)\n  const [tableIndexes, setTableIndexes] = useState<IndexInfo[]>([])\n  const [showIndexManager, setShowIndexManager] = useState(false)\n  const [newIndex, setNewIndex] = useState({\n    name: '',\n    columns: [''],\n    unique: false,\n  })\n  const [changingPolicy, setChangingPolicy] = useState<string | null>(null)\n\n  // Update index name when columns change\n  useEffect(() => {\n    if (selectedTable && newIndex.columns.some((col) => col.trim() !== '')) {\n      const defaultName = generateIndexName(selectedTable, newIndex.columns)\n      setNewIndex((prev) => ({ ...prev, name: defaultName }))\n    }\n  }, [selectedTable, newIndex.columns])\n\n  // Format date from SQLite DATETIME to user timezone\n  const formatDateTime = (dateString: string) => {\n    if (!dateString) return '-'\n    // All dates are now in ISO format with timezone info\n    const date = new Date(dateString)\n    return date.toLocaleString(undefined, {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: false,\n      timeZoneName: 'short',\n    })\n  }\n\n  useEffect(() => {\n    loadTables()\n  }, [])\n\n  useEffect(() => {\n    if (selectedTable) {\n      loadTableData()\n      loadTableSchema()\n      // Close any open forms when switching tables\n      setShowCreateForm(false)\n      setShowCreateTableForm(false)\n      setShowSchemaEditor(false)\n    }\n  }, [selectedTable])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setOpenDropdownTable(null)\n    }\n    document.addEventListener('click', handleClickOutside)\n    return () => document.removeEventListener('click', handleClickOutside)\n  }, [])\n\n  const loadTables = async () => {\n    try {\n      setLoading(true)\n      const result = await api.getTables()\n      setTables(result.tables)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load tables')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadTableSchema = async () => {\n    if (!selectedTable) return\n    try {\n      const result = await api.getTableSchema(selectedTable)\n      setTableColumns(result.columns)\n      setTableForeignKeys(result.foreignKeys || [])\n\n      // Load table indexes\n      const indexResult = await api.getTableIndexes(selectedTable)\n      setTableIndexes(indexResult.indexes)\n\n      // Initialize new record with empty values for each column\n      const initialRecord: Record<string, any> = {}\n      result.columns.forEach((col) => {\n        if (!['id', 'created_at', 'updated_at'].includes(col.name)) {\n          initialRecord[col.name] = ''\n        }\n      })\n      setNewRecord(initialRecord)\n    } catch (err) {\n      console.error('Failed to load table schema:', err)\n    }\n  }\n\n  const loadTableData = async () => {\n    if (!selectedTable) return\n    try {\n      setLoading(true)\n      const result = await api.getTableData(selectedTable)\n      setTableData(result.data)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load table data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateRecord = async (e: Event) => {\n    e.preventDefault()\n    if (!selectedTable) return\n\n    try {\n      // Convert empty strings to null for proper constraint checking\n      const recordToSend = Object.fromEntries(\n        Object.entries(newRecord).map(([key, value]) => [key, value === '' ? null : value])\n      )\n\n      console.log('Sending record data:', recordToSend)\n\n      const response = await fetch(`${window.location.origin}/api/tables/${selectedTable}/data`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(recordToSend),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || `HTTP ${response.status}: Failed to create record`)\n      }\n\n      await loadTableData()\n      setShowCreateForm(false)\n      setError(null) // Clear any previous errors\n      // Reset form will happen when schema reloads\n    } catch (err) {\n      console.error('Create record error:', err)\n      if (err instanceof Error) {\n        // Make error messages more user-friendly\n        let userFriendlyMessage = err.message\n\n        // Handle common constraint errors\n        if (err.message.includes('FOREIGN KEY constraint failed')) {\n          userFriendlyMessage =\n            'Foreign key constraint failed: The referenced record does not exist'\n        } else if (err.message.includes('NOT NULL constraint failed')) {\n          const match = err.message.match(/NOT NULL constraint failed: (\\w+)\\.(\\w+)/)\n          if (match) {\n            userFriendlyMessage = `Required field \"${match[2]}\" cannot be empty`\n          } else {\n            userFriendlyMessage = 'A required field cannot be empty'\n          }\n        } else if (err.message.includes('UNIQUE constraint failed')) {\n          const match = err.message.match(/UNIQUE constraint failed: (\\w+)\\.(\\w+)/)\n          if (match) {\n            userFriendlyMessage = `Value for \"${match[2]}\" must be unique`\n          } else {\n            userFriendlyMessage = 'This value must be unique'\n          }\n        }\n\n        setError(userFriendlyMessage)\n      } else {\n        setError('Failed to create record')\n      }\n    }\n  }\n\n  const handleDeleteRecord = async (id: string) => {\n    if (!selectedTable) return\n\n    setConfirmationModal({\n      title: 'Delete Record',\n      message: 'Are you sure you want to delete this record? This action cannot be undone.',\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmationModal(null)\n        try {\n          await fetch(`${window.location.origin}/api/tables/${selectedTable}/data/${id}`, {\n            method: 'DELETE',\n          })\n          await loadTableData()\n        } catch (err) {\n          setError(err instanceof Error ? err.message : 'Failed to delete record')\n        }\n      },\n    })\n  }\n\n  const handleCreateTable = async (e: Event) => {\n    e.preventDefault()\n\n    try {\n      const columnsToCreate = newTable.columns\n        .filter((col) => col.name)\n        .map((col) => ({\n          name: col.name,\n          type: col.type,\n          constraints: col.notNull ? 'NOT NULL' : undefined,\n          ...(col.foreignKey?.enabled && col.foreignKey?.table && col.foreignKey?.column\n            ? { foreignKey: { table: col.foreignKey.table, column: col.foreignKey.column } }\n            : {}),\n        }))\n\n      console.log('Creating table:', newTable.name, 'with columns:', columnsToCreate)\n      await api.createTable(newTable.name, columnsToCreate)\n\n      // Create indexes if specified\n      for (const index of newTable.indexes) {\n        if (\n          index.name &&\n          index.columns.length > 0 &&\n          index.columns.some((col) => col.trim() !== '')\n        ) {\n          try {\n            await api.createIndex(newTable.name, {\n              name: index.name,\n              columns: index.columns.filter((col) => col.trim() !== ''),\n              unique: index.unique,\n            })\n          } catch (indexError) {\n            console.warn('Failed to create index:', indexError)\n            // Continue with other indexes\n          }\n        }\n      }\n\n      await loadTables()\n      setShowCreateTableForm(false)\n      setNewTable({\n        name: '',\n        columns: [\n          {\n            name: '',\n            type: 'TEXT',\n            notNull: false,\n            foreignKey: { enabled: false, table: '', column: '' },\n          },\n        ],\n        indexes: [],\n      })\n      setError(null) // Clear any previous errors\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create table')\n    }\n  }\n\n  const handleDropTable = async (tableName: string) => {\n    setConfirmationModal({\n      title: 'Drop Table',\n      message: `Are you sure you want to drop the table \"${tableName}\"? This action cannot be undone.`,\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmationModal(null)\n        try {\n          await api.dropTable(tableName)\n          await loadTables()\n          if (selectedTable === tableName) {\n            setSelectedTable(null)\n            setTableData([])\n          }\n        } catch (err) {\n          setError(err instanceof Error ? err.message : 'Failed to drop table')\n        }\n      },\n    })\n  }\n\n  const handleChangeAccessPolicy = async (tableName: string, newPolicy: 'public' | 'private') => {\n    try {\n      setChangingPolicy(tableName)\n      await api.updateTablePolicy(tableName, newPolicy)\n\n      // Update the local state to reflect the change\n      setTables((prevTables) =>\n        prevTables.map((table) =>\n          table.name === tableName ? { ...table, access_policy: newPolicy } : table\n        )\n      )\n\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update table policy')\n    } finally {\n      setChangingPolicy(null)\n    }\n  }\n\n  const handleCopyId = async (id: string, rowIndex: number, columnName: string) => {\n    const success = await copyToClipboard(id)\n    if (success) {\n      const cellKey = `${rowIndex}-${columnName}`\n      setCopiedCell(cellKey)\n      setTimeout(() => setCopiedCell(null), 2000) // Clear after 2 seconds\n    }\n  }\n\n  const handleIdClick = async (\n    event: MouseEvent,\n    id: string,\n    rowIndex: number,\n    columnName: string\n  ) => {\n    if (event.metaKey || event.ctrlKey) {\n      // Cmd+Click (Mac) or Ctrl+Click (Windows): Jump to record with this ID\n      await jumpToRecord(id, columnName)\n    } else {\n      // Regular click: Copy to clipboard\n      await handleCopyId(id, rowIndex, columnName)\n    }\n  }\n\n  const jumpToRecord = async (id: string, columnName: string) => {\n    // Find which table this ID references\n    const referencingTable = await findTableWithId(id, columnName)\n    if (referencingTable) {\n      setSelectedTable(referencingTable)\n      // Scroll to the record after table loads\n      setTimeout(() => {\n        const element = document.querySelector(`[data-record-id=\"${id}\"]`)\n        if (element) {\n          element.scrollIntoView({ behavior: 'smooth', block: 'center' })\n          // Highlight the record temporarily\n          element.classList.add('bg-yellow-100')\n          setTimeout(() => element.classList.remove('bg-yellow-100'), 2000)\n        }\n      }, 500)\n    }\n  }\n\n  const findTableWithId = async (id: string, columnName: string): Promise<string | null> => {\n    // If the column name ends with '_id', try to find the referenced table\n    if (columnName.endsWith('_id')) {\n      const baseTableName = `${columnName.replace('_id', '')}s` // user_id -> users\n      const table = tables.find((t) => t.name === baseTableName)\n      if (table) return table.name\n    }\n\n    // Fallback: search through all tables for a record with this ID\n    for (const table of tables) {\n      try {\n        const result = await api.getTableData(table.name, 1, 0)\n        const hasRecord = result.data.some((record) => record.id === id)\n        if (hasRecord) return table.name\n      } catch (_error) {\n        // Continue searching other tables\n      }\n    }\n\n    return null\n  }\n\n  const handleAddColumn = async (e: Event) => {\n    e.preventDefault()\n    if (!selectedTable) return\n\n    try {\n      const columnData = {\n        name: newColumn.name,\n        type: newColumn.type,\n        constraints: newColumn.notNull ? 'NOT NULL' : undefined,\n        ...(newColumn.foreignKey?.enabled &&\n        newColumn.foreignKey?.table &&\n        newColumn.foreignKey?.column\n          ? {\n              foreignKey: {\n                table: newColumn.foreignKey.table,\n                column: newColumn.foreignKey.column,\n              },\n            }\n          : {}),\n      }\n\n      await api.addColumn(selectedTable, columnData)\n      await loadTableSchema()\n      setNewColumn({\n        name: '',\n        type: 'TEXT',\n        notNull: false,\n        foreignKey: { enabled: false, table: '', column: '' },\n      })\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add column')\n    }\n  }\n\n  const handleRenameColumn = async (oldName: string, newName: string) => {\n    if (!selectedTable || !newName || oldName === newName) return\n\n    try {\n      await api.renameColumn(selectedTable, oldName, newName)\n      await loadTableSchema()\n      setEditingColumn(null)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to rename column')\n    }\n  }\n\n  const handleDropColumn = async (columnName: string) => {\n    if (!selectedTable) return\n\n    setConfirmationModal({\n      title: 'Drop Column',\n      message: `Are you sure you want to drop the column \"${columnName}\"? This action cannot be undone.`,\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmationModal(null)\n        try {\n          await api.dropColumn(selectedTable, columnName)\n          await loadTableSchema()\n          setError(null)\n        } catch (err) {\n          setError(err instanceof Error ? err.message : 'Failed to drop column')\n        }\n      },\n    })\n  }\n\n  const handleModifyColumn = async (\n    columnName: string,\n    changes: {\n      type?: string\n      notNull?: boolean\n      foreignKey?: { table: string; column: string } | null\n    }\n  ) => {\n    if (!selectedTable) return\n\n    try {\n      // Validate changes first\n      const validation = await api.validateColumnChanges(selectedTable, columnName, changes)\n\n      if (!validation.valid) {\n        // Show validation warning modal instead of browser alert\n        setValidationWarning({\n          errors: validation.errors,\n          conflictingRows: validation.conflictingRows,\n          onConfirm: async () => {\n            setValidationWarning(null)\n            try {\n              await api.modifyColumn(selectedTable, columnName, changes)\n              await loadTableSchema()\n              setModifyingColumn(null)\n              setError(null)\n            } catch (err) {\n              setError(err instanceof Error ? err.message : 'Failed to modify column')\n            }\n          },\n        })\n        return\n      }\n\n      await api.modifyColumn(selectedTable, columnName, changes)\n      await loadTableSchema()\n      setModifyingColumn(null)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to modify column')\n    }\n  }\n\n  // Helper function to get foreign key info for a column\n  const getForeignKeyForColumn = (columnName: string): ForeignKeyInfo | null => {\n    return tableForeignKeys.find((fk) => fk.from === columnName) || null\n  }\n\n  // Validate FK reference\n  const validateForeignKey = async (value: string, fkInfo: ForeignKeyInfo) => {\n    if (!value.trim()) return null\n\n    const validationKey = `${fkInfo.table}-${value}`\n    setFkValidation((prev) => ({ ...prev, [validationKey]: { isValid: false, isChecking: true } }))\n\n    try {\n      // Check if the ID exists in the referenced table\n      const result = await api.getTableData(fkInfo.table)\n      const exists = result.data.some((record) => record.id === value)\n\n      setFkValidation((prev) => ({\n        ...prev,\n        [validationKey]: {\n          isValid: exists,\n          isChecking: false,\n          displayName: exists ? `Valid ID in ${fkInfo.table}` : `ID not found in ${fkInfo.table}`,\n        },\n      }))\n\n      return exists\n    } catch (_err) {\n      setFkValidation((prev) => ({\n        ...prev,\n        [validationKey]: {\n          isValid: false,\n          isChecking: false,\n          displayName: `Error checking ${fkInfo.table}`,\n        },\n      }))\n      return false\n    }\n  }\n\n  // Handle inline cell editing\n  const handleCellDoubleClick = (rowId: string, columnName: string, currentValue: any) => {\n    // Don't allow editing of system columns\n    if (['id', 'created_at', 'updated_at'].includes(columnName)) {\n      return\n    }\n\n    // Check if it's a simple field that can be edited inline\n    const column = tableColumns.find((col) => col.name === columnName)\n    const hasFK = getForeignKeyForColumn(columnName)\n\n    if (hasFK || !column) {\n      // Open modal for FK references or complex fields\n      const record = tableData.find((row) => row.id === rowId)\n      if (record) {\n        setEditingRecord({ id: rowId, data: { ...record } })\n      }\n    } else {\n      // Inline editing for simple fields\n      hasInitializedFocus.current = false // Reset focus flag\n      setEditingCell({ rowId, columnName, value: currentValue })\n    }\n  }\n\n  // Save inline cell edit\n  const handleCellSave = async (rowId: string, columnName: string, newValue: any) => {\n    if (!selectedTable) return\n\n    // 編集状態を先にクリアしてチカチカを防ぐ\n    setEditingCell(null)\n\n    // ローカルでデータを即座に更新（楽観的更新）\n    setTableData((prevData) =>\n      prevData.map((row) => (row.id === rowId ? { ...row, [columnName]: newValue } : row))\n    )\n\n    try {\n      await api.updateRecord(selectedTable, rowId, { [columnName]: newValue })\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update record')\n      // エラーの場合は編集状態を復元し、データを元に戻す\n      setEditingCell({ rowId, columnName, value: newValue })\n      // データも元に戻す\n      await loadTableData()\n    }\n  }\n\n  // Cancel inline cell edit\n  const handleCellCancel = () => {\n    setEditingCell(null)\n  }\n\n  // Handle record edit via modal\n  const handleRecordSave = async () => {\n    if (!selectedTable || !editingRecord) return\n\n    try {\n      // Remove system fields from update data\n      const updateData = { ...editingRecord.data }\n      delete updateData.id\n      delete updateData.created_at\n      delete updateData.updated_at\n\n      await api.updateRecord(selectedTable, editingRecord.id, updateData)\n      await loadTableData()\n      setEditingRecord(null)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update record')\n    }\n  }\n\n  // Index management functions\n  const handleCreateIndex = async (e: Event) => {\n    e.preventDefault()\n    if (!selectedTable) return\n\n    try {\n      const columnsToIndex = newIndex.columns.filter((col) => col.trim() !== '')\n      if (columnsToIndex.length === 0) {\n        setError('At least one column is required for the index')\n        return\n      }\n\n      await api.createIndex(selectedTable, {\n        name: newIndex.name,\n        columns: columnsToIndex,\n        unique: newIndex.unique,\n      })\n\n      await loadTableSchema()\n      setNewIndex({ name: '', columns: [''], unique: false })\n      setShowIndexManager(false)\n      setError(null)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create index')\n    }\n  }\n\n  const handleDropIndex = async (indexName: string) => {\n    if (!selectedTable) return\n\n    setConfirmationModal({\n      title: 'Drop Index',\n      message: `Are you sure you want to drop the index \"${indexName}\"? This action cannot be undone.`,\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmationModal(null)\n        try {\n          await api.dropIndex(selectedTable, indexName)\n          await loadTableSchema()\n          setError(null)\n        } catch (err) {\n          setError(err instanceof Error ? err.message : 'Failed to drop index')\n        }\n      },\n    })\n  }\n\n  const userTables = tables.filter((t) => t.type === 'user')\n  const systemTables = tables.filter((t) => t.type === 'system')\n\n  return (\n    <div>\n      <div class=\"sm:flex sm:items-center\">\n        <div class=\"sm:flex-auto\">\n          <h2 class=\"text-2xl font-bold text-gray-900\">Database</h2>\n          <p class=\"mt-2 text-sm text-gray-700\">Manage your D1 database tables and data</p>\n        </div>\n        <div class=\"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex space-x-3\">\n          <button\n            type=\"button\"\n            onClick={() => setShowSchemaHistory(true)}\n            class=\"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto\"\n          >\n            <svg class=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n            History\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setShowCreateTableForm(true)}\n            class=\"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto\"\n          >\n            Create Table\n          </button>\n        </div>\n      </div>\n\n      {error && !showCreateForm && (\n        <div class=\"mt-4 bg-red-50 border border-red-200 rounded-md p-4\">\n          <div class=\"text-sm text-red-700\">{error}</div>\n          <button\n            onClick={() => setError(null)}\n            class=\"mt-2 text-xs text-red-600 hover:text-red-500\"\n          >\n            Dismiss\n          </button>\n        </div>\n      )}\n\n      {showCreateTableForm && (\n        <div class=\"mt-6 bg-white shadow rounded-lg p-6\">\n          <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Create New Table</h3>\n          <form onSubmit={handleCreateTable}>\n            <div class=\"mb-4\">\n              <label class=\"block text-sm font-medium text-gray-700\">Table Name</label>\n              <input\n                type=\"text\"\n                value={newTable.name}\n                onInput={(e) =>\n                  setNewTable({ ...newTable, name: (e.target as HTMLInputElement).value })\n                }\n                class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                placeholder=\"my_table\"\n                pattern=\"[a-zA-Z_][a-zA-Z0-9_]*\"\n                required\n              />\n            </div>\n\n            <div class=\"mb-4\">\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Columns</label>\n              <div class=\"space-y-2\">\n                {newTable.columns.map((col, idx) => (\n                  <div key={idx}>\n                    <div class=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={col.name}\n                        onInput={(e) => {\n                          const newColumns = [...newTable.columns]\n                          newColumns[idx].name = (e.target as HTMLInputElement).value\n                          setNewTable({ ...newTable, columns: newColumns })\n                        }}\n                        class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                        placeholder=\"column_name\"\n                        pattern=\"[a-zA-Z_][a-zA-Z0-9_]*\"\n                      />\n                      <select\n                        value={col.type}\n                        onChange={(e) => {\n                          const newColumns = [...newTable.columns]\n                          newColumns[idx].type = (e.target as HTMLSelectElement).value\n                          setNewTable({ ...newTable, columns: newColumns })\n                        }}\n                        class=\"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                      >\n                        <option value=\"TEXT\">TEXT</option>\n                        <option value=\"INTEGER\">INTEGER</option>\n                        <option value=\"REAL\">REAL</option>\n                        <option value=\"BLOB\">BLOB</option>\n                        <option value=\"BOOLEAN\">BOOLEAN</option>\n                      </select>\n\n                      {/* NOT NULL Toggle */}\n                      <label class=\"flex items-center space-x-1\">\n                        <input\n                          type=\"checkbox\"\n                          checked={col.notNull || false}\n                          onChange={(e) => {\n                            const newColumns = [...newTable.columns]\n                            newColumns[idx].notNull = (e.target as HTMLInputElement).checked\n                            setNewTable({ ...newTable, columns: newColumns })\n                          }}\n                          class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                        />\n                        <span class=\"text-xs text-gray-700\">NN</span>\n                      </label>\n\n                      {/* Foreign Key Toggle */}\n                      <label class=\"flex items-center space-x-1\">\n                        <input\n                          type=\"checkbox\"\n                          checked={col.foreignKey?.enabled || false}\n                          onChange={(e) => {\n                            const newColumns = [...newTable.columns]\n                            const isEnabled = (e.target as HTMLInputElement).checked\n                            newColumns[idx].foreignKey = {\n                              ...newColumns[idx].foreignKey,\n                              enabled: isEnabled,\n                              column: isEnabled ? 'id' : '', // Set default column when enabling FK\n                            }\n                            setNewTable({ ...newTable, columns: newColumns })\n                          }}\n                          class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                        />\n                        <span class=\"text-xs text-gray-700\">FK</span>\n                      </label>\n\n                      {idx > 0 && (\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            const newColumns = newTable.columns.filter((_, i) => i !== idx)\n                            setNewTable({ ...newTable, columns: newColumns })\n                          }}\n                          class=\"text-red-600 hover:text-red-900 text-sm\"\n                        >\n                          Remove\n                        </button>\n                      )}\n                    </div>\n\n                    {/* Foreign Key Settings */}\n                    {col.foreignKey?.enabled && (\n                      <div class=\"flex space-x-2 ml-4 mt-1\">\n                        <select\n                          value={col.foreignKey?.table || ''}\n                          onChange={(e) => {\n                            const newColumns = [...newTable.columns]\n                            newColumns[idx].foreignKey = {\n                              ...newColumns[idx].foreignKey,\n                              table: (e.target as HTMLSelectElement).value,\n                            }\n                            setNewTable({ ...newTable, columns: newColumns })\n                          }}\n                          class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                        >\n                          <option value=\"\">Select table...</option>\n                          {getUserTables(tables).map((table) => (\n                            <option key={table.name} value={table.name}>\n                              {table.name}\n                            </option>\n                          ))}\n                        </select>\n                        <input\n                          type=\"text\"\n                          value={col.foreignKey?.column || ''}\n                          onChange={(e) => {\n                            const newColumns = [...newTable.columns]\n                            newColumns[idx].foreignKey = {\n                              ...newColumns[idx].foreignKey,\n                              column: (e.target as HTMLInputElement).value,\n                            }\n                            setNewTable({ ...newTable, columns: newColumns })\n                          }}\n                          placeholder=\"id\"\n                          class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n              <button\n                type=\"button\"\n                onClick={() =>\n                  setNewTable({\n                    ...newTable,\n                    columns: [\n                      ...newTable.columns,\n                      {\n                        name: '',\n                        type: 'TEXT',\n                        notNull: false,\n                        foreignKey: { enabled: false, table: '', column: '' },\n                      },\n                    ],\n                  })\n                }\n                class=\"mt-2 text-sm text-indigo-600 hover:text-indigo-500\"\n              >\n                Add Column\n              </button>\n              <p class=\"mt-2 text-xs text-gray-500\">\n                Note: id, created_at, and updated_at columns will be added automatically\n              </p>\n            </div>\n\n            {/* Index Settings Section */}\n            <div class=\"mb-4\">\n              <div class=\"flex items-center justify-between mb-2\">\n                <label class=\"block text-sm font-medium text-gray-700\">Indexes (Optional)</label>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const defaultColumns = newTable.columns\n                      .filter((col) => col.name.trim() !== '')\n                      .map((col) => col.name)\n                    const defaultName = newTable.name\n                      ? generateIndexName(newTable.name, defaultColumns.slice(0, 1))\n                      : ''\n                    setNewTable({\n                      ...newTable,\n                      indexes: [\n                        ...newTable.indexes,\n                        {\n                          name: defaultName,\n                          columns: defaultColumns.slice(0, 1),\n                          unique: false,\n                        },\n                      ],\n                    })\n                  }}\n                  class=\"text-sm text-indigo-600 hover:text-indigo-500\"\n                >\n                  Add Index\n                </button>\n              </div>\n\n              <div class=\"space-y-3\">\n                {newTable.indexes.map((index, idx) => (\n                  <div key={idx} class=\"p-3 bg-gray-50 rounded-md\">\n                    <div class=\"flex space-x-2 mb-2\">\n                      <input\n                        type=\"text\"\n                        value={index.name}\n                        onInput={(e) => {\n                          const newIndexes = [...newTable.indexes]\n                          newIndexes[idx].name = (e.target as HTMLInputElement).value\n                          setNewTable({ ...newTable, indexes: newIndexes })\n                        }}\n                        placeholder=\"index_name\"\n                        class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                      />\n                      <label class=\"flex items-center space-x-1\">\n                        <input\n                          type=\"checkbox\"\n                          checked={index.unique}\n                          onChange={(e) => {\n                            const newIndexes = [...newTable.indexes]\n                            newIndexes[idx].unique = (e.target as HTMLInputElement).checked\n                            setNewTable({ ...newTable, indexes: newIndexes })\n                          }}\n                          class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                        />\n                        <span class=\"text-xs text-gray-700\">Unique</span>\n                      </label>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          const newIndexes = newTable.indexes.filter((_, i) => i !== idx)\n                          setNewTable({ ...newTable, indexes: newIndexes })\n                        }}\n                        class=\"text-red-600 hover:text-red-900 text-sm\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n\n                    <div class=\"space-y-1\">\n                      <label class=\"text-xs text-gray-700\">Columns:</label>\n                      {index.columns.map((column, colIdx) => (\n                        <div key={colIdx} class=\"flex space-x-2\">\n                          <select\n                            value={column}\n                            onChange={(e) => {\n                              const newIndexes = [...newTable.indexes]\n                              newIndexes[idx].columns[colIdx] = (\n                                e.target as HTMLSelectElement\n                              ).value\n                              // Update index name when columns change\n                              if (newTable.name) {\n                                newIndexes[idx].name = generateIndexName(\n                                  newTable.name,\n                                  newIndexes[idx].columns.filter((c) => c.trim() !== '')\n                                )\n                              }\n                              setNewTable({ ...newTable, indexes: newIndexes })\n                            }}\n                            class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                          >\n                            <option value=\"\">Select column...</option>\n                            {newTable.columns\n                              .filter((col) => col.name.trim() !== '')\n                              .map((col) => (\n                                <option key={col.name} value={col.name}>\n                                  {col.name}\n                                </option>\n                              ))}\n                          </select>\n                          {index.columns.length > 1 && (\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                const newIndexes = [...newTable.indexes]\n                                newIndexes[idx].columns = newIndexes[idx].columns.filter(\n                                  (_, i) => i !== colIdx\n                                )\n                                setNewTable({ ...newTable, indexes: newIndexes })\n                              }}\n                              class=\"text-red-600 hover:text-red-500 text-sm\"\n                            >\n                              Remove\n                            </button>\n                          )}\n                        </div>\n                      ))}\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          const newIndexes = [...newTable.indexes]\n                          newIndexes[idx].columns.push('')\n                          setNewTable({ ...newTable, indexes: newIndexes })\n                        }}\n                        class=\"text-xs text-indigo-600 hover:text-indigo-500\"\n                      >\n                        Add Column\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div class=\"flex space-x-3\">\n              <button\n                type=\"submit\"\n                class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                Create\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setShowCreateTableForm(false)\n                  setNewTable({\n                    name: '',\n                    columns: [\n                      {\n                        name: '',\n                        type: 'TEXT',\n                        notNull: false,\n                        foreignKey: { enabled: false, table: '', column: '' },\n                      },\n                    ],\n                    indexes: [],\n                  })\n                  setError(null) // Clear error when canceling\n                }}\n                class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      <div class=\"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3\">\n        {/* Tables List */}\n        <div class=\"lg:col-span-1\">\n          <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-4 py-5 sm:p-6\">\n              <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Tables</h3>\n\n              {loading && !selectedTable ? (\n                <div class=\"text-sm text-gray-500\">Loading...</div>\n              ) : (\n                <div class=\"space-y-4\">\n                  {/* User Tables */}\n                  <div>\n                    <h4 class=\"text-sm font-medium text-gray-700 mb-2\">User Tables</h4>\n                    <div class=\"space-y-1\">\n                      {userTables.map((table) => (\n                        <div\n                          key={table.name}\n                          class={`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${\n                            selectedTable === table.name\n                              ? 'bg-indigo-50 border border-indigo-200'\n                              : ''\n                          }`}\n                        >\n                          <div\n                            class=\"flex-1 cursor-pointer\"\n                            onClick={() => setSelectedTable(table.name)}\n                          >\n                            <div class=\"flex items-center gap-2\">\n                              <div class=\"text-sm font-medium text-gray-900\">{table.name}</div>\n                              {table.access_policy && (\n                                <span\n                                  class={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${\n                                    table.access_policy === 'private'\n                                      ? 'bg-red-100 text-red-800'\n                                      : 'bg-green-100 text-green-800'\n                                  }`}\n                                >\n                                  {table.access_policy}\n                                </span>\n                              )}\n                            </div>\n                            <div class=\"text-xs text-gray-500\">{table.rowCount || 0} rows</div>\n                          </div>\n                          {table.type === 'user' && (\n                            <div class=\"relative\">\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  setOpenDropdownTable(\n                                    openDropdownTable === table.name ? null : table.name\n                                  )\n                                }}\n                                class=\"p-1 text-gray-400 hover:text-gray-600 rounded\"\n                              >\n                                <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                  <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\n                                </svg>\n                              </button>\n                              {openDropdownTable === table.name && (\n                                <div class=\"absolute right-0 mt-1 w-24 bg-white border border-gray-200 rounded-md shadow-lg z-10\">\n                                  <button\n                                    onClick={(e) => {\n                                      e.stopPropagation()\n                                      handleDropTable(table.name)\n                                      setOpenDropdownTable(null)\n                                    }}\n                                    class=\"w-full px-3 py-2 text-xs text-left text-red-600 hover:bg-red-50\"\n                                  >\n                                    Drop Table\n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                      {userTables.length === 0 && (\n                        <p class=\"text-sm text-gray-500\">No user tables yet</p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* System Tables */}\n                  <div>\n                    <h4 class=\"text-sm font-medium text-gray-700 mb-2\">System Tables</h4>\n                    <div class=\"space-y-1\">\n                      {systemTables.map((table) => (\n                        <div\n                          key={table.name}\n                          class={`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-50 ${\n                            selectedTable === table.name\n                              ? 'bg-indigo-50 border border-indigo-200'\n                              : ''\n                          }`}\n                          onClick={() => setSelectedTable(table.name)}\n                        >\n                          <div>\n                            <div class=\"text-sm font-medium text-gray-900\">{table.name}</div>\n                            <div class=\"text-xs text-gray-500\">{table.rowCount || 0} rows</div>\n                          </div>\n                          <span class=\"text-xs text-gray-400\">Protected</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Table Data */}\n        <div class=\"lg:col-span-2\">\n          {selectedTable ? (\n            <div class=\"bg-white shadow rounded-lg\">\n              <div class=\"px-4 py-5 sm:p-6\">\n                <div class=\"flex items-center justify-between mb-4\">\n                  <div class=\"flex items-center gap-3\">\n                    <h3 class=\"text-lg font-medium text-gray-900\">{selectedTable}</h3>\n                    {(() => {\n                      const currentTable = tables.find((t) => t.name === selectedTable)\n                      if (currentTable?.type === 'user' && currentTable.access_policy) {\n                        return (\n                          <div class=\"flex items-center gap-2\">\n                            <select\n                              value={currentTable.access_policy}\n                              onChange={(e) => {\n                                const newPolicy = (e.target as HTMLSelectElement).value as\n                                  | 'public'\n                                  | 'private'\n                                handleChangeAccessPolicy(selectedTable, newPolicy)\n                              }}\n                              disabled={changingPolicy === selectedTable}\n                              class={`text-xs px-2 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 ${\n                                currentTable.access_policy === 'private'\n                                  ? 'border-red-300 bg-red-50 text-red-800'\n                                  : 'border-green-300 bg-green-50 text-green-800'\n                              }`}\n                            >\n                              <option value=\"public\">public</option>\n                              <option value=\"private\">private</option>\n                            </select>\n                            {changingPolicy === selectedTable && (\n                              <div class=\"text-xs text-gray-500\">Updating...</div>\n                            )}\n                          </div>\n                        )\n                      }\n                      return null\n                    })()}\n                  </div>\n                  {tables.find((t) => t.name === selectedTable)?.type === 'user' && (\n                    <div class=\"flex space-x-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowSchemaEditor(!showSchemaEditor)}\n                        class=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                      >\n                        Edit Schema\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          // Reinitialize the form when opening\n                          const initialRecord: Record<string, any> = {}\n                          tableColumns.forEach((col) => {\n                            if (!['id', 'created_at', 'updated_at'].includes(col.name)) {\n                              initialRecord[col.name] = ''\n                            }\n                          })\n                          setNewRecord(initialRecord)\n                          setError(null) // Clear any previous errors\n                          setShowCreateForm(true)\n                        }}\n                        class=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                      >\n                        Add Record\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {showSchemaEditor && (\n                  <div class=\"mb-6 p-4 border border-gray-200 rounded-lg\">\n                    <h4 class=\"text-sm font-medium text-gray-900 mb-3\">Table Schema</h4>\n\n                    {/* Existing columns */}\n                    <div class=\"mb-4\">\n                      <h5 class=\"text-xs font-medium text-gray-700 mb-2\">Columns</h5>\n                      <div class=\"space-y-2\">\n                        {tableColumns.map((col) => (\n                          <div\n                            key={col.name}\n                            class=\"flex items-center justify-between p-2 bg-gray-50 rounded\"\n                          >\n                            {editingColumn?.oldName === col.name ? (\n                              <input\n                                type=\"text\"\n                                value={editingColumn?.newName || ''}\n                                onInput={(e) => {\n                                  if (editingColumn) {\n                                    setEditingColumn({\n                                      ...editingColumn,\n                                      newName: (e.target as HTMLInputElement).value,\n                                    })\n                                  }\n                                }}\n                                onKeyDown={(e) => {\n                                  if (editingColumn) {\n                                    if (e.key === 'Enter')\n                                      handleRenameColumn(\n                                        editingColumn.oldName,\n                                        editingColumn.newName\n                                      )\n                                    if (e.key === 'Escape') setEditingColumn(null)\n                                  }\n                                }}\n                                onBlur={() => {\n                                  if (editingColumn) {\n                                    handleRenameColumn(editingColumn.oldName, editingColumn.newName)\n                                  }\n                                }}\n                                class=\"flex-1 text-sm border-gray-300 rounded px-2 py-1\"\n                              />\n                            ) : (\n                              <div class=\"flex-1\">\n                                <span class=\"text-sm font-medium text-gray-900\">{col.name}</span>\n                                <span class=\"ml-2 text-xs text-gray-500\">{col.type}</span>\n                                {col.notnull ? (\n                                  <span class=\"ml-1 text-xs text-red-500\">NOT NULL</span>\n                                ) : null}\n                                {col.pk ? (\n                                  <span class=\"ml-1 text-xs text-blue-500\">PRIMARY KEY</span>\n                                ) : null}\n                                {getForeignKeyForColumn(col.name) && (\n                                  <span class=\"ml-1 text-xs text-green-600\">\n                                    FK → {getForeignKeyForColumn(col.name)?.table}.\n                                    {getForeignKeyForColumn(col.name)?.to}\n                                  </span>\n                                )}\n                              </div>\n                            )}\n\n                            {!['id', 'created_at', 'updated_at'].includes(col.name) && (\n                              <div class=\"flex space-x-2\">\n                                <button\n                                  onClick={() =>\n                                    setEditingColumn({ oldName: col.name, newName: col.name })\n                                  }\n                                  class=\"text-xs text-indigo-600 hover:text-indigo-500\"\n                                >\n                                  Rename\n                                </button>\n                                <button\n                                  onClick={() => {\n                                    const fkInfo = getForeignKeyForColumn(col.name)\n                                    setModifyingColumn({\n                                      name: col.name,\n                                      type: col.type,\n                                      notNull: col.notnull === 1,\n                                      foreignKey: {\n                                        enabled: !!fkInfo,\n                                        table: fkInfo?.table || '',\n                                        column: fkInfo?.to || '',\n                                      },\n                                    })\n                                  }}\n                                  class=\"text-xs text-blue-600 hover:text-blue-500\"\n                                >\n                                  Modify\n                                </button>\n                                <button\n                                  onClick={() => handleDropColumn(col.name)}\n                                  class=\"text-xs text-red-600 hover:text-red-500\"\n                                >\n                                  Drop\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Add new column form */}\n                    <div class=\"border-t pt-4\">\n                      <h5 class=\"text-xs font-medium text-gray-700 mb-2\">Add Column</h5>\n                      <form onSubmit={handleAddColumn}>\n                        <div class=\"flex space-x-2\">\n                          <input\n                            type=\"text\"\n                            value={newColumn.name}\n                            onInput={(e) =>\n                              setNewColumn({\n                                ...newColumn,\n                                name: (e.target as HTMLInputElement).value,\n                              })\n                            }\n                            placeholder=\"column_name\"\n                            pattern=\"[a-zA-Z_][a-zA-Z0-9_]*\"\n                            class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                            required\n                          />\n                          <select\n                            value={newColumn.type}\n                            onChange={(e) =>\n                              setNewColumn({\n                                ...newColumn,\n                                type: (e.target as HTMLSelectElement).value,\n                              })\n                            }\n                            class=\"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                          >\n                            <option value=\"TEXT\">TEXT</option>\n                            <option value=\"INTEGER\">INTEGER</option>\n                            <option value=\"REAL\">REAL</option>\n                            <option value=\"BLOB\">BLOB</option>\n                            <option value=\"BOOLEAN\">BOOLEAN</option>\n                          </select>\n\n                          <label class=\"flex items-center space-x-1\">\n                            <input\n                              type=\"checkbox\"\n                              checked={newColumn.notNull}\n                              onChange={(e) =>\n                                setNewColumn({\n                                  ...newColumn,\n                                  notNull: (e.target as HTMLInputElement).checked,\n                                })\n                              }\n                              class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                            />\n                            <span class=\"text-xs text-gray-700\">NN</span>\n                          </label>\n\n                          <label class=\"flex items-center space-x-1\">\n                            <input\n                              type=\"checkbox\"\n                              checked={newColumn.foreignKey?.enabled}\n                              onChange={(e) =>\n                                setNewColumn({\n                                  ...newColumn,\n                                  foreignKey: {\n                                    ...newColumn.foreignKey,\n                                    enabled: (e.target as HTMLInputElement).checked,\n                                    column: (e.target as HTMLInputElement).checked ? 'id' : '',\n                                  },\n                                })\n                              }\n                              class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                            />\n                            <span class=\"text-xs text-gray-700\">FK</span>\n                          </label>\n\n                          <button\n                            type=\"submit\"\n                            class=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                          >\n                            Add\n                          </button>\n                        </div>\n\n                        {/* Foreign Key Settings */}\n                        {newColumn.foreignKey?.enabled && (\n                          <div class=\"flex space-x-2 mt-2\">\n                            <select\n                              value={newColumn.foreignKey?.table || ''}\n                              onChange={(e) =>\n                                setNewColumn({\n                                  ...newColumn,\n                                  foreignKey: {\n                                    ...newColumn.foreignKey,\n                                    table: (e.target as HTMLSelectElement).value,\n                                  },\n                                })\n                              }\n                              class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                            >\n                              <option value=\"\">Select table...</option>\n                              {getUserTables(tables).map((table) => (\n                                <option key={table.name} value={table.name}>\n                                  {table.name}\n                                </option>\n                              ))}\n                            </select>\n                            <input\n                              type=\"text\"\n                              value={newColumn.foreignKey?.column || ''}\n                              onChange={(e) =>\n                                setNewColumn({\n                                  ...newColumn,\n                                  foreignKey: {\n                                    ...newColumn.foreignKey,\n                                    column: (e.target as HTMLInputElement).value,\n                                  },\n                                })\n                              }\n                              placeholder=\"id\"\n                              class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                            />\n                          </div>\n                        )}\n                      </form>\n                    </div>\n\n                    {/* Index Management Section */}\n                    <div class=\"border-t pt-4\">\n                      <div class=\"flex items-center justify-between mb-3\">\n                        <h5 class=\"text-xs font-medium text-gray-700\">Indexes</h5>\n                        <button\n                          type=\"button\"\n                          onClick={() => setShowIndexManager(!showIndexManager)}\n                          class=\"text-xs text-indigo-600 hover:text-indigo-500\"\n                        >\n                          {showIndexManager ? 'Hide' : 'Manage Indexes'}\n                        </button>\n                      </div>\n\n                      {/* Existing Indexes */}\n                      <div class=\"space-y-2 mb-3\">\n                        {tableIndexes.map((index) => (\n                          <div\n                            key={index.name}\n                            class=\"flex items-center justify-between p-2 bg-gray-50 rounded\"\n                          >\n                            <div class=\"flex-1\">\n                              <div class=\"flex items-center space-x-2\">\n                                <span class=\"text-sm font-medium text-gray-900\">{index.name}</span>\n                                {index.unique && (\n                                  <span class=\"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded\">\n                                    UNIQUE\n                                  </span>\n                                )}\n                              </div>\n                              <div class=\"text-xs text-gray-500\">\n                                Columns: {index.columns.join(', ')}\n                              </div>\n                            </div>\n                            <button\n                              onClick={() => handleDropIndex(index.name)}\n                              class=\"text-xs text-red-600 hover:text-red-500\"\n                            >\n                              Drop\n                            </button>\n                          </div>\n                        ))}\n                        {tableIndexes.length === 0 && (\n                          <p class=\"text-xs text-gray-500\">No custom indexes</p>\n                        )}\n                      </div>\n\n                      {/* Create Index Form */}\n                      {showIndexManager && (\n                        <form\n                          onSubmit={handleCreateIndex}\n                          class=\"space-y-3 p-3 bg-blue-50 rounded-md\"\n                        >\n                          <h6 class=\"text-xs font-medium text-gray-700\">Create New Index</h6>\n\n                          <div>\n                            <input\n                              type=\"text\"\n                              value={newIndex.name}\n                              onInput={(e) =>\n                                setNewIndex({\n                                  ...newIndex,\n                                  name: (e.target as HTMLInputElement).value,\n                                })\n                              }\n                              placeholder=\"index_name\"\n                              pattern=\"[a-zA-Z_][a-zA-Z0-9_]*\"\n                              class=\"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                              required\n                            />\n                          </div>\n\n                          <div class=\"space-y-2\">\n                            <label class=\"text-xs text-gray-700\">Columns:</label>\n                            {newIndex.columns.map((column, idx) => (\n                              <div key={idx} class=\"flex space-x-2\">\n                                <select\n                                  value={column}\n                                  onChange={(e) => {\n                                    const newColumns = [...newIndex.columns]\n                                    newColumns[idx] = (e.target as HTMLSelectElement).value\n                                    setNewIndex({ ...newIndex, columns: newColumns })\n                                  }}\n                                  class=\"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n                                >\n                                  <option value=\"\">Select column...</option>\n                                  {tableColumns.map((col) => (\n                                    <option key={col.name} value={col.name}>\n                                      {col.name}\n                                    </option>\n                                  ))}\n                                </select>\n                                {newIndex.columns.length > 1 && (\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => {\n                                      const newColumns = newIndex.columns.filter(\n                                        (_, i) => i !== idx\n                                      )\n                                      setNewIndex({ ...newIndex, columns: newColumns })\n                                    }}\n                                    class=\"text-red-600 hover:text-red-500 text-sm\"\n                                  >\n                                    Remove\n                                  </button>\n                                )}\n                              </div>\n                            ))}\n                            <button\n                              type=\"button\"\n                              onClick={() =>\n                                setNewIndex({ ...newIndex, columns: [...newIndex.columns, ''] })\n                              }\n                              class=\"text-xs text-indigo-600 hover:text-indigo-500\"\n                            >\n                              Add Column\n                            </button>\n                          </div>\n\n                          <div>\n                            <label class=\"flex items-center space-x-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={newIndex.unique}\n                                onChange={(e) =>\n                                  setNewIndex({\n                                    ...newIndex,\n                                    unique: (e.target as HTMLInputElement).checked,\n                                  })\n                                }\n                                class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                              />\n                              <span class=\"text-sm text-gray-700\">Unique Index</span>\n                            </label>\n                          </div>\n\n                          <div class=\"flex space-x-2\">\n                            <button\n                              type=\"submit\"\n                              class=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                            >\n                              Create Index\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                setShowIndexManager(false)\n                                setNewIndex({ name: '', columns: [''], unique: false })\n                              }}\n                              class=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        </form>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* Column Modification Modal */}\n                {modifyingColumn && (\n                  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <div class=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n                      <h4 class=\"text-lg font-medium text-gray-900 mb-4\">\n                        Modify Column: {modifyingColumn.name}\n                      </h4>\n\n                      <div class=\"space-y-4\">\n                        <div>\n                          <label class=\"block text-sm font-medium text-gray-700\">Type</label>\n                          <select\n                            value={modifyingColumn.type}\n                            onChange={(e) =>\n                              setModifyingColumn({\n                                ...modifyingColumn,\n                                type: (e.target as HTMLSelectElement).value,\n                              })\n                            }\n                            class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                          >\n                            <option value=\"TEXT\">TEXT</option>\n                            <option value=\"INTEGER\">INTEGER</option>\n                            <option value=\"REAL\">REAL</option>\n                            <option value=\"BLOB\">BLOB</option>\n                            <option value=\"BOOLEAN\">BOOLEAN</option>\n                          </select>\n                        </div>\n\n                        <div>\n                          <label class=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={modifyingColumn.notNull}\n                              onChange={(e) =>\n                                setModifyingColumn({\n                                  ...modifyingColumn,\n                                  notNull: (e.target as HTMLInputElement).checked,\n                                })\n                              }\n                              class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                            />\n                            <span class=\"text-sm text-gray-700\">NOT NULL</span>\n                          </label>\n                        </div>\n\n                        <div>\n                          <label class=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={modifyingColumn.foreignKey.enabled}\n                              onChange={(e) =>\n                                setModifyingColumn({\n                                  ...modifyingColumn,\n                                  foreignKey: {\n                                    ...modifyingColumn.foreignKey,\n                                    enabled: (e.target as HTMLInputElement).checked,\n                                    column: (e.target as HTMLInputElement).checked ? 'id' : '',\n                                  },\n                                })\n                              }\n                              class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n                            />\n                            <span class=\"text-sm text-gray-700\">Foreign Key</span>\n                          </label>\n                        </div>\n\n                        {modifyingColumn.foreignKey.enabled && (\n                          <div class=\"space-y-2\">\n                            <select\n                              value={modifyingColumn.foreignKey.table}\n                              onChange={(e) =>\n                                setModifyingColumn({\n                                  ...modifyingColumn,\n                                  foreignKey: {\n                                    ...modifyingColumn.foreignKey,\n                                    table: (e.target as HTMLSelectElement).value,\n                                  },\n                                })\n                              }\n                              class=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                            >\n                              <option value=\"\">Select table...</option>\n                              {getUserTables(tables).map((table) => (\n                                <option key={table.name} value={table.name}>\n                                  {table.name}\n                                </option>\n                              ))}\n                            </select>\n                            <input\n                              type=\"text\"\n                              value={modifyingColumn.foreignKey.column}\n                              onChange={(e) =>\n                                setModifyingColumn({\n                                  ...modifyingColumn,\n                                  foreignKey: {\n                                    ...modifyingColumn.foreignKey,\n                                    column: (e.target as HTMLInputElement).value,\n                                  },\n                                })\n                              }\n                              placeholder=\"id\"\n                              class=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                            />\n                          </div>\n                        )}\n                      </div>\n\n                      <div class=\"mt-6 flex space-x-3\">\n                        <button\n                          onClick={() => {\n                            const changes: any = {}\n                            if (\n                              modifyingColumn.type !==\n                              tableColumns.find((c) => c.name === modifyingColumn.name)?.type\n                            ) {\n                              changes.type = modifyingColumn.type\n                            }\n                            const currentNotNull =\n                              tableColumns.find((c) => c.name === modifyingColumn.name)?.notnull ===\n                              1\n                            if (modifyingColumn.notNull !== currentNotNull) {\n                              changes.notNull = modifyingColumn.notNull\n                            }\n                            if (\n                              modifyingColumn.foreignKey.enabled &&\n                              modifyingColumn.foreignKey.table &&\n                              modifyingColumn.foreignKey.column\n                            ) {\n                              changes.foreignKey = {\n                                table: modifyingColumn.foreignKey.table,\n                                column: modifyingColumn.foreignKey.column,\n                              }\n                            } else if (!modifyingColumn.foreignKey.enabled) {\n                              changes.foreignKey = null\n                            }\n                            handleModifyColumn(modifyingColumn.name, changes)\n                          }}\n                          class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Apply Changes\n                        </button>\n                        <button\n                          onClick={() => setModifyingColumn(null)}\n                          class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Validation Warning Modal */}\n                {validationWarning && (\n                  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <div class=\"bg-white rounded-lg p-6 max-w-lg w-full mx-4\">\n                      <div class=\"flex items-center mb-4\">\n                        <div class=\"flex-shrink-0\">\n                          <svg\n                            class=\"h-6 w-6 text-yellow-600\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              stroke-linecap=\"round\"\n                              stroke-linejoin=\"round\"\n                              stroke-width=\"2\"\n                              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                            />\n                          </svg>\n                        </div>\n                        <div class=\"ml-3\">\n                          <h3 class=\"text-lg font-medium text-gray-900\">Validation Warning</h3>\n                        </div>\n                      </div>\n\n                      <div class=\"mb-4\">\n                        <p class=\"text-sm text-gray-700 mb-3\">\n                          The following issues were found with your changes:\n                        </p>\n                        <div class=\"bg-yellow-50 border border-yellow-200 rounded-md p-3\">\n                          <ul class=\"list-disc list-inside space-y-1\">\n                            {validationWarning.errors.map((error, idx) => (\n                              <li key={idx} class=\"text-sm text-yellow-800\">\n                                {error}\n                              </li>\n                            ))}\n                          </ul>\n                          {validationWarning.conflictingRows > 0 && (\n                            <p class=\"text-sm text-yellow-800 mt-2 font-medium\">\n                              {validationWarning.conflictingRows} rows will be affected.\n                            </p>\n                          )}\n                        </div>\n                        <p class=\"text-sm text-gray-600 mt-3\">\n                          Proceeding may result in data loss or corruption. Are you sure you want to\n                          continue?\n                        </p>\n                      </div>\n\n                      <div class=\"flex space-x-3\">\n                        <button\n                          onClick={validationWarning.onConfirm}\n                          class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                        >\n                          Proceed Anyway\n                        </button>\n                        <button\n                          onClick={() => setValidationWarning(null)}\n                          class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Confirmation Modal */}\n                {confirmationModal && (\n                  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <div class=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n                      <div class=\"flex items-center mb-4\">\n                        <div class=\"flex-shrink-0\">\n                          {confirmationModal.variant === 'danger' ? (\n                            <svg\n                              class=\"h-6 w-6 text-red-600\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                            >\n                              <path\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                stroke-width=\"2\"\n                                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                              />\n                            </svg>\n                          ) : (\n                            <svg\n                              class=\"h-6 w-6 text-yellow-600\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                            >\n                              <path\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                stroke-width=\"2\"\n                                d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                              />\n                            </svg>\n                          )}\n                        </div>\n                        <div class=\"ml-3\">\n                          <h3 class=\"text-lg font-medium text-gray-900\">\n                            {confirmationModal.title}\n                          </h3>\n                        </div>\n                      </div>\n\n                      <div class=\"mb-6\">\n                        <p class=\"text-sm text-gray-700\">{confirmationModal.message}</p>\n                      </div>\n\n                      <div class=\"flex space-x-3\">\n                        <button\n                          onClick={confirmationModal.onConfirm}\n                          class={`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${\n                            confirmationModal.variant === 'danger'\n                              ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500'\n                              : 'bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500'\n                          }`}\n                        >\n                          Confirm\n                        </button>\n                        <button\n                          onClick={() => setConfirmationModal(null)}\n                          class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Record Edit Modal */}\n                {editingRecord && (\n                  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <div class=\"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto\">\n                      <div class=\"flex items-center justify-between mb-4\">\n                        <h3 class=\"text-lg font-medium text-gray-900\">Edit Record</h3>\n                        <button\n                          onClick={() => setEditingRecord(null)}\n                          class=\"text-gray-400 hover:text-gray-600\"\n                        >\n                          <svg\n                            class=\"h-6 w-6\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              stroke-linecap=\"round\"\n                              stroke-linejoin=\"round\"\n                              stroke-width=\"2\"\n                              d=\"M6 18L18 6M6 6l12 12\"\n                            />\n                          </svg>\n                        </button>\n                      </div>\n\n                      <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                        {tableColumns.map((col) => {\n                          if (['id', 'created_at', 'updated_at'].includes(col.name)) {\n                            return (\n                              <div key={col.name} class=\"sm:col-span-2\">\n                                <label class=\"block text-sm font-medium text-gray-500\">\n                                  {col.name} (read-only)\n                                </label>\n                                <div class=\"mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-500\">\n                                  {col.name.includes('_at') && editingRecord.data[col.name]\n                                    ? formatDateTime(editingRecord.data[col.name])\n                                    : editingRecord.data[col.name] || '-'}\n                                </div>\n                              </div>\n                            )\n                          }\n\n                          const fkInfo = getForeignKeyForColumn(col.name)\n\n                          return (\n                            <div key={col.name}>\n                              <label class=\"block text-sm font-medium text-gray-700\">\n                                {col.name}\n                                {col.notnull ? <span class=\"text-red-500 ml-1\">*</span> : null}\n                                {fkInfo && (\n                                  <span class=\"text-green-600 ml-1 text-xs\">\n                                    FK → {fkInfo.table}.{fkInfo.to}\n                                  </span>\n                                )}\n                              </label>\n                              {fkInfo ? (\n                                <div class=\"relative\">\n                                  <input\n                                    type=\"text\"\n                                    value={editingRecord.data[col.name] || ''}\n                                    onInput={(e) => {\n                                      const newValue = (e.target as HTMLInputElement).value\n                                      setEditingRecord({\n                                        ...editingRecord,\n                                        data: { ...editingRecord.data, [col.name]: newValue },\n                                      })\n\n                                      // FK validation\n                                      if (newValue.trim()) {\n                                        validateForeignKey(newValue, fkInfo)\n                                      }\n                                    }}\n                                    class={`mt-1 block w-full border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${\n                                      editingRecord.data[col.name] &&\n                                      fkValidation[\n                                        `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                      ]\n                                        ? fkValidation[\n                                            `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                          ].isValid\n                                          ? 'border-green-300 bg-green-50'\n                                          : 'border-red-300 bg-red-50'\n                                        : 'border-gray-300'\n                                    }`}\n                                    placeholder={`Enter ${fkInfo.table} ID`}\n                                    required={col.notnull === 1}\n                                  />\n                                  {editingRecord.data[col.name] &&\n                                    fkValidation[\n                                      `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                    ] && (\n                                      <div\n                                        class={`absolute left-0 top-full mt-1 text-xs px-2 py-1 rounded ${\n                                          fkValidation[\n                                            `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                          ].isValid\n                                            ? 'text-green-700 bg-green-100'\n                                            : 'text-red-700 bg-red-100'\n                                        }`}\n                                      >\n                                        {fkValidation[\n                                          `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                        ].isChecking\n                                          ? 'Checking...'\n                                          : fkValidation[\n                                              `${fkInfo.table}-${editingRecord.data[col.name]}`\n                                            ].displayName}\n                                      </div>\n                                    )}\n                                </div>\n                              ) : (\n                                <input\n                                  type={\n                                    col.type === 'INTEGER' || col.type === 'REAL'\n                                      ? 'number'\n                                      : 'text'\n                                  }\n                                  value={editingRecord.data[col.name] || ''}\n                                  onInput={(e) =>\n                                    setEditingRecord({\n                                      ...editingRecord,\n                                      data: {\n                                        ...editingRecord.data,\n                                        [col.name]: (e.target as HTMLInputElement).value,\n                                      },\n                                    })\n                                  }\n                                  class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                                  required={col.notnull === 1}\n                                />\n                              )}\n                            </div>\n                          )\n                        })}\n                      </div>\n\n                      <div class=\"mt-6 flex space-x-3\">\n                        <button\n                          onClick={handleRecordSave}\n                          class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Save Changes\n                        </button>\n                        <button\n                          onClick={() => setEditingRecord(null)}\n                          class=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {showCreateForm && (\n                  <div class=\"mb-6 p-4 border border-gray-200 rounded-lg\">\n                    <h4 class=\"text-sm font-medium text-gray-900 mb-3\">Create New Record</h4>\n                    <form onSubmit={handleCreateRecord}>\n                      <div class=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n                        {Object.entries(newRecord).map(([key, value]) => (\n                          <div key={key}>\n                            <label class=\"block text-xs font-medium text-gray-700\">{key}</label>\n                            <input\n                              type=\"text\"\n                              value={value}\n                              onInput={(e) =>\n                                setNewRecord({\n                                  ...newRecord,\n                                  [key]: (e.target as HTMLInputElement).value,\n                                })\n                              }\n                              class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                            />\n                          </div>\n                        ))}\n                      </div>\n\n                      {/* Error display within the form */}\n                      {error && showCreateForm && (\n                        <div class=\"mt-3 bg-red-50 border border-red-200 rounded-md p-3\">\n                          <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                              <svg\n                                class=\"h-5 w-5 text-red-400\"\n                                viewBox=\"0 0 20 20\"\n                                fill=\"currentColor\"\n                              >\n                                <path\n                                  fill-rule=\"evenodd\"\n                                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                                  clip-rule=\"evenodd\"\n                                />\n                              </svg>\n                            </div>\n                            <div class=\"ml-3\">\n                              <p class=\"text-sm text-red-700\">{error}</p>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n\n                      <div class=\"mt-3 flex space-x-2\">\n                        <button\n                          type=\"submit\"\n                          class=\"inline-flex justify-center py-1.5 px-3 border border-transparent shadow-sm text-xs font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Create\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setShowCreateForm(false)\n                            setError(null) // Clear error when canceling\n                          }}\n                          class=\"inline-flex justify-center py-1.5 px-3 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </form>\n                  </div>\n                )}\n\n                {loading ? (\n                  <div class=\"text-center py-4 text-sm text-gray-500\">Loading data...</div>\n                ) : tableData.length === 0 ? (\n                  <div class=\"text-center py-8\">\n                    <p class=\"text-sm text-gray-500\">No data in this table</p>\n                  </div>\n                ) : (\n                  <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                      <thead class=\"bg-gray-50\">\n                        <tr>\n                          {tableColumns.map((col) => (\n                            <th\n                              key={col.name}\n                              class=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                            >\n                              {col.name}\n                            </th>\n                          ))}\n                          <th class=\"px-3 py-2\"></th>\n                        </tr>\n                      </thead>\n                      <tbody class=\"bg-white divide-y divide-gray-200\">\n                        {tableData.map((row, idx) => (\n                          <tr key={row.id || idx} data-record-id={row.id}>\n                            {tableColumns.map((col) => (\n                              <td\n                                key={col.name}\n                                class={`px-3 py-2 whitespace-nowrap text-sm text-gray-900 select-text ${\n                                  !['id', 'created_at', 'updated_at'].includes(col.name) &&\n                                  tables.find((t) => t.name === selectedTable)?.type === 'user'\n                                    ? 'cursor-pointer hover:bg-gray-50'\n                                    : ''\n                                }`}\n                                onClick={(e) => {\n                                  const cellKey = `${row.id}-${col.name}`\n\n                                  // Skip if not editable\n                                  if (\n                                    ['id', 'created_at', 'updated_at'].includes(col.name) ||\n                                    tables.find((t) => t.name === selectedTable)?.type !== 'user'\n                                  ) {\n                                    return\n                                  }\n\n                                  const current = clickCount[cellKey]\n\n                                  if (current) {\n                                    // This is a second click within the timeout period\n                                    clearTimeout(current.timeout)\n                                    setClickCount((prev) => {\n                                      const newState = { ...prev }\n                                      delete newState[cellKey]\n                                      return newState\n                                    })\n                                    e.preventDefault()\n                                    e.stopPropagation()\n                                    handleCellDoubleClick(row.id, col.name, row[col.name])\n                                  } else {\n                                    // This is the first click\n                                    const timeout = setTimeout(() => {\n                                      setClickCount((prev) => {\n                                        const newState = { ...prev }\n                                        delete newState[cellKey]\n                                        return newState\n                                      })\n                                    }, 400) // 400ms window for double-click\n\n                                    setClickCount((prev) => ({\n                                      ...prev,\n                                      [cellKey]: { count: 1, timeout },\n                                    }))\n                                  }\n                                }}\n                                title={\n                                  !['id', 'created_at', 'updated_at'].includes(col.name) &&\n                                  tables.find((t) => t.name === selectedTable)?.type === 'user'\n                                    ? 'Double-click to edit'\n                                    : ''\n                                }\n                              >\n                                {editingCell?.rowId === row.id &&\n                                editingCell?.columnName === col.name ? (\n                                  <div class=\"relative\">\n                                    <input\n                                      type={\n                                        col.type === 'INTEGER' || col.type === 'REAL'\n                                          ? 'number'\n                                          : 'text'\n                                      }\n                                      value={editingCell?.value || ''}\n                                      onInput={(e) => {\n                                        if (editingCell) {\n                                          const newValue = (e.target as HTMLInputElement).value\n                                          setEditingCell({ ...editingCell, value: newValue })\n\n                                          // FK validation for foreign key columns\n                                          const fkInfo = getForeignKeyForColumn(col.name)\n                                          if (fkInfo && newValue.trim()) {\n                                            validateForeignKey(newValue, fkInfo)\n                                          }\n                                        }\n                                      }}\n                                      onKeyDown={(e) => {\n                                        if (editingCell) {\n                                          if (e.key === 'Enter' && !e.isComposing)\n                                            handleCellSave(row.id, col.name, editingCell.value)\n                                          if (e.key === 'Escape') handleCellCancel()\n                                        }\n                                      }}\n                                      onBlur={() => {\n                                        if (editingCell) {\n                                          handleCellSave(row.id, col.name, editingCell.value)\n                                        }\n                                      }}\n                                      class={`w-full px-2 py-1 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\n                                        getForeignKeyForColumn(col.name) &&\n                                        editingCell?.value &&\n                                        fkValidation[\n                                          `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                        ]\n                                          ? fkValidation[\n                                              `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                            ].isValid\n                                            ? 'border-green-300 bg-green-50'\n                                            : 'border-red-300 bg-red-50'\n                                          : 'border-indigo-300'\n                                      }`}\n                                      ref={(input) => {\n                                        editInputRef.current = input\n                                        if (input && !hasInitializedFocus.current) {\n                                          hasInitializedFocus.current = true\n                                          setTimeout(() => {\n                                            input.focus()\n                                            // カーソルを末尾に移動（全選択はしない）\n                                            const length = input.value.length\n                                            input.setSelectionRange(length, length)\n                                          }, 0)\n                                        }\n                                      }}\n                                    />\n                                    {getForeignKeyForColumn(col.name) &&\n                                      editingCell?.value &&\n                                      fkValidation[\n                                        `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                      ] && (\n                                        <div\n                                          class={`absolute left-0 -bottom-6 text-xs px-2 py-1 rounded ${\n                                            fkValidation[\n                                              `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                            ].isValid\n                                              ? 'text-green-700 bg-green-100'\n                                              : 'text-red-700 bg-red-100'\n                                          }`}\n                                        >\n                                          {fkValidation[\n                                            `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                          ].isChecking\n                                            ? 'Checking...'\n                                            : fkValidation[\n                                                `${getForeignKeyForColumn(col.name)?.table}-${editingCell.value}`\n                                              ].displayName}\n                                        </div>\n                                      )}\n                                  </div>\n                                ) : col.name.includes('_at') && row[col.name] ? (\n                                  formatDateTime(row[col.name])\n                                ) : col.name === 'id' || col.name.endsWith('_id') ? (\n                                  row[col.name] && row[col.name].length > 8 ? (\n                                    <button\n                                      onClick={(e) => {\n                                        e.stopPropagation()\n                                        handleIdClick(e, row[col.name], idx, col.name)\n                                      }}\n                                      onDblClick={(e: MouseEvent) => {\n                                        e.preventDefault()\n                                        e.stopPropagation()\n                                      }}\n                                      class=\"text-blue-600 hover:text-blue-800 cursor-pointer underline decoration-dotted relative\"\n                                      title=\"Click to copy • Cmd+Click to jump to record\"\n                                    >\n                                      {truncateId(row[col.name])}\n                                      {copiedCell === `${idx}-${col.name}` && (\n                                        <span class=\"absolute -top-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap\">\n                                          Copied!\n                                        </span>\n                                      )}\n                                    </button>\n                                  ) : (\n                                    row[col.name] || '-'\n                                  )\n                                ) : (\n                                  row[col.name] || '-'\n                                )}\n                              </td>\n                            ))}\n                            <td class=\"px-3 py-2 whitespace-nowrap text-right text-sm font-medium\">\n                              {tables.find((t) => t.name === selectedTable)?.type === 'user' && (\n                                <div class=\"flex space-x-2\">\n                                  <button\n                                    onClick={() => {\n                                      const record = tableData.find((r) => r.id === row.id)\n                                      if (record) {\n                                        setEditingRecord({ id: row.id, data: { ...record } })\n                                      }\n                                    }}\n                                    class=\"text-indigo-600 hover:text-indigo-900\"\n                                  >\n                                    Edit\n                                  </button>\n                                  <button\n                                    onClick={() => handleDeleteRecord(row.id)}\n                                    class=\"text-red-600 hover:text-red-900\"\n                                  >\n                                    Delete\n                                  </button>\n                                </div>\n                              )}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div class=\"bg-white shadow rounded-lg\">\n              <div class=\"px-4 py-5 sm:p-6 text-center\">\n                <svg\n                  class=\"mx-auto h-12 w-12 text-gray-400\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                  />\n                </svg>\n                <h3 class=\"mt-2 text-sm font-medium text-gray-900\">No table selected</h3>\n                <p class=\"mt-1 text-sm text-gray-500\">\n                  Select a table from the list to view its data\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Schema History Modal */}\n      {showSchemaHistory && (\n        <SchemaHistory\n          onClose={() => setShowSchemaHistory(false)}\n          onRestore={() => {\n            loadTables()\n            if (selectedTable) {\n              loadTableData()\n              loadTableSchema()\n            }\n          }}\n        />\n      )}\n    </div>\n  )\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport { api } from '../lib/api'\n\nexport function HomePage() {\n  const [stats, setStats] = useState({\n    userTables: 0,\n    systemTables: 0,\n    dbStatus: 'checking...',\n  })\n\n  useEffect(() => {\n    loadStats()\n  }, [])\n\n  const loadStats = async () => {\n    try {\n      // Load health status\n      const health = await api.health()\n\n      // Load tables\n      const tablesResult = await api.getTables()\n      const userTables = tablesResult.tables.filter((t) => t.type === 'user').length\n      const systemTables = tablesResult.tables.filter((t) => t.type === 'system').length\n\n      setStats({\n        userTables,\n        systemTables,\n        dbStatus: health.database === 'connected' ? 'connected' : 'disconnected',\n      })\n    } catch (error) {\n      console.error('Failed to load stats:', error)\n      setStats((prev) => ({ ...prev, dbStatus: 'error' }))\n    }\n  }\n\n  return (\n    <div>\n      <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Dashboard</h2>\n\n      <div class=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n        <DashboardCard\n          title=\"Database Tables\"\n          description=\"User-defined tables in D1\"\n          href=\"/database\"\n          stats={`${stats.userTables} tables`}\n          status={stats.dbStatus}\n        />\n        <DashboardCard\n          title=\"System Tables\"\n          description=\"Protected system tables\"\n          href=\"/database\"\n          stats={`${stats.systemTables} tables`}\n        />\n        <DashboardCard\n          title=\"Storage\"\n          description=\"R2 object storage for files\"\n          href=\"/storage\"\n          stats=\"Ready\"\n          status=\"connected\"\n        />\n      </div>\n\n      <div class=\"mt-8\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Quick Actions</h3>\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <div class=\"space-y-3\">\n              <a href=\"/database\" class=\"text-indigo-600 hover:text-indigo-500 block\">\n                Create new table →\n              </a>\n              <a href=\"/database\" class=\"text-indigo-600 hover:text-indigo-500 block\">\n                Browse database →\n              </a>\n              <a href=\"/storage\" class=\"text-indigo-600 hover:text-indigo-500 block\">\n                Upload files →\n              </a>\n              <a\n                href=\"/api/health\"\n                target=\"_blank\"\n                class=\"text-indigo-600 hover:text-indigo-500 block\"\n                rel=\"noopener\"\n              >\n                View API health →\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"mt-8\">\n        <h3 class=\"text-lg font-medium text-gray-900 mb-4\">API Endpoints</h3>\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <div class=\"space-y-2 text-sm\">\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">GET /api/health</code>\n                <span class=\"text-green-600\">Health check</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">GET /api/tables</code>\n                <span class=\"text-green-600\">List tables</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">POST /api/tables</code>\n                <span class=\"text-green-600\">Create table</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">GET /api/tables/:name/data</code>\n                <span class=\"text-green-600\">Get table data</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">GET /api/storage</code>\n                <span class=\"text-green-600\">List files</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <code class=\"text-gray-600\">POST /api/storage/upload</code>\n                <span class=\"text-green-600\">Upload file</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\ninterface DashboardCardProps {\n  title: string\n  description: string\n  href: string\n  stats: string\n  status?: string\n}\n\nfunction DashboardCard({ title, description, href, stats, status }: DashboardCardProps) {\n  return (\n    <div class=\"bg-white overflow-hidden shadow rounded-lg\">\n      <div class=\"px-4 py-5 sm:p-6\">\n        <div class=\"flex items-center justify-between\">\n          <dt class=\"text-sm font-medium text-gray-500 truncate\">{title}</dt>\n          {status && (\n            <span\n              class={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                status === 'connected'\n                  ? 'bg-green-100 text-green-800'\n                  : status === 'error'\n                    ? 'bg-red-100 text-red-800'\n                    : 'bg-gray-100 text-gray-800'\n              }`}\n            >\n              {status}\n            </span>\n          )}\n        </div>\n        <dd class=\"mt-1 text-3xl font-semibold text-gray-900\">{stats}</dd>\n        <p class=\"mt-2 text-sm text-gray-600\">{description}</p>\n        <a\n          href={href}\n          class=\"mt-3 text-indigo-600 hover:text-indigo-500 text-sm font-medium inline-block\"\n        >\n          Manage →\n        </a>\n      </div>\n    </div>\n  )\n}\n","// Client-side push notification management\n\ninterface PushSubscriptionData {\n  subscription: {\n    endpoint: string;\n    keys: {\n      p256dh: string;\n      auth: string;\n    };\n  };\n  deviceInfo?: {\n    userAgent: string;\n    platform: string;\n    browser: string;\n    version: string;\n  };\n}\n\ninterface NotificationPermissionResult {\n  granted: boolean;\n  error?: string;\n}\n\nexport class PushManager {\n  private apiBaseUrl: string;\n  private vapidPublicKey: string | null = null;\n  private registration: ServiceWorkerRegistration | null = null;\n\n  constructor(apiBaseUrl = '/api') {\n    this.apiBaseUrl = apiBaseUrl;\n  }\n\n  // Initialize push notifications\n  async initialize(): Promise<boolean> {\n    try {\n      // Check if service workers are supported\n      if (!('serviceWorker' in navigator)) {\n        console.warn('Service Workers not supported');\n        return false;\n      }\n\n      // Check if push messaging is supported\n      if (!('PushManager' in window)) {\n        console.warn('Push messaging not supported');\n        return false;\n      }\n\n      // Register service worker\n      this.registration = await navigator.serviceWorker.register('/sw.js');\n      console.log('Service Worker registered:', this.registration);\n\n      // Wait for service worker to be ready\n      await navigator.serviceWorker.ready;\n\n      // Get VAPID public key\n      await this.fetchVapidPublicKey();\n\n      return true;\n    } catch (error) {\n      console.error('Failed to initialize push notifications:', error);\n      return false;\n    }\n  }\n\n  // Request notification permission\n  async requestPermission(): Promise<NotificationPermissionResult> {\n    try {\n      if (!('Notification' in window)) {\n        return { granted: false, error: 'Notifications not supported' };\n      }\n\n      const permission = await Notification.requestPermission();\n      return { granted: permission === 'granted' };\n    } catch (error) {\n      return { \n        granted: false, \n        error: error instanceof Error ? error.message : 'Permission request failed' \n      };\n    }\n  }\n\n  // Check current permission status\n  getPermissionStatus(): NotificationPermission | null {\n    if (!('Notification' in window)) {\n      return null;\n    }\n    return Notification.permission;\n  }\n\n  // Subscribe to push notifications\n  async subscribe(): Promise<{ success: boolean; error?: string }> {\n    try {\n      if (!this.registration) {\n        throw new Error('Service Worker not registered');\n      }\n\n      if (!this.vapidPublicKey) {\n        throw new Error('VAPID public key not available');\n      }\n\n      // Check permission\n      const permission = this.getPermissionStatus();\n      if (permission !== 'granted') {\n        const result = await this.requestPermission();\n        if (!result.granted) {\n          throw new Error(result.error || 'Permission denied');\n        }\n      }\n\n      // Subscribe to push manager\n      const subscription = await this.registration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: this.urlBase64ToUint8Array(this.vapidPublicKey)\n      });\n\n      // Send subscription to server\n      const subscriptionData: PushSubscriptionData = {\n        subscription: {\n          endpoint: subscription.endpoint,\n          keys: {\n            p256dh: this.arrayBufferToBase64(subscription.getKey('p256dh')!),\n            auth: this.arrayBufferToBase64(subscription.getKey('auth')!)\n          }\n        },\n        deviceInfo: this.getDeviceInfo()\n      };\n\n      const response = await fetch(`${this.apiBaseUrl}/push/subscribe`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(subscriptionData)\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Subscription failed');\n      }\n\n      console.log('Successfully subscribed to push notifications');\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to subscribe to push notifications:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Unsubscribe from push notifications\n  async unsubscribe(): Promise<{ success: boolean; error?: string }> {\n    try {\n      if (!this.registration) {\n        throw new Error('Service Worker not registered');\n      }\n\n      const subscription = await this.registration.pushManager.getSubscription();\n      if (!subscription) {\n        return { success: true }; // Already unsubscribed\n      }\n\n      // Unsubscribe from push manager\n      await subscription.unsubscribe();\n\n      // Notify server\n      const response = await fetch(`${this.apiBaseUrl}/push/unsubscribe`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          endpoint: subscription.endpoint\n        })\n      });\n\n      if (!response.ok) {\n        console.warn('Failed to notify server of unsubscription');\n      }\n\n      console.log('Successfully unsubscribed from push notifications');\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to unsubscribe from push notifications:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Check if user is currently subscribed\n  async isSubscribed(): Promise<boolean> {\n    try {\n      if (!this.registration) {\n        return false;\n      }\n\n      const subscription = await this.registration.pushManager.getSubscription();\n      return subscription !== null;\n    } catch (error) {\n      console.error('Failed to check subscription status:', error);\n      return false;\n    }\n  }\n\n  // Get current subscription\n  async getSubscription(): Promise<PushSubscription | null> {\n    try {\n      if (!this.registration) {\n        return null;\n      }\n\n      return await this.registration.pushManager.getSubscription();\n    } catch (error) {\n      console.error('Failed to get subscription:', error);\n      return null;\n    }\n  }\n\n  // Admin-specific methods for testing\n\n  // Admin subscribe (for testing purposes)\n  async adminSubscribe(): Promise<{ success: boolean; error?: string }> {\n    try {\n      if (!this.registration) {\n        throw new Error('Service Worker not registered');\n      }\n\n      if (!this.vapidPublicKey) {\n        throw new Error('VAPID public key not available');\n      }\n\n      // Check permission\n      const permission = this.getPermissionStatus();\n      if (permission !== 'granted') {\n        const result = await this.requestPermission();\n        if (!result.granted) {\n          throw new Error(result.error || 'Permission denied');\n        }\n      }\n\n      // Subscribe to push manager\n      const subscription = await this.registration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: this.urlBase64ToUint8Array(this.vapidPublicKey)\n      });\n\n      // Send subscription to server (admin endpoint)\n      const subscriptionData: PushSubscriptionData = {\n        subscription: {\n          endpoint: subscription.endpoint,\n          keys: {\n            p256dh: this.arrayBufferToBase64(subscription.getKey('p256dh')!),\n            auth: this.arrayBufferToBase64(subscription.getKey('auth')!)\n          }\n        },\n        deviceInfo: this.getDeviceInfo()\n      };\n\n      const response = await fetch(`${this.apiBaseUrl}/push/admin/subscribe`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(subscriptionData)\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Admin subscription failed');\n      }\n\n      console.log('Successfully subscribed admin to push notifications');\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to subscribe admin to push notifications:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Admin unsubscribe\n  async adminUnsubscribe(): Promise<{ success: boolean; error?: string }> {\n    try {\n      if (!this.registration) {\n        throw new Error('Service Worker not registered');\n      }\n\n      const subscription = await this.registration.pushManager.getSubscription();\n      if (!subscription) {\n        return { success: true }; // Already unsubscribed\n      }\n\n      // Unsubscribe from push manager\n      await subscription.unsubscribe();\n\n      // Notify server (admin endpoint)\n      const response = await fetch(`${this.apiBaseUrl}/push/admin/unsubscribe`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          endpoint: subscription.endpoint\n        })\n      });\n\n      if (!response.ok) {\n        console.warn('Failed to notify server of admin unsubscription');\n      }\n\n      console.log('Successfully unsubscribed admin from push notifications');\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to unsubscribe admin from push notifications:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Send admin test notification\n  async sendAdminTestNotification(): Promise<{ success: boolean; error?: string }> {\n    try {\n      const response = await fetch(`${this.apiBaseUrl}/push/admin/test`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Admin test notification failed');\n      }\n\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to send admin test notification:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Send a test notification (legacy method, kept for compatibility)\n  async sendTestNotification(): Promise<{ success: boolean; error?: string }> {\n    try {\n      const response = await fetch(`${this.apiBaseUrl}/push/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          title: 'Test Notification',\n          body: 'This is a test notification from Vibebase',\n          icon: '/favicon.svg',\n          tag: 'test-notification'\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Test notification failed');\n      }\n\n      return { success: true };\n    } catch (error) {\n      console.error('Failed to send test notification:', error);\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : 'Unknown error' \n      };\n    }\n  }\n\n  // Private methods\n\n  private async fetchVapidPublicKey(): Promise<void> {\n    try {\n      const response = await fetch(`${this.apiBaseUrl}/push/vapid-public-key`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch VAPID public key');\n      }\n\n      const data = await response.json();\n      this.vapidPublicKey = data.publicKey;\n    } catch (error) {\n      console.error('Failed to fetch VAPID public key:', error);\n      throw error;\n    }\n  }\n\n  private urlBase64ToUint8Array(base64String: string): Uint8Array {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n      .replace(/-/g, '+')\n      .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n  }\n\n  private arrayBufferToBase64(buffer: ArrayBuffer): string {\n    const bytes = new Uint8Array(buffer);\n    let binary = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  }\n\n  private getDeviceInfo() {\n    const navigator = window.navigator;\n    const userAgent = navigator.userAgent;\n    \n    let browser = 'Unknown';\n    let version = 'Unknown';\n    let platform = 'web';\n\n    // Detect browser\n    if (userAgent.includes('Chrome')) {\n      browser = 'Chrome';\n      const match = userAgent.match(/Chrome\\/(\\d+)/);\n      version = match ? match[1] : 'Unknown';\n    } else if (userAgent.includes('Firefox')) {\n      browser = 'Firefox';\n      const match = userAgent.match(/Firefox\\/(\\d+)/);\n      version = match ? match[1] : 'Unknown';\n    } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {\n      browser = 'Safari';\n      const match = userAgent.match(/Version\\/(\\d+)/);\n      version = match ? match[1] : 'Unknown';\n    } else if (userAgent.includes('Edge')) {\n      browser = 'Edge';\n      const match = userAgent.match(/Edge\\/(\\d+)/);\n      version = match ? match[1] : 'Unknown';\n    }\n\n    // Detect platform\n    if (userAgent.includes('Mobile') || userAgent.includes('Android')) {\n      platform = 'android';\n    } else if (userAgent.includes('iPhone') || userAgent.includes('iPad')) {\n      platform = 'ios';\n    }\n\n    return {\n      userAgent,\n      browser,\n      version,\n      platform\n    };\n  }\n}\n\n// Global instance\nexport const pushManager = new PushManager();","import { useState, useEffect } from 'preact/hooks';\nimport { pushManager } from '../lib/push-manager';\n\ninterface NotificationRule {\n  id: string;\n  name: string;\n  description?: string;\n  triggerType: 'db_change' | 'api';\n  tableName?: string;\n  eventType?: 'insert' | 'update' | 'delete';\n  recipientType: 'specific_user' | 'column_reference' | 'all_users';\n  recipientValue?: string;\n  titleTemplate: string;\n  bodyTemplate: string;\n  iconUrl?: string;\n  imageUrl?: string;\n  clickAction?: string;\n  priority: 'high' | 'normal' | 'low';\n  ttl: number;\n  enabled: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface NotificationLog {\n  id: string;\n  ruleId?: string;\n  userId: string;\n  provider: string;\n  title: string;\n  body: string;\n  status: 'sent' | 'failed' | 'pending';\n  errorMessage?: string;\n  sentAt?: string;\n  createdAt: string;\n}\n\nexport default function PushNotifications() {\n  const [isAdminSubscribed, setIsAdminSubscribed] = useState(false);\n  const [permission, setPermission] = useState<NotificationPermission | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [rules, setRules] = useState<NotificationRule[]>([]);\n  const [logs, setLogs] = useState<NotificationLog[]>([]);\n  const [vapidPublicKey, setVapidPublicKey] = useState<string>('');\n  const [activeTab, setActiveTab] = useState<'settings' | 'test' | 'rules' | 'logs'>('settings');\n  const [showRuleForm, setShowRuleForm] = useState(false);\n  const [editingRule, setEditingRule] = useState<NotificationRule | null>(null);\n\n  useEffect(() => {\n    initializePush();\n    fetchRules();\n    fetchLogs();\n    fetchVapidPublicKey();\n    checkAdminSubscription();\n  }, []);\n\n  const initializePush = async () => {\n    await pushManager.initialize();\n    setPermission(pushManager.getPermissionStatus());\n  };\n\n  const fetchVapidPublicKey = async () => {\n    try {\n      const response = await fetch('/api/push/vapid-public-key');\n      if (response.ok) {\n        const data = await response.json();\n        setVapidPublicKey(data.publicKey);\n      }\n    } catch (error) {\n      console.error('Failed to fetch VAPID public key:', error);\n    }\n  };\n\n  const checkAdminSubscription = async () => {\n    try {\n      const response = await fetch('/api/push/admin/subscription', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setIsAdminSubscribed(data.isSubscribed);\n      }\n    } catch (error) {\n      console.error('Failed to check admin subscription:', error);\n    }\n  };\n\n  const fetchRules = async () => {\n    try {\n      const response = await fetch('/api/push/rules', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setRules(data.rules || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch rules:', error);\n    }\n  };\n\n  const fetchLogs = async () => {\n    try {\n      const response = await fetch('/api/push/logs?limit=50', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setLogs(data.logs || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch logs:', error);\n    }\n  };\n\n  const handleAdminSubscribe = async () => {\n    setLoading(true);\n    try {\n      const result = await pushManager.adminSubscribe();\n      if (result.success) {\n        setIsAdminSubscribed(true);\n        setPermission('granted');\n        alert('Successfully subscribed to push notifications for testing!');\n      } else {\n        alert(`Failed to subscribe: ${result.error}`);\n      }\n    } catch (error) {\n      alert(`Error: ${error}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAdminUnsubscribe = async () => {\n    setLoading(true);\n    try {\n      const result = await pushManager.adminUnsubscribe();\n      if (result.success) {\n        setIsAdminSubscribed(false);\n        alert('Successfully unsubscribed from push notifications!');\n      } else {\n        alert(`Failed to unsubscribe: ${result.error}`);\n      }\n    } catch (error) {\n      alert(`Error: ${error}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAdminTestNotification = async () => {\n    setLoading(true);\n    try {\n      const result = await pushManager.sendAdminTestNotification();\n      if (result.success) {\n        alert('Test notification sent! Check your notifications.');\n        fetchLogs(); // Refresh logs after sending\n      } else {\n        alert(`Failed to send test notification: ${result.error}`);\n      }\n    } catch (error) {\n      alert(`Error: ${error}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteRule = async (ruleId: string) => {\n    if (!confirm('Are you sure you want to delete this rule?')) return;\n\n    try {\n      const response = await fetch(`/api/push/rules/${ruleId}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        fetchRules();\n        alert('Rule deleted successfully');\n      } else {\n        alert('Failed to delete rule');\n      }\n    } catch (error) {\n      console.error('Failed to delete rule:', error);\n      alert('Error deleting rule');\n    }\n  };\n\n  const handleToggleRule = async (rule: NotificationRule) => {\n    try {\n      const response = await fetch(`/api/push/rules/${rule.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          ...rule,\n          enabled: !rule.enabled\n        })\n      });\n\n      if (response.ok) {\n        fetchRules();\n      } else {\n        alert('Failed to toggle rule');\n      }\n    } catch (error) {\n      console.error('Failed to toggle rule:', error);\n      alert('Error toggling rule');\n    }\n  };\n\n  const renderSettings = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">VAPID Configuration</h3>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Public Key</label>\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <code className=\"text-sm text-gray-800 break-all\">\n                {vapidPublicKey || 'Loading...'}\n              </code>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Use this public key in your client application for Web Push subscriptions\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Subject</label>\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <code className=\"text-sm text-gray-800\">mailto:support@vibebase.app</code>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              VAPID subject for push notification identification\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">API Endpoints</label>\n            <div className=\"bg-gray-50 p-3 rounded-md space-y-2\">\n              <div><strong>Subscribe:</strong> <code className=\"text-sm\">POST /api/push/subscribe</code></div>\n              <div><strong>Unsubscribe:</strong> <code className=\"text-sm\">POST /api/push/unsubscribe</code></div>\n              <div><strong>Send Notification:</strong> <code className=\"text-sm\">POST /api/push/send</code></div>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Use these endpoints in your application for end-user push notification management\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderTest = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Admin Test Notifications</h3>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Test push notifications by subscribing your browser and sending test messages\n        </p>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Browser Permission</label>\n            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n              permission === 'granted' ? 'bg-green-100 text-green-800' :\n              permission === 'denied' ? 'bg-red-100 text-red-800' :\n              'bg-yellow-100 text-yellow-800'\n            }`}>\n              {permission || 'Unknown'}\n            </span>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Admin Subscription Status</label>\n            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n              isAdminSubscribed ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n            }`}>\n              {isAdminSubscribed ? 'Subscribed' : 'Not Subscribed'}\n            </span>\n          </div>\n\n          <div className=\"flex space-x-3\">\n            {!isAdminSubscribed ? (\n              <button\n                onClick={handleAdminSubscribe}\n                disabled={loading || permission === 'denied'}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50\"\n              >\n                {loading ? 'Subscribing...' : 'Subscribe for Testing'}\n              </button>\n            ) : (\n              <>\n                <button\n                  onClick={handleAdminUnsubscribe}\n                  disabled={loading}\n                  className=\"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50\"\n                >\n                  {loading ? 'Unsubscribing...' : 'Unsubscribe'}\n                </button>\n                <button\n                  onClick={handleAdminTestNotification}\n                  disabled={loading}\n                  className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                >\n                  {loading ? 'Sending...' : 'Send Test Notification'}\n                </button>\n              </>\n            )}\n          </div>\n          \n          {permission === 'denied' && (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-4\">\n              <div className=\"flex\">\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-yellow-800\">\n                    Notifications Blocked\n                  </h3>\n                  <div className=\"mt-2 text-sm text-yellow-700\">\n                    <p>\n                      Browser notifications are blocked. To test push notifications, please:\n                    </p>\n                    <ol className=\"list-decimal list-inside mt-1\">\n                      <li>Click the lock icon in your browser's address bar</li>\n                      <li>Set notifications to \"Allow\"</li>\n                      <li>Refresh this page</li>\n                    </ol>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderRules = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Notification Rules</h3>\n        <button\n          onClick={() => setShowRuleForm(true)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n        >\n          Create Rule\n        </button>\n      </div>\n\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200\">\n          {rules.map((rule) => (\n            <li key={rule.id} className=\"px-6 py-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center\">\n                    <h4 className=\"text-lg font-medium text-gray-900\">{rule.name}</h4>\n                    <span className={`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      rule.enabled ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {rule.enabled ? 'Enabled' : 'Disabled'}\n                    </span>\n                  </div>\n                  {rule.description && (\n                    <p className=\"text-sm text-gray-600 mt-1\">{rule.description}</p>\n                  )}\n                  <div className=\"mt-2 text-sm text-gray-500\">\n                    <span className=\"bg-gray-100 px-2 py-1 rounded mr-2\">{rule.triggerType}</span>\n                    {rule.tableName && (\n                      <span className=\"bg-blue-100 px-2 py-1 rounded mr-2\">{rule.tableName}</span>\n                    )}\n                    {rule.eventType && (\n                      <span className=\"bg-purple-100 px-2 py-1 rounded mr-2\">{rule.eventType}</span>\n                    )}\n                    <span className=\"bg-yellow-100 px-2 py-1 rounded\">{rule.recipientType}</span>\n                  </div>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => handleToggleRule(rule)}\n                    className={`px-3 py-1 text-sm rounded-md ${\n                      rule.enabled \n                        ? 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'\n                        : 'bg-green-100 text-green-800 hover:bg-green-200'\n                    }`}\n                  >\n                    {rule.enabled ? 'Disable' : 'Enable'}\n                  </button>\n                  <button\n                    onClick={() => {\n                      setEditingRule(rule);\n                      setShowRuleForm(true);\n                    }}\n                    className=\"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    onClick={() => handleDeleteRule(rule.id)}\n                    className=\"px-3 py-1 text-sm bg-red-100 text-red-800 rounded-md hover:bg-red-200\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n        {rules.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            No notification rules configured yet\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderRuleForm = () => {\n    const [formData, setFormData] = useState({\n      name: editingRule?.name || '',\n      description: editingRule?.description || '',\n      triggerType: editingRule?.triggerType || 'db_change' as 'db_change' | 'api',\n      tableName: editingRule?.tableName || '',\n      eventType: editingRule?.eventType || 'insert' as 'insert' | 'update' | 'delete',\n      recipientType: editingRule?.recipientType || 'all_users' as 'specific_user' | 'column_reference' | 'all_users',\n      recipientValue: editingRule?.recipientValue || '',\n      titleTemplate: editingRule?.titleTemplate || '',\n      bodyTemplate: editingRule?.bodyTemplate || '',\n      iconUrl: editingRule?.iconUrl || '',\n      imageUrl: editingRule?.imageUrl || '',\n      clickAction: editingRule?.clickAction || '',\n      priority: editingRule?.priority || 'normal' as 'high' | 'normal' | 'low',\n      ttl: editingRule?.ttl || 86400,\n      enabled: editingRule?.enabled ?? true\n    });\n\n    const handleSubmit = async (e: Event) => {\n      e.preventDefault();\n      setLoading(true);\n\n      try {\n        const url = editingRule \n          ? `/api/push/rules/${editingRule.id}`\n          : '/api/push/rules';\n        \n        const method = editingRule ? 'PUT' : 'POST';\n\n        // Clean up data before sending\n        const cleanedData = {\n          ...formData,\n          iconUrl: formData.iconUrl.trim() || undefined,\n          imageUrl: formData.imageUrl.trim() || undefined,\n          clickAction: formData.clickAction.trim() || undefined,\n          description: formData.description.trim() || undefined,\n          tableName: formData.triggerType === 'db_change' ? formData.tableName : undefined,\n          eventType: formData.triggerType === 'db_change' ? formData.eventType : undefined,\n          recipientValue: formData.recipientType !== 'all_users' ? formData.recipientValue : undefined\n        };\n\n        const response = await fetch(url, {\n          method,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include',\n          body: JSON.stringify(cleanedData)\n        });\n\n        if (response.ok) {\n          alert(editingRule ? 'Rule updated successfully' : 'Rule created successfully');\n          setShowRuleForm(false);\n          setEditingRule(null);\n          fetchRules();\n        } else {\n          const errorData = await response.json();\n          console.error('API Error:', errorData);\n          if (errorData.details) {\n            console.error('Validation errors:', errorData.details);\n          }\n          alert(`Failed to ${editingRule ? 'update' : 'create'} rule: ${errorData.error}${errorData.details ? '\\n\\nValidation errors: ' + JSON.stringify(errorData.details, null, 2) : ''}`);\n        }\n      } catch (error) {\n        alert(`Error ${editingRule ? 'updating' : 'creating'} rule: ${error}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n        <div className=\"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white\">\n          <div className=\"mt-3\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n              {editingRule ? 'Edit Notification Rule' : 'Create Notification Rule'}\n            </h3>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Name *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.name}\n                    onChange={(e) => setFormData({...formData, name: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({...formData, description: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Trigger Type *</label>\n                  <select\n                    value={formData.triggerType}\n                    onChange={(e) => setFormData({...formData, triggerType: e.target.value as 'db_change' | 'api'})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"db_change\">Database Change</option>\n                    <option value=\"api\">API Trigger</option>\n                  </select>\n                </div>\n\n                {formData.triggerType === 'db_change' && (\n                  <>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Table Name *</label>\n                      <input\n                        type=\"text\"\n                        required\n                        value={formData.tableName}\n                        onChange={(e) => setFormData({...formData, tableName: e.target.value})}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Event Type *</label>\n                      <select\n                        value={formData.eventType}\n                        onChange={(e) => setFormData({...formData, eventType: e.target.value as 'insert' | 'update' | 'delete'})}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      >\n                        <option value=\"insert\">Insert</option>\n                        <option value=\"update\">Update</option>\n                        <option value=\"delete\">Delete</option>\n                      </select>\n                    </div>\n                  </>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Recipient Type *</label>\n                  <select\n                    value={formData.recipientType}\n                    onChange={(e) => setFormData({...formData, recipientType: e.target.value as 'specific_user' | 'column_reference' | 'all_users'})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"all_users\">All Users</option>\n                    <option value=\"specific_user\">Specific User</option>\n                    <option value=\"column_reference\">Column Reference</option>\n                  </select>\n                </div>\n\n                {formData.recipientType !== 'all_users' && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      {formData.recipientType === 'specific_user' ? 'User ID' : 'Column Name'} *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={formData.recipientValue}\n                      onChange={(e) => setFormData({...formData, recipientValue: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title Template *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.titleTemplate}\n                    onChange={(e) => setFormData({...formData, titleTemplate: e.target.value})}\n                    placeholder=\"e.g., New message from {{user_name}}\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Body Template *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.bodyTemplate}\n                    onChange={(e) => setFormData({...formData, bodyTemplate: e.target.value})}\n                    placeholder=\"e.g., {{message}}\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Icon URL</label>\n                  <input\n                    type=\"url\"\n                    value={formData.iconUrl}\n                    onChange={(e) => setFormData({...formData, iconUrl: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Image URL</label>\n                  <input\n                    type=\"url\"\n                    value={formData.imageUrl}\n                    onChange={(e) => setFormData({...formData, imageUrl: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Click Action URL</label>\n                  <input\n                    type=\"text\"\n                    value={formData.clickAction}\n                    onChange={(e) => setFormData({...formData, clickAction: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Priority</label>\n                  <select\n                    value={formData.priority}\n                    onChange={(e) => setFormData({...formData, priority: e.target.value as 'high' | 'normal' | 'low'})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"high\">High</option>\n                    <option value=\"normal\">Normal</option>\n                    <option value=\"low\">Low</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">TTL (seconds)</label>\n                  <input\n                    type=\"number\"\n                    value={formData.ttl}\n                    onChange={(e) => setFormData({...formData, ttl: parseInt(e.target.value)})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  id=\"enabled\"\n                  checked={formData.enabled}\n                  onChange={(e) => setFormData({...formData, enabled: e.target.checked})}\n                  className=\"mr-2\"\n                />\n                <label htmlFor=\"enabled\" className=\"text-sm font-medium text-gray-700\">Enabled</label>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowRuleForm(false);\n                    setEditingRule(null);\n                  }}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  {loading ? 'Saving...' : (editingRule ? 'Update Rule' : 'Create Rule')}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderLogs = () => (\n    <div className=\"space-y-6\">\n      <h3 className=\"text-lg font-medium text-gray-900\">Notification Logs</h3>\n      \n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200\">\n          {logs.map((log) => (\n            <li key={log.id} className=\"px-6 py-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center\">\n                    <h4 className=\"text-sm font-medium text-gray-900\">{log.title}</h4>\n                    <span className={`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      log.status === 'sent' ? 'bg-green-100 text-green-800' :\n                      log.status === 'failed' ? 'bg-red-100 text-red-800' :\n                      'bg-yellow-100 text-yellow-800'\n                    }`}>\n                      {log.status}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">{log.body}</p>\n                  {log.errorMessage && (\n                    <p className=\"text-sm text-red-600 mt-1\">{log.errorMessage}</p>\n                  )}\n                  <div className=\"mt-2 text-xs text-gray-500\">\n                    User: {log.userId} | Provider: {log.provider} | {(() => {\n                      // SQLiteのCURRENT_TIMESTAMPはUTCなので、明示的にローカルタイムゾーンに変換\n                      console.log('Original log.createdAt:', log.createdAt);\n                      console.log('Type of log.createdAt:', typeof log.createdAt);\n                      \n                      let date;\n                      if (log.createdAt.includes('T') && !log.createdAt.endsWith('Z')) {\n                        // ISO形式だがZがない場合、UTCとして扱う\n                        date = new Date(log.createdAt + 'Z');\n                      } else {\n                        // そのまま解釈\n                        date = new Date(log.createdAt);\n                      }\n                      \n                      console.log('Parsed date:', date);\n                      console.log('Local time:', date.toLocaleString());\n                      \n                      return date.toLocaleString(undefined, { \n                        year: 'numeric',\n                        month: '2-digit', \n                        day: '2-digit',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                        second: '2-digit'\n                      });\n                    })()}\n                  </div>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n        {logs.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            No notification logs available\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Push Notifications</h1>\n        <p className=\"mt-2 text-gray-600\">\n          Manage push notification settings, rules, and view delivery logs\n        </p>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-8\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {[\n            { id: 'settings', name: 'Settings' },\n            { id: 'test', name: 'Test' },\n            { id: 'rules', name: 'Rules' },\n            { id: 'logs', name: 'Logs' }\n          ].map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === tab.id\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              {tab.name}\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'settings' && renderSettings()}\n      {activeTab === 'test' && renderTest()}\n      {activeTab === 'rules' && renderRules()}\n      {activeTab === 'logs' && renderLogs()}\n\n      {/* Rule Form Modal */}\n      {showRuleForm && renderRuleForm()}\n    </div>\n  );\n}","import { useEffect, useState } from 'preact/hooks'\n\ninterface Admin {\n  id: string\n  github_username: string\n  is_root: boolean\n  created_at: string\n}\n\ninterface APIKey {\n  id: string\n  name: string\n  key_prefix: string\n  scopes: string[]\n  created_at: string\n  last_used_at: string | null\n  expires_at: string | null\n  is_active: boolean\n}\n\ninterface CreateAPIKeyRequest {\n  name: string\n  scopes: string[]\n  expires_in_days?: number\n}\n\ninterface CreateAPIKeyResponse {\n  id: string\n  name: string\n  key: string\n  scopes: string[]\n  expires_at: string | null\n}\n\ninterface AppSetting {\n  key: string\n  value: string\n  updated_at: string\n}\n\nexport function SettingsPage() {\n  // Navigation state\n  const [activeSection, setActiveSection] = useState<'app-settings' | 'admins' | 'api-keys'>(\n    'app-settings'\n  )\n\n  const [admins, setAdmins] = useState<Admin[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [newUsername, setNewUsername] = useState('')\n  const [adding, setAdding] = useState(false)\n  const [removeConfirm, setRemoveConfirm] = useState<{ id: string; username: string } | null>(null)\n\n  // API Keys state\n  const [apiKeys, setApiKeys] = useState<APIKey[]>([])\n  const [apiKeysLoading, setApiKeysLoading] = useState(false)\n  const [apiKeysError, setApiKeysError] = useState<string | null>(null)\n  const [showCreateKey, setShowCreateKey] = useState(false)\n  const [newKeyData, setNewKeyData] = useState<CreateAPIKeyRequest>({\n    name: '',\n    scopes: [],\n    expires_in_days: 30,\n  })\n  const [createdKey, setCreatedKey] = useState<CreateAPIKeyResponse | null>(null)\n  const [availableScopes] = useState([\n    'data:read',\n    'data:write',\n    'data:delete',\n    'tables:read',\n    'tables:write',\n    'tables:delete',\n    'storage:read',\n    'storage:write',\n    'storage:delete',\n  ])\n  const [revokeConfirm, setRevokeConfirm] = useState<{ id: string; name: string } | null>(null)\n\n  // App Settings state\n  const [appSettings, setAppSettings] = useState<AppSetting[]>([])\n  const [appSettingsLoading, setAppSettingsLoading] = useState(false)\n  const [appSettingsError, setAppSettingsError] = useState<string | null>(null)\n  const [editingAppSettings, setEditingAppSettings] = useState(false)\n  const [appSettingsForm, setAppSettingsForm] = useState<Record<string, string>>({})\n  const [appSettingsSaving, setAppSettingsSaving] = useState(false)\n\n  // Load admins\n  const loadAdmins = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      const response = await fetch('/api/admin', {\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to load admins')\n      }\n\n      const data = await response.json()\n      setAdmins(data.admins)\n    } catch (err) {\n      console.error('Failed to load admins:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load admins')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Add new admin\n  const addAdmin = async (e: Event) => {\n    e.preventDefault()\n\n    if (!newUsername.trim()) {\n      setError('GitHub username is required')\n      return\n    }\n\n    try {\n      setAdding(true)\n      setError(null)\n\n      const response = await fetch('/api/admin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          github_username: newUsername.trim(),\n        }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to add admin')\n      }\n\n      setNewUsername('')\n      await loadAdmins()\n    } catch (err) {\n      console.error('Failed to add admin:', err)\n      setError(err instanceof Error ? err.message : 'Failed to add admin')\n    } finally {\n      setAdding(false)\n    }\n  }\n\n  // Remove admin\n  const removeAdmin = async (adminId: string) => {\n    try {\n      setError(null)\n\n      const response = await fetch(`/api/admin/${adminId}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to remove admin')\n      }\n\n      setRemoveConfirm(null)\n      await loadAdmins()\n    } catch (err) {\n      console.error('Failed to remove admin:', err)\n      setError(err instanceof Error ? err.message : 'Failed to remove admin')\n    }\n  }\n\n  // Load API keys\n  const loadApiKeys = async () => {\n    try {\n      setApiKeysLoading(true)\n      setApiKeysError(null)\n\n      // First initialize table if needed\n      const initResponse = await fetch('/api/api-keys/init', {\n        method: 'POST',\n        credentials: 'include',\n      })\n\n      if (!initResponse.ok) {\n        const _initErrorData = await initResponse.json().catch(() => ({}))\n        // Continue anyway, table might already exist\n      }\n\n      const response = await fetch('/api/api-keys', {\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(\n          `Failed to load API keys: ${response.status} - ${errorData.error || 'Unknown error'}`\n        )\n      }\n\n      const data = await response.json()\n      setApiKeys(data.data || [])\n    } catch (err) {\n      console.error('Failed to load API keys:', err)\n      // Show more detailed error information\n      let errorMessage = 'Failed to load API keys'\n      if (err instanceof Error) {\n        errorMessage = err.message\n      }\n      if (typeof err === 'object' && err !== null && 'status' in err) {\n        errorMessage += ` (Status: ${(err as any).status})`\n      }\n      setApiKeysError(errorMessage)\n    } finally {\n      setApiKeysLoading(false)\n    }\n  }\n\n  // Create new API key\n  const createApiKey = async (e: Event) => {\n    e.preventDefault()\n\n    if (!newKeyData.name.trim() || newKeyData.scopes.length === 0) {\n      setApiKeysError('Name and at least one scope are required')\n      return\n    }\n\n    try {\n      setApiKeysError(null)\n\n      const response = await fetch('/api/api-keys', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(newKeyData),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        const errorMessage = `Failed to create API key: ${response.status} - ${errorData.error || 'Unknown error'}`\n        if (errorData.details) {\n          throw new Error(`${errorMessage}. Details: ${JSON.stringify(errorData.details)}`)\n        }\n        throw new Error(errorMessage)\n      }\n\n      const result = await response.json()\n      setCreatedKey(result.data)\n      setShowCreateKey(false)\n      setNewKeyData({ name: '', scopes: [], expires_in_days: 30 })\n      await loadApiKeys()\n    } catch (err) {\n      console.error('Failed to create API key:', err)\n      setApiKeysError(err instanceof Error ? err.message : 'Failed to create API key')\n    }\n  }\n\n  // Revoke API key\n  const revokeApiKey = async (keyId: string) => {\n    try {\n      setApiKeysError(null)\n\n      const response = await fetch(`/api/api-keys/${keyId}/revoke`, {\n        method: 'PATCH',\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        const errorMessage = `Failed to revoke API key: ${response.status} - ${errorData.error || 'Unknown error'}`\n        if (errorData.details) {\n          throw new Error(`${errorMessage}. Details: ${JSON.stringify(errorData.details)}`)\n        }\n        throw new Error(errorMessage)\n      }\n\n      setRevokeConfirm(null)\n      await loadApiKeys()\n    } catch (err) {\n      console.error('Failed to revoke API key:', err)\n      setApiKeysError(err instanceof Error ? err.message : 'Failed to revoke API key')\n    }\n  }\n\n  const toggleScope = (scope: string) => {\n    setNewKeyData((prev) => ({\n      ...prev,\n      scopes: prev.scopes.includes(scope)\n        ? prev.scopes.filter((s) => s !== scope)\n        : [...prev.scopes, scope],\n    }))\n  }\n\n  // Load app settings\n  const loadAppSettings = async () => {\n    try {\n      setAppSettingsLoading(true)\n      setAppSettingsError(null)\n      const response = await fetch('/api/app-settings', {\n        credentials: 'include',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to load app settings')\n      }\n\n      const data = await response.json()\n      setAppSettings(data.settings)\n\n      // Initialize form data\n      const formData: Record<string, string> = {}\n      data.settings.forEach((setting: AppSetting) => {\n        formData[setting.key] = setting.value\n      })\n      setAppSettingsForm(formData)\n    } catch (err) {\n      console.error('Failed to load app settings:', err)\n      setAppSettingsError(err instanceof Error ? err.message : 'Failed to load app settings')\n    } finally {\n      setAppSettingsLoading(false)\n    }\n  }\n\n  // Save app settings\n  const saveAppSettings = async () => {\n    try {\n      setAppSettingsSaving(true)\n      setAppSettingsError(null)\n\n      const response = await fetch('/api/app-settings', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(appSettingsForm),\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to save app settings')\n      }\n\n      const data = await response.json()\n      setAppSettings(data.settings)\n      setEditingAppSettings(false)\n    } catch (err) {\n      console.error('Failed to save app settings:', err)\n      setAppSettingsError(err instanceof Error ? err.message : 'Failed to save app settings')\n    } finally {\n      setAppSettingsSaving(false)\n    }\n  }\n\n  useEffect(() => {\n    loadAdmins()\n    loadApiKeys()\n    loadAppSettings()\n  }, [])\n\n  return (\n    <div>\n      <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Settings</h2>\n\n      <div class=\"flex gap-6\">\n        {/* Navigation Sidebar */}\n        <div class=\"w-64 flex-shrink-0\">\n          <nav class=\"space-y-1\">\n            <button\n              onClick={() => setActiveSection('app-settings')}\n              class={`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                activeSection === 'app-settings'\n                  ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              Application Settings\n            </button>\n            <button\n              onClick={() => setActiveSection('admins')}\n              class={`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                activeSection === 'admins'\n                  ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              Admin Management\n            </button>\n            <button\n              onClick={() => setActiveSection('api-keys')}\n              class={`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                activeSection === 'api-keys'\n                  ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700'\n                  : 'text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              API Keys\n            </button>\n          </nav>\n        </div>\n\n        {/* Content Area */}\n        <div class=\"flex-1\">\n          {/* Application Settings Section */}\n          {activeSection === 'app-settings' && (\n            <div class=\"bg-white shadow rounded-lg\">\n              <div class=\"px-4 py-5 sm:p-6\">\n                <div class=\"flex justify-between items-center mb-4\">\n                  <h3 class=\"text-lg font-medium text-gray-900\">Application Settings</h3>\n                  {!editingAppSettings && (\n                    <button\n                      onClick={() => setEditingAppSettings(true)}\n                      class=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                    >\n                      Edit Settings\n                    </button>\n                  )}\n                </div>\n\n                {appSettingsError && (\n                  <div class=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n                    <p class=\"text-sm text-red-600\">{appSettingsError}</p>\n                  </div>\n                )}\n\n                {appSettingsLoading ? (\n                  <p class=\"text-gray-500\">Loading app settings...</p>\n                ) : (\n                  <div class=\"space-y-4\">\n                    <div>\n                      <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Application Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={appSettingsForm.app_name || ''}\n                        onChange={(e) =>\n                          setAppSettingsForm((prev) => ({\n                            ...prev,\n                            app_name: (e.target as HTMLInputElement).value,\n                          }))\n                        }\n                        disabled={!editingAppSettings}\n                        class={`w-full px-3 py-2 border ${editingAppSettings ? 'border-gray-300' : 'border-gray-200 bg-gray-50'} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`}\n                        placeholder=\"My Vibebase App\"\n                      />\n                      <p class=\"mt-1 text-sm text-gray-500\">\n                        Used as User-Agent for OAuth providers\n                      </p>\n                    </div>\n\n                    <div>\n                      <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Application URL (optional)\n                      </label>\n                      <input\n                        type=\"url\"\n                        value={appSettingsForm.app_url || ''}\n                        onChange={(e) =>\n                          setAppSettingsForm((prev) => ({\n                            ...prev,\n                            app_url: (e.target as HTMLInputElement).value,\n                          }))\n                        }\n                        disabled={!editingAppSettings}\n                        class={`w-full px-3 py-2 border ${editingAppSettings ? 'border-gray-300' : 'border-gray-200 bg-gray-50'} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`}\n                        placeholder=\"https://myapp.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Support Email (optional)\n                      </label>\n                      <input\n                        type=\"email\"\n                        value={appSettingsForm.support_email || ''}\n                        onChange={(e) =>\n                          setAppSettingsForm((prev) => ({\n                            ...prev,\n                            support_email: (e.target as HTMLInputElement).value,\n                          }))\n                        }\n                        disabled={!editingAppSettings}\n                        class={`w-full px-3 py-2 border ${editingAppSettings ? 'border-gray-300' : 'border-gray-200 bg-gray-50'} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`}\n                        placeholder=\"support@myapp.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Application Description (optional)\n                      </label>\n                      <textarea\n                        value={appSettingsForm.app_description || ''}\n                        onChange={(e) =>\n                          setAppSettingsForm((prev) => ({\n                            ...prev,\n                            app_description: (e.target as HTMLTextAreaElement).value,\n                          }))\n                        }\n                        disabled={!editingAppSettings}\n                        rows={3}\n                        class={`w-full px-3 py-2 border ${editingAppSettings ? 'border-gray-300' : 'border-gray-200 bg-gray-50'} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`}\n                        placeholder=\"A brief description of your application\"\n                      />\n                    </div>\n\n                    {editingAppSettings && (\n                      <div class=\"flex gap-3 pt-4\">\n                        <button\n                          onClick={() => {\n                            setEditingAppSettings(false)\n                            // Reset form to original values\n                            const formData: Record<string, string> = {}\n                            appSettings.forEach((setting) => {\n                              formData[setting.key] = setting.value\n                            })\n                            setAppSettingsForm(formData)\n                          }}\n                          disabled={appSettingsSaving}\n                          class=\"px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                        >\n                          Cancel\n                        </button>\n                        <button\n                          onClick={saveAppSettings}\n                          disabled={appSettingsSaving}\n                          class=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:opacity-50\"\n                        >\n                          {appSettingsSaving ? 'Saving...' : 'Save Settings'}\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Admin Management Section */}\n          {activeSection === 'admins' && (\n            <div class=\"bg-white shadow rounded-lg\">\n              <div class=\"px-4 py-5 sm:p-6\">\n                <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Admin Management</h3>\n\n                {error && (\n                  <div class=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n                    <p class=\"text-sm text-red-600\">{error}</p>\n                  </div>\n                )}\n\n                {/* Add Admin Form */}\n                <form onSubmit={addAdmin} class=\"mb-6\">\n                  <div class=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      value={newUsername}\n                      onInput={(e) => setNewUsername((e.target as HTMLInputElement).value)}\n                      placeholder=\"GitHub username (e.g., meso)\"\n                      class=\"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      disabled={adding}\n                    />\n                    <button\n                      type=\"submit\"\n                      disabled={adding || !newUsername.trim()}\n                      class=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {adding ? 'Adding...' : 'Add Admin'}\n                    </button>\n                  </div>\n                </form>\n\n                {/* Admins List */}\n                {loading ? (\n                  <div class=\"text-center py-4\">\n                    <p class=\"text-gray-500\">Loading admins...</p>\n                  </div>\n                ) : (\n                  <div class=\"space-y-2\">\n                    <h4 class=\"text-sm font-medium text-gray-700 mb-2\">Current Admins</h4>\n                    {admins.length === 0 ? (\n                      <p class=\"text-sm text-gray-500\">No admins found</p>\n                    ) : (\n                      <div class=\"space-y-2\">\n                        {admins.map((admin) => (\n                          <div\n                            key={admin.id}\n                            class=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                          >\n                            <div class=\"flex items-center space-x-3\">\n                              <div>\n                                <p class=\"text-sm font-medium text-gray-900\">\n                                  {admin.github_username}\n                                  {admin.is_root && (\n                                    <span class=\"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                                      Root Admin\n                                    </span>\n                                  )}\n                                </p>\n                                <p class=\"text-xs text-gray-500\">\n                                  Added {new Date(admin.created_at).toLocaleDateString()}\n                                </p>\n                              </div>\n                            </div>\n                            {!admin.is_root && (\n                              <button\n                                onClick={() =>\n                                  setRemoveConfirm({\n                                    id: admin.id,\n                                    username: admin.github_username,\n                                  })\n                                }\n                                class=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                              >\n                                Remove\n                              </button>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* API Keys Section */}\n          {activeSection === 'api-keys' && (\n            <div class=\"bg-white shadow rounded-lg\">\n              <div class=\"px-4 py-5 sm:p-6\">\n                <div class=\"flex items-center justify-between mb-4\">\n                  <h3 class=\"text-lg font-medium text-gray-900\">API Keys</h3>\n                  <div class=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => setShowCreateKey(true)}\n                      class=\"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500\"\n                    >\n                      Create API Key\n                    </button>\n                  </div>\n                </div>\n\n                {apiKeysError && (\n                  <div class=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n                    <p class=\"text-sm text-red-600\">{apiKeysError}</p>\n                  </div>\n                )}\n\n                {/* API Keys List */}\n                {apiKeysLoading ? (\n                  <div class=\"text-center py-4\">\n                    <p class=\"text-gray-500\">Loading API keys...</p>\n                  </div>\n                ) : (\n                  <div class=\"space-y-2\">\n                    {apiKeys.length === 0 ? (\n                      <p class=\"text-sm text-gray-500\">\n                        No API keys found. Create one to get started.\n                      </p>\n                    ) : (\n                      <div class=\"space-y-3\">\n                        {apiKeys.map((key) => (\n                          <div key={key.id} class=\"border border-gray-200 rounded-lg p-4\">\n                            <div class=\"flex items-start justify-between\">\n                              <div class=\"flex-1\">\n                                <div class=\"flex items-center space-x-2 mb-2\">\n                                  <h4 class=\"text-sm font-medium text-gray-900\">{key.name}</h4>\n                                  <span\n                                    class={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                                      key.is_active\n                                        ? 'bg-green-100 text-green-800'\n                                        : 'bg-red-100 text-red-800'\n                                    }`}\n                                  >\n                                    {key.is_active ? 'Active' : 'Revoked'}\n                                  </span>\n                                </div>\n                                <div class=\"text-sm text-gray-600 space-y-1\">\n                                  <p>\n                                    <span class=\"font-medium\">Key:</span> {key.key_prefix}\n                                  </p>\n                                  <p>\n                                    <span class=\"font-medium\">Scopes:</span> {key.scopes.join(', ')}\n                                  </p>\n                                  <p>\n                                    <span class=\"font-medium\">Created:</span>{' '}\n                                    {new Date(key.created_at).toLocaleDateString()}\n                                  </p>\n                                  {key.expires_at && (\n                                    <p>\n                                      <span class=\"font-medium\">Expires:</span>{' '}\n                                      {new Date(key.expires_at).toLocaleDateString()}\n                                    </p>\n                                  )}\n                                  {key.last_used_at && (\n                                    <p>\n                                      <span class=\"font-medium\">Last used:</span>{' '}\n                                      {new Date(key.last_used_at).toLocaleDateString()}\n                                    </p>\n                                  )}\n                                </div>\n                              </div>\n                              {key.is_active && (\n                                <button\n                                  onClick={() => setRevokeConfirm({ id: key.id, name: key.name })}\n                                  class=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                                >\n                                  Revoke\n                                </button>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Create API Key Modal */}\n          {showCreateKey && (\n            <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n              <div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n                <div class=\"mt-3\">\n                  <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Create New API Key</h3>\n                  <form onSubmit={createApiKey}>\n                    <div class=\"space-y-4\">\n                      <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Name</label>\n                        <input\n                          type=\"text\"\n                          value={newKeyData.name}\n                          onInput={(e) =>\n                            setNewKeyData((prev) => ({\n                              ...prev,\n                              name: (e.target as HTMLInputElement).value,\n                            }))\n                          }\n                          placeholder=\"My Backend Service\"\n                          class=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                          required\n                        />\n                      </div>\n\n                      <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Permissions\n                        </label>\n                        <div class=\"space-y-2 max-h-32 overflow-y-auto\">\n                          {availableScopes.map((scope) => (\n                            <label key={scope} class=\"flex items-center\">\n                              <input\n                                type=\"checkbox\"\n                                checked={newKeyData.scopes.includes(scope)}\n                                onChange={() => toggleScope(scope)}\n                                class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                              />\n                              <span class=\"ml-2 text-sm text-gray-700\">{scope}</span>\n                            </label>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Expires in (days)\n                        </label>\n                        <select\n                          value={newKeyData.expires_in_days || ''}\n                          onChange={(e) =>\n                            setNewKeyData((prev) => ({\n                              ...prev,\n                              expires_in_days: (e.target as HTMLSelectElement).value\n                                ? parseInt((e.target as HTMLSelectElement).value)\n                                : undefined,\n                            }))\n                          }\n                          class=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                        >\n                          <option value=\"7\">7 days</option>\n                          <option value=\"30\">30 days</option>\n                          <option value=\"90\">90 days</option>\n                          <option value=\"365\">1 year</option>\n                          <option value=\"\">Never</option>\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class=\"flex space-x-3 mt-6\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowCreateKey(false)}\n                        class=\"flex-1 px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300\"\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        type=\"submit\"\n                        class=\"flex-1 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n                      >\n                        Create Key\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n\n      {/* Created Key Display Modal */}\n      {createdKey && (\n        <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div class=\"mt-3\">\n              <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4\">\n                <svg\n                  class=\"h-6 w-6 text-green-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M5 13l4 4L19 7\"\n                  />\n                </svg>\n              </div>\n              <h3 class=\"text-lg font-medium text-gray-900 text-center mb-4\">API Key Created</h3>\n              <div class=\"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4\">\n                <p class=\"text-sm text-yellow-800 mb-2\">\n                  <strong>Important:</strong> Save this key securely. It will not be shown again.\n                </p>\n                <div class=\"bg-white p-3 rounded border\">\n                  <code class=\"text-sm break-all\">{createdKey.key}</code>\n                </div>\n              </div>\n              <div class=\"text-sm text-gray-600 space-y-1 mb-4\">\n                <p>\n                  <strong>Name:</strong> {createdKey.name}\n                </p>\n                <p>\n                  <strong>Scopes:</strong> {createdKey.scopes.join(', ')}\n                </p>\n                {createdKey.expires_at && (\n                  <p>\n                    <strong>Expires:</strong> {new Date(createdKey.expires_at).toLocaleDateString()}\n                  </p>\n                )}\n              </div>\n              <button\n                onClick={() => setCreatedKey(null)}\n                class=\"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300\"\n              >\n                I've saved the key safely\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Revoke API Key Confirmation Modal */}\n      {revokeConfirm && (\n        <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div class=\"mt-3 text-center\">\n              <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n                <svg\n                  class=\"h-6 w-6 text-red-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z\"\n                  />\n                </svg>\n              </div>\n              <h3 class=\"text-lg font-medium text-gray-900 mt-2\">Revoke API Key</h3>\n              <div class=\"mt-2 px-7 py-3\">\n                <p class=\"text-sm text-gray-500\">\n                  Are you sure you want to revoke the API key \"{revokeConfirm.name}\"? This action\n                  cannot be undone and will immediately disable the key.\n                </p>\n              </div>\n              <div class=\"items-center px-4 py-3\">\n                <div class=\"flex space-x-3\">\n                  <button\n                    onClick={() => setRevokeConfirm(null)}\n                    class=\"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() => revokeApiKey(revokeConfirm.id)}\n                    class=\"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300\"\n                  >\n                    Revoke\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Remove Confirmation Modal */}\n      {removeConfirm && (\n        <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div class=\"mt-3 text-center\">\n              <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n                <svg\n                  class=\"h-6 w-6 text-red-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z\"\n                  />\n                </svg>\n              </div>\n              <h3 class=\"text-lg font-medium text-gray-900 mt-2\">Remove Admin</h3>\n              <div class=\"mt-2 px-7 py-3\">\n                <p class=\"text-sm text-gray-500\">\n                  Are you sure you want to remove admin \"{removeConfirm.username}\"? This action\n                  cannot be undone.\n                </p>\n              </div>\n              <div class=\"items-center px-4 py-3\">\n                <div class=\"flex space-x-3\">\n                  <button\n                    onClick={() => setRemoveConfirm(null)}\n                    class=\"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() => removeAdmin(removeConfirm.id)}\n                    class=\"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300\"\n                  >\n                    Remove\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useEffect, useState } from 'preact/hooks'\n\ninterface StorageObject {\n  key: string\n  size: number\n  uploaded: string\n  contentType?: string\n  customMetadata?: Record<string, string>\n}\n\ninterface StorageListResponse {\n  objects: StorageObject[]\n  truncated: boolean\n  cursor?: string\n  delimitedPrefixes: string[]\n}\n\nexport function StoragePage() {\n  const [objects, setObjects] = useState<StorageObject[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [uploading, setUploading] = useState(false)\n  const [selectedFiles, setSelectedFiles] = useState<Set<string>>(new Set())\n\n  useEffect(() => {\n    loadObjects()\n  }, [])\n\n  const loadObjects = async (prefix?: string, cursor?: string) => {\n    try {\n      setLoading(true)\n      const params = new URLSearchParams()\n      if (prefix) params.set('prefix', prefix)\n      if (cursor) params.set('cursor', cursor)\n\n      const response = await fetch(`/api/storage?${params}`)\n      if (!response.ok) throw new Error('Failed to load files')\n\n      const data: StorageListResponse = await response.json()\n      setObjects(cursor ? [...objects, ...data.objects] : data.objects)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unknown error')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleFileUpload = async (e: Event) => {\n    const input = e.target as HTMLInputElement\n    const files = input.files\n    if (!files?.length) return\n\n    setUploading(true)\n    try {\n      for (const file of Array.from(files)) {\n        const formData = new FormData()\n        formData.append('file', file)\n\n        const response = await fetch('/api/storage/upload', {\n          method: 'POST',\n          body: formData,\n        })\n\n        if (!response.ok) throw new Error(`Failed to upload ${file.name}`)\n      }\n\n      await loadObjects()\n      input.value = ''\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Upload failed')\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  const handleDelete = async (key: string) => {\n    if (!confirm(`Delete ${key}?`)) return\n\n    try {\n      const response = await fetch(`/api/storage/${encodeURIComponent(key)}`, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) throw new Error('Failed to delete file')\n\n      setObjects(objects.filter((obj) => obj.key !== key))\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Delete failed')\n    }\n  }\n\n  const handleBulkDelete = async () => {\n    if (selectedFiles.size === 0) return\n    if (!confirm(`Delete ${selectedFiles.size} files?`)) return\n\n    try {\n      const response = await fetch('/api/storage', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ keys: Array.from(selectedFiles) }),\n      })\n\n      if (!response.ok) throw new Error('Failed to delete files')\n\n      setObjects(objects.filter((obj) => !selectedFiles.has(obj.key)))\n      setSelectedFiles(new Set())\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Bulk delete failed')\n    }\n  }\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 B'\n    const k = 1024\n    const sizes = ['B', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return `${parseFloat((bytes / k ** i).toFixed(2))} ${sizes[i]}`\n  }\n\n  const toggleFileSelection = (key: string) => {\n    const newSelected = new Set(selectedFiles)\n    if (newSelected.has(key)) {\n      newSelected.delete(key)\n    } else {\n      newSelected.add(key)\n    }\n    setSelectedFiles(newSelected)\n  }\n\n  if (loading && objects.length === 0) {\n    return (\n      <div class=\"flex items-center justify-center h-64\">\n        <div class=\"text-gray-500\">Loading files...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <div class=\"flex justify-between items-center mb-6\">\n        <h2 class=\"text-2xl font-bold text-gray-900\">Storage</h2>\n        <div class=\"flex gap-2\">\n          {selectedFiles.size > 0 && (\n            <button\n              type=\"button\"\n              onClick={handleBulkDelete}\n              class=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n            >\n              Delete Selected ({selectedFiles.size})\n            </button>\n          )}\n          <label class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer\">\n            {uploading ? 'Uploading...' : 'Upload Files'}\n            <input\n              type=\"file\"\n              multiple\n              onChange={handleFileUpload}\n              disabled={uploading}\n              class=\"hidden\"\n            />\n          </label>\n        </div>\n      </div>\n\n      {error && (\n        <div class=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n          <p class=\"text-red-600\">{error}</p>\n          <button\n            type=\"button\"\n            onClick={() => setError(null)}\n            class=\"mt-2 text-sm text-red-500 hover:text-red-700\"\n          >\n            Dismiss\n          </button>\n        </div>\n      )}\n\n      <div class=\"bg-white shadow rounded-lg overflow-hidden\">\n        <table class=\"min-w-full divide-y divide-gray-200\">\n          <thead class=\"bg-gray-50\">\n            <tr>\n              <th class=\"w-12 px-6 py-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedFiles.size === objects.length && objects.length > 0}\n                  onChange={(e) => {\n                    const target = e.target as HTMLInputElement\n                    if (target.checked) {\n                      setSelectedFiles(new Set(objects.map((obj) => obj.key)))\n                    } else {\n                      setSelectedFiles(new Set())\n                    }\n                  }}\n                />\n              </th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Name\n              </th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Size\n              </th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Type\n              </th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Uploaded\n              </th>\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody class=\"bg-white divide-y divide-gray-200\">\n            {objects.length === 0 ? (\n              <tr>\n                <td colSpan={6} class=\"px-6 py-4 text-center text-gray-500\">\n                  No files uploaded yet\n                </td>\n              </tr>\n            ) : (\n              objects.map((obj) => (\n                <tr key={obj.key} class=\"hover:bg-gray-50\">\n                  <td class=\"px-6 py-4\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedFiles.has(obj.key)}\n                      onChange={() => toggleFileSelection(obj.key)}\n                    />\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm font-medium text-gray-900\">{obj.key}</div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm text-gray-900\">{formatFileSize(obj.size)}</div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm text-gray-900\">{obj.contentType || 'Unknown'}</div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm text-gray-900\">\n                      {new Date(obj.uploaded).toLocaleString()}\n                    </div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <a\n                      href={`/api/storage/download/${encodeURIComponent(obj.key)}`}\n                      class=\"text-blue-600 hover:text-blue-900 mr-4\"\n                      download\n                    >\n                      Download\n                    </a>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleDelete(obj.key)}\n                      class=\"text-red-600 hover:text-red-900\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n","import { Route, Router } from 'preact-router'\nimport { Layout } from './components/Layout'\nimport { AuthPage } from './pages/Auth'\nimport { CustomSQL } from './pages/CustomSQL'\nimport { DatabasePage } from './pages/Database'\nimport { HomePage } from './pages/Home'\nimport PushNotifications from './pages/PushNotifications'\nimport { SettingsPage } from './pages/Settings'\nimport { StoragePage } from './pages/Storage'\n\nexport function App() {\n  return (\n    <Layout>\n      <Router>\n        <Route path=\"/\" component={HomePage} />\n        <Route path=\"/database\" component={DatabasePage} />\n        <Route path=\"/custom-sql\" component={CustomSQL} />\n        <Route path=\"/storage\" component={StoragePage} />\n        <Route path=\"/push\" component={PushNotifications} />\n        <Route path=\"/auth\" component={AuthPage} />\n        <Route path=\"/settings\" component={SettingsPage} />\n      </Router>\n    </Layout>\n  )\n}\n","import { render } from 'preact'\nimport { App } from './app'\nimport './styles/index.css'\n\nrender(<App />, document.getElementById('app')!)\n"],"names":["n","l","u","i","r","o","e","f","c","s","a","h","p","v","y","w","d","g","_","t","m","k","x","S","C","M","$","O","z","I","P","q","A","L","B","H","T","j","F","b","D","N","V","E","J","K","U","R","W","clsx","useAuthMonitor","useEffect","handleFocus","error","Layout","children","jsxs","jsx","NavLink","href","Link","API_BASE","handleAuthError","fetchWithAuth","url","options","response","api","data","id","tableName","limit","offset","name","columns","sql","params","column","oldName","newName","columnName","changes","id1","id2","indexName","errorMessage","provider","enabled","policy","OAuthProviderCard","supportedProvider","configuredProvider","onUpdate","isEditing","setIsEditing","useState","isLoading","setIsLoading","formData","setFormData","showSecret","setShowSecret","setError","isConfigured","isEnabled","handleSave","err","handleToggle","handleDelete","scope","index","CallbackUrlsSection","callbackUrls","setCallbackUrls","newUrl","setNewUrl","isSaving","setIsSaving","loadCallbackUrls","saveCallbackUrls","urls","addUrl","updatedUrls","removeUrl","handleKeyPress","AuthPage","activeSection","setActiveSection","supportedProviders","setSupportedProviders","configuredProviders","setConfiguredProviders","loadData","supportedResult","configuredResult","getConfiguredProvider","providerName","enabledCount","configuredCount","CustomSQL","queries","setQueries","selectedQuery","setSelectedQuery","isCreating","setIsCreating","loading","setLoading","validationErrors","setValidationErrors","generateSlugFromName","seed","char","result","rng","digit","extractParametersFromSQL","paramRegex","matches","match","paramName","determineMethodAndReadonly","trimmedSql","isSelect","isPragma","validateForm","errors","sqlParams","definedParams","undefinedParams","param","testParams","setTestParams","testResult","setTestResult","testError","setTestError","testing","setTesting","fetchQueries","res","handleCreate","resetForm","handleUpdate","handleTest","addParameter","removeParameter","updateParameter","errorKey","prev","newErrors","query","parsedQuery","slug","rest","newSql","extractedParams","existingParamNames","newParams","sql_query","Spinner","size","SchemaHistory","onClose","onRestore","snapshots","setSnapshots","selectedSnapshot","setSelectedSnapshot","showCreateForm","setShowCreateForm","newSnapshot","setNewSnapshot","confirmRestore","setConfirmRestore","confirmDelete","setConfirmDelete","openMenuId","setOpenMenuId","isRestoring","setIsRestoring","isDeleting","setIsDeleting","handleClickOutside","event","target","handleCreateSnapshot","handleRestore","formatDate","dateString","getRelativeTime","date","diff","days","hours","snapshot","truncateId","SYSTEM_TABLES","getUserTables","tables","table","generateIndexName","columnPart","col","copyToClipboard","text","textArea","fallbackErr","DatabasePage","setTables","selectedTable","setSelectedTable","tableData","setTableData","tableColumns","setTableColumns","tableForeignKeys","setTableForeignKeys","showCreateTableForm","setShowCreateTableForm","newRecord","setNewRecord","newTable","setNewTable","openDropdownTable","setOpenDropdownTable","copiedCell","setCopiedCell","showSchemaEditor","setShowSchemaEditor","newColumn","setNewColumn","editingColumn","setEditingColumn","modifyingColumn","setModifyingColumn","validationWarning","setValidationWarning","confirmationModal","setConfirmationModal","editingCell","setEditingCell","editingRecord","setEditingRecord","clickCount","setClickCount","fkValidation","setFkValidation","editInputRef","useRef","hasInitializedFocus","showSchemaHistory","setShowSchemaHistory","tableIndexes","setTableIndexes","showIndexManager","setShowIndexManager","newIndex","setNewIndex","changingPolicy","setChangingPolicy","defaultName","formatDateTime","loadTables","loadTableData","loadTableSchema","indexResult","initialRecord","handleCreateRecord","recordToSend","key","value","errorData","userFriendlyMessage","handleDeleteRecord","handleCreateTable","columnsToCreate","_a","_b","_c","indexError","handleDropTable","handleChangeAccessPolicy","newPolicy","prevTables","handleCopyId","rowIndex","cellKey","handleIdClick","jumpToRecord","referencingTable","findTableWithId","element","baseTableName","record","handleAddColumn","columnData","handleRenameColumn","handleDropColumn","handleModifyColumn","validation","getForeignKeyForColumn","fk","validateForeignKey","fkInfo","validationKey","exists","handleCellDoubleClick","rowId","currentValue","row","handleCellSave","newValue","prevData","handleCellCancel","handleRecordSave","updateData","handleCreateIndex","columnsToIndex","handleDropIndex","userTables","systemTables","idx","newColumns","_d","defaultColumns","newIndexes","colIdx","currentTable","_e","currentNotNull","current","newState","timeout","input","length","_f","_g","_h","HomePage","stats","setStats","loadStats","health","tablesResult","DashboardCard","title","description","status","PushManager","apiBaseUrl","__publicField","subscription","subscriptionData","base64String","padding","base64","rawData","outputArray","buffer","bytes","binary","userAgent","browser","version","platform","pushManager","PushNotifications","isAdminSubscribed","setIsAdminSubscribed","permission","setPermission","rules","setRules","logs","setLogs","vapidPublicKey","setVapidPublicKey","activeTab","setActiveTab","showRuleForm","setShowRuleForm","editingRule","setEditingRule","initializePush","fetchRules","fetchLogs","fetchVapidPublicKey","checkAdminSubscription","handleAdminSubscribe","handleAdminUnsubscribe","handleAdminTestNotification","handleDeleteRule","ruleId","handleToggleRule","rule","renderSettings","renderTest","Fragment","renderRules","renderRuleForm","method","cleanedData","renderLogs","log","tab","SettingsPage","admins","setAdmins","newUsername","setNewUsername","adding","setAdding","removeConfirm","setRemoveConfirm","apiKeys","setApiKeys","apiKeysLoading","setApiKeysLoading","apiKeysError","setApiKeysError","showCreateKey","setShowCreateKey","newKeyData","setNewKeyData","createdKey","setCreatedKey","availableScopes","revokeConfirm","setRevokeConfirm","appSettings","setAppSettings","appSettingsLoading","setAppSettingsLoading","appSettingsError","setAppSettingsError","editingAppSettings","setEditingAppSettings","appSettingsForm","setAppSettingsForm","appSettingsSaving","setAppSettingsSaving","loadAdmins","addAdmin","removeAdmin","adminId","loadApiKeys","initResponse","_initErrorData","createApiKey","revokeApiKey","keyId","toggleScope","loadAppSettings","setting","saveAppSettings","admin","StoragePage","objects","setObjects","uploading","setUploading","selectedFiles","setSelectedFiles","loadObjects","prefix","cursor","handleFileUpload","files","file","obj","handleBulkDelete","formatFileSize","sizes","toggleFileSelection","newSelected","App","Router","Route","render"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}